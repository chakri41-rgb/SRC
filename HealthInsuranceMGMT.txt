------------------AppConfig.java----------------------------------



package com.genc.healthins.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

@Configuration
public class AppConfig {

    @Bean
    public BCryptPasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}

------------------AuthInterceptor.java----------------------------------

package com.genc.healthins.config;

import com.genc.healthins.model.User;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;
import org.springframework.lang.NonNull;
import org.springframework.web.servlet.HandlerInterceptor;

public class AuthInterceptor implements HandlerInterceptor {

    @Override
    public boolean preHandle(@NonNull HttpServletRequest request, @NonNull HttpServletResponse response, @NonNull Object handler) throws Exception {
        String path = request.getRequestURI();

        // Allow public resources
        if (path.startsWith("/login") || path.startsWith("/register") || path.startsWith("/assets") || path.startsWith("/css") || path.startsWith("/js") || path.startsWith("/static") || path.equals("/")) {
            return true;
        }

        HttpSession session = request.getSession(false);
        if (session == null) {
            response.sendRedirect("/login");
            return false;
        }

        User user = (User) session.getAttribute("loggedInUser");
        if (user == null) {
            response.sendRedirect("/login");
            return false;
        }

        // Role-based checks
        if (path.startsWith("/admin") && !"ADMIN".equals(user.getRole())) {
            response.sendRedirect("/access-denied");
            return false;
        }
        if (path.startsWith("/agent") && !"AGENT".equals(user.getRole())) {
            response.sendRedirect("/access-denied");
            return false;
        }
        if (path.startsWith("/user") && !"USER".equals(user.getRole())) {
            response.sendRedirect("/access-denied");
            return false;
        }

        // allowed for user
        return true;
    }
}

------------------DataLoader.java----------------------------------

package com.genc.healthins.config;

import com.genc.healthins.model.User;
import com.genc.healthins.service.UserService;
import jakarta.annotation.PostConstruct;
import org.springframework.stereotype.Component;

@Component
public class DataLoader {

    private final UserService userService;

    public DataLoader(UserService userService) {
        this.userService = userService;
    }

    @PostConstruct
    public void loadDefaults() {
        // create default accounts if none exist
        if (userService.findByEmail("admin@hims.com").isEmpty()) {
            User admin = new User("admin@hims.com", "admin1234", "ADMIN", "Admin");
            userService.save(admin);
        }

        if (userService.findByEmail("agent@hims.com").isEmpty()) {
            User agent = new User("agent@hims.com", "agent1234", "AGENT", "Agent");
            userService.save(agent);
        }

        if (userService.findByEmail("user@hims.com").isEmpty()) {
            User u = new User("user@hims.com", "user1234", "USER", "Customer");
            userService.save(u);
        }
    }
}


------------------GlobalController.java----------------------------------


package com.genc.healthins.config;

import com.genc.healthins.model.User;
import jakarta.servlet.http.HttpSession;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ModelAttribute;

@ControllerAdvice
public class GlobalControllerAdvice {

    @ModelAttribute("currentUser")
    public User currentUser(HttpSession session) {
        if (session == null) return null;
        Object obj = session.getAttribute("loggedInUser");
        if (obj instanceof User) return (User) obj;
        return null;
    }
}


------------------SecurityConfig.java----------------------------------


package com.genc.healthins.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.web.SecurityFilterChain;

@Configuration
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .csrf().disable()
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/assets/**", "/css/**", "/js/**", "/login", "/register", "/", "/not-found").permitAll()
                .anyRequest().permitAll()
            )
            .formLogin().disable()
            .logout().disable();
        return http.build();
    }
}


------------------WebConfig.java----------------------------------

package com.genc.healthins.config;

import org.springframework.context.annotation.Configuration;
import org.springframework.lang.NonNull;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addInterceptors(@NonNull InterceptorRegistry registry) {
        registry.addInterceptor(new AuthInterceptor())
                .addPathPatterns("/admin/**", "/agent/**", "/user/**", "/support/**");
    }

    @Override
    public void addResourceHandlers(@NonNull ResourceHandlerRegistry registry) {
        // serve static assets folder content
        registry
            .addResourceHandler("/assets/**")
            .addResourceLocations("classpath:/static/assets/");
    }
}


CONTROLLERS

-------------AdminController.java---------------------




package com.genc.healthins.controller;

import com.genc.healthins.model.Claim;
import com.genc.healthins.model.User;
import com.genc.healthins.service.PolicyService;
import com.genc.healthins.service.UserService;

import java.util.List;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

// import java.util.List;

@Controller
public class AdminController {

    private final UserService userService;
    private final PolicyService policyService;
    private final com.genc.healthins.service.ClaimService claimService;
    private final com.genc.healthins.service.SupportService supportService;

    public AdminController(UserService userService, PolicyService policyService, com.genc.healthins.service.ClaimService claimService, com.genc.healthins.service.SupportService supportService) {
        this.userService = userService;
        this.policyService = policyService;
        this.claimService = claimService;
        this.supportService = supportService;
    }

    @GetMapping({"/admin/dashboard", "/admin/dashboard.html"})
    public String dashboard(Model model) {
        var users = userService.findAll();
        var policies = policyService.findAll();

        // Aggregate claims across policies
        java.util.List<com.genc.healthins.model.Claim> allClaims = new java.util.ArrayList<>();
        for (var p : policies) {
            allClaims.addAll(claimService.findByPolicy(p));
        }

        // compute KPI counts
        long activePolicies = policies.stream().filter(p -> "Active".equalsIgnoreCase(p.getPolicyStatus())).count();
        long openClaims = allClaims.stream().filter(c -> "PENDING".equalsIgnoreCase(c.getClaimStatus())).count();
        long tickets = supportService.findAll().size();

        // recent claims (sorted by date desc, take 3)
        java.util.List<com.genc.healthins.model.Claim> recentClaims = allClaims.stream()
                .sorted(java.util.Comparator.comparing((com.genc.healthins.model.Claim c) -> c.getClaimDate(),
                        java.util.Comparator.nullsLast(java.util.Comparator.naturalOrder())).reversed())
                .limit(3)
                .toList();

        model.addAttribute("policies", policies);
        model.addAttribute("usersCount", users.size());
        model.addAttribute("users", users);
        model.addAttribute("activePolicies", activePolicies);
        model.addAttribute("openClaims", openClaims);
        model.addAttribute("ticketsCount", tickets);
        model.addAttribute("recentClaims", recentClaims);

        // build a small list of recent users with policy counts
        var recentUsers = users.stream().limit(5).map(u -> {
            java.util.Map<String, Object> m = new java.util.HashMap<>();
            m.put("username", u.getUsername());
            m.put("email", u.getEmail());
            m.put("policyCount", policyService.findByUser(u).size());
            return m;
        }).toList();
        model.addAttribute("recentUsers", recentUsers);

        return "admin/dashboard"; // templates/admin/dashboard.html
    }
    
    @GetMapping({"/admin/users", "/admin/users.html"})
    public String users(Model model) {
        var users = userService.findAll();
        model.addAttribute("users", users);
        return "admin/users";
    }
    // ADD THESE TO AdminController.java

// 1. Handle "Add New Account" Form Submission
    @PostMapping("/admin/users/add")
    public String addUser(@ModelAttribute User user, RedirectAttributes ra) {
        try {
            // Set the dynamic join date to right now
            user.setJoinDate(java.time.LocalDateTime.now());
            
            // Password is automatically bound from the form field name="password"
            userService.save(user); 
            ra.addFlashAttribute("success", "New account created successfully!");
        } catch (Exception e) {
            ra.addFlashAttribute("error", "Failed to create account: " + e.getMessage());
        }
        return "redirect:/admin/users";
    }

    // 2. Handle "Edit User" Form Submission
@PostMapping("/admin/users/edit")
public String editUser(@RequestParam Long id, 
                       @RequestParam String username, 
                       @RequestParam String phone, 
                       @RequestParam String role, 
                       RedirectAttributes ra) {
    var opt = userService.findById(id);
    if (opt.isPresent()) {
        User user = opt.get();
        user.setUsername(username);
        user.setPhone(phone);
        user.setRole(role);
        userService.save(user); // Persists changes to the database
        ra.addFlashAttribute("success", "User updated!");
    }
    return "redirect:/admin/users";
}
    @GetMapping({"/admin/policies", "/admin/policies.html"})
    public String policies(Model model) {
        model.addAttribute("policies", policyService.findAll());
        model.addAttribute("users", userService.findAll());
        return "admin/policies";
    }

// 1. Handle creating a new Policy Plan for the Marketplace
@PostMapping("/admin/policies")
public String createPolicy(@RequestParam("policyName") String policyName, // Matches HTML name="policyName"
                           @RequestParam("premium") java.math.BigDecimal premium,
                           @RequestParam("coverage") java.math.BigDecimal coverage,
                           @RequestParam("startDate") String startDate,
                           @RequestParam("endDate") String endDate,
                           RedirectAttributes ra) {
    org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(AdminController.class);
    try {
        log.debug("Received createPolicy request: name={}, premium={}, coverage={}, start={}, end={}", policyName, premium, coverage, startDate, endDate);
        com.genc.healthins.model.Policy p = new com.genc.healthins.model.Policy();
        // Use a temporary, unique token for policyNumber to satisfy NOT NULL/UNIQUE constraint
        p.setPolicyNumber("TMP-" + java.util.UUID.randomUUID().toString());
        p.setCoverageType(policyName);
        p.setCoverageAmount(coverage);
        p.setPremiumAmount(premium);
        p.setPolicyStatus("ACTIVE");
        p.setStartDate(java.time.LocalDate.parse(startDate).atStartOfDay());
        p.setEndDate(java.time.LocalDate.parse(endDate).atStartOfDay());
        p.setCreatedAt(java.time.LocalDateTime.now());
        p.setUpdatedAt(java.time.LocalDateTime.now());

        // Save to obtain the generated ID, then set a human-friendly sequential policy number
        com.genc.healthins.model.Policy saved = policyService.save(p); // Persist to DB
        if (saved != null && saved.getId() != null) {
            String formatted = String.format("POL-%d-%03d", java.time.Year.now().getValue(), saved.getId());
            saved.setPolicyNumber(formatted);
            saved.setUpdatedAt(java.time.LocalDateTime.now());
            // Save again to persist policyNumber change
            saved = policyService.save(saved);
            log.info("Policy saved with id={} and policyNumber={}", saved.getId(), saved.getPolicyNumber());
            ra.addFlashAttribute("success", "New Plan published successfully!");
        } else {
            log.warn("Policy.save returned null id or saved is null");
            ra.addFlashAttribute("error", "Plan was not saved properly. Check logs.");
        }
    } catch (org.springframework.dao.DataIntegrityViolationException dive) {
        log.error("Data integrity violation while creating policy", dive);
        ra.addFlashAttribute("error", "Database constraint error: " + dive.getRootCause());
    } catch (Exception ex) {
        log.error("Error creating policy", ex);
        ra.addFlashAttribute("error", "Failed to publish plan: " + ex.toString());
    }
    return "redirect:/admin/policies";
}
// Updated Edit Policy logic to handle Optional
@PostMapping("/admin/policies/edit")
public String editPolicy(@RequestParam("id") Long id, 
                         @RequestParam("policyName") String policyName,
                         @RequestParam("premium") java.math.BigDecimal premium, 
                         @RequestParam("coverage") java.math.BigDecimal coverage,
                         @RequestParam("startDate") String startDate,
                         @RequestParam("endDate") String endDate,
                         RedirectAttributes ra) {
    java.util.Optional<com.genc.healthins.model.Policy> opt = policyService.findById(id);
    if (opt.isPresent()) {
        com.genc.healthins.model.Policy p = opt.get();
        p.setCoverageType(policyName);
        p.setPremiumAmount(premium);
        p.setCoverageAmount(coverage);
        p.setStartDate(java.time.LocalDate.parse(startDate).atStartOfDay());
        p.setEndDate(java.time.LocalDate.parse(endDate).atStartOfDay());
        policyService.save(p);
        ra.addFlashAttribute("success", "Plan updated successfully!");
    }
    return "redirect:/admin/policies";
}
// 2. Handle Deleting a Policy
@PostMapping("/admin/policies/delete/{id}")
public String deletePolicy(@PathVariable Long id, RedirectAttributes ra) {
    try {
        policyService.deleteById(id); // Physically removes from MySQL
        ra.addFlashAttribute("success", "Policy Plan removed from Marketplace.");
    } catch (Exception ex) {
        ra.addFlashAttribute("error", "Could not delete policy.");
    }
    return "redirect:/admin/policies";
}

@GetMapping({"/admin/policies/{id}", "/admin/policies/{id}.html"})
public String policyDetails(@PathVariable Long id, Model model, RedirectAttributes ra) {
    java.util.Optional<com.genc.healthins.model.Policy> opt = policyService.findById(id);
    if (opt.isEmpty()) {
        ra.addFlashAttribute("error", "Policy not found");
        return "redirect:/admin/policies";
    }
    model.addAttribute("policy", opt.get());
    return "admin/policy-details";
}

    @PostMapping({"/admin/users/delete/{id}", "/admin/users/delete/{id}.html"})
    public String deleteUser(@PathVariable Long id, RedirectAttributes ra) {
        try {
            userService.deleteById(id);
            ra.addFlashAttribute("success", "User deleted");
        } catch (Exception ex) {
            ra.addFlashAttribute("error", "Could not delete user: " + ex.getMessage());
        }
        return "redirect:/admin/users";
    }

    @GetMapping({"/admin/users/{id}", "/admin/users/{id}.html"})
    public String userDetails(@PathVariable Long id, Model model, RedirectAttributes ra) {
        var opt = userService.findById(id);
        if (opt.isEmpty()) {
            ra.addFlashAttribute("error", "User not found");
            return "redirect:/admin/users";
        }
        var user = opt.get();
        model.addAttribute("user", user);
        model.addAttribute("policies", policyService.findByUser(user));
        return "admin/user-details";
    }
    @GetMapping({"/admin/claims", "/admin/claims.html"})
public String claims(Model model) {
    List<Claim> allClaims = claimService.findAll();
    model.addAttribute("claims", allClaims);
    
    // Dynamic KPI Stats
    model.addAttribute("pendingCount", allClaims.stream().filter(c -> "PENDING".equalsIgnoreCase(c.getClaimStatus())).count());
    model.addAttribute("approvedCount", allClaims.stream().filter(c -> "APPROVED".equalsIgnoreCase(c.getClaimStatus())).count());
    model.addAttribute("rejectedCount", allClaims.stream().filter(c -> "REJECTED".equalsIgnoreCase(c.getClaimStatus())).count());
    
    return "admin/claims";
}

@PostMapping("/admin/claims/process")
public String processClaim(@RequestParam Long claimId, 
                           @RequestParam String status, 
                           @RequestParam(required = false) java.math.BigDecimal approvedAmount, 
                           RedirectAttributes ra) {
    var opt = claimService.findById(claimId);
    if (opt.isPresent()) {
        Claim c = opt.get();
        c.setClaimStatus(status);
        if (approvedAmount != null) {
            c.setClaimAmount(approvedAmount); // Admin adjustment logic
        }
        claimService.save(c);
        ra.addFlashAttribute("success", "Claim " + status + " successfully!");
    }
    return "redirect:/admin/claims";
}
}


-------------AgentController.java---------------------



package com.genc.healthins.controller;

import com.genc.healthins.model.Claim;
import com.genc.healthins.model.Policy;
import com.genc.healthins.model.SupportTicket;
import com.genc.healthins.model.User;
import com.genc.healthins.service.ClaimService;
import com.genc.healthins.service.PolicyService;
import com.genc.healthins.service.SupportService;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

import java.time.LocalDate;
import java.util.*;
import java.util.stream.Collectors;

@Controller
public class AgentController {

    private final PolicyService policyService;
    private final SupportService supportService;
    private final ClaimService claimService;
    private final com.genc.healthins.service.UserService userService;

    public AgentController(PolicyService policyService, SupportService supportService, ClaimService claimService, com.genc.healthins.service.UserService userService) {
        this.policyService = policyService;
        this.supportService = supportService;
        this.claimService = claimService;
        this.userService = userService;
    }

    @GetMapping({"/agent/dashboard", "/agent/dashboard.html"})
    public String dashboard(Model model) {
        List<Policy> policies = policyService.findAll();
        List<SupportTicket> tickets = supportService.findAll();

        // Customers count (unique users)
        Set<User> customers = policies.stream()
                .map(Policy::getUser)
                .filter(Objects::nonNull)
                .collect(Collectors.toSet());

        // Claims counts and lists
        List<Claim> pendingClaims = new ArrayList<>();
        int approvedToday = 0;
        int rejectedToday = 0;
        LocalDate today = LocalDate.now();

        for (Policy p : policies) {
            var claims = claimService.findByPolicy(p);
            for (Claim c : claims) {
                String status = c.getClaimStatus();
                if ("PENDING".equalsIgnoreCase(status)) pendingClaims.add(c);
                if ("APPROVED".equalsIgnoreCase(status) && c.getClaimDate() != null && c.getClaimDate().toLocalDate().equals(today)) approvedToday++;
                if ("REJECTED".equalsIgnoreCase(status) && c.getClaimDate() != null && c.getClaimDate().toLocalDate().equals(today)) rejectedToday++;
            }
        }

        model.addAttribute("policies", policies);
        model.addAttribute("tickets", tickets);
        model.addAttribute("pendingClaims", pendingClaims);
        model.addAttribute("pendingClaimsCount", pendingClaims.size());
        model.addAttribute("approvedToday", approvedToday);
        model.addAttribute("rejectedToday", rejectedToday);
        model.addAttribute("customersCount", customers.size());

        return "agent/dashboard";
    }

    // API endpoint to process (approve/reject) a claim
    @org.springframework.web.bind.annotation.PostMapping("/agent/claims/{id}/action")
    @org.springframework.web.bind.annotation.ResponseBody
    public org.springframework.http.ResponseEntity<?> processClaim(@org.springframework.web.bind.annotation.PathVariable Long id,
                                                                   @org.springframework.web.bind.annotation.RequestParam String action) {
        var opt = claimService.findById(id);
        if (opt.isEmpty()) return org.springframework.http.ResponseEntity.status(404).body(java.util.Map.of("error", "Claim not found"));
        var claim = opt.get();
        var now = java.time.LocalDateTime.now();
        if ("approve".equalsIgnoreCase(action)) {
            claim.setClaimStatus("APPROVED");
            claim.setClaimDate(now);
            claimService.save(claim);
            return org.springframework.http.ResponseEntity.ok(java.util.Map.of("status","approved"));
        } else if ("reject".equalsIgnoreCase(action)) {
            claim.setClaimStatus("REJECTED");
            claim.setClaimDate(now);
            claimService.save(claim);
            return org.springframework.http.ResponseEntity.ok(java.util.Map.of("status","rejected"));
        }
        return org.springframework.http.ResponseEntity.badRequest().body(java.util.Map.of("error","Unknown action"));
    }

    // API endpoint to delete a claim
    @org.springframework.web.bind.annotation.DeleteMapping("/agent/claims/{id}")
    @org.springframework.web.bind.annotation.ResponseBody
    public org.springframework.http.ResponseEntity<?> deleteClaim(@org.springframework.web.bind.annotation.PathVariable Long id) {
        var opt = claimService.findById(id);
        if (opt.isEmpty()) return org.springframework.http.ResponseEntity.status(404).body(java.util.Map.of("error","Claim not found"));
        claimService.deleteById(id);
        return org.springframework.http.ResponseEntity.ok(java.util.Map.of("status","deleted"));
    }

    @GetMapping({"/agent/policies", "/agent/policies.html"})
    public String policies(Model model) {
        model.addAttribute("policies", policyService.findAll());
        return "agent/policies";
    }

    @GetMapping({"/agent/claims", "/agent/claims.html"})
    public String claims(Model model) {
        // collect all claims across policies for the agent view
        List<Policy> policies = policyService.findAll();
        List<Claim> allClaims = new ArrayList<>();
        for (Policy p : policies) {
            allClaims.addAll(claimService.findByPolicy(p));
        }
        model.addAttribute("claims", allClaims);
        model.addAttribute("statPending", (int) allClaims.stream().filter(c -> "PENDING".equalsIgnoreCase(c.getClaimStatus())).count());
        model.addAttribute("statApproved", (int) allClaims.stream().filter(c -> "APPROVED".equalsIgnoreCase(c.getClaimStatus())).count());
        model.addAttribute("statRejected", (int) allClaims.stream().filter(c -> "REJECTED".equalsIgnoreCase(c.getClaimStatus())).count());
        return "agent/claims";
    }

    @GetMapping({"/agent/profile", "/agent/profile.html"})
    public String profile(jakarta.servlet.http.HttpServletRequest request, Model model) {
        var session = request.getSession(false);
        var user = session != null ? (com.genc.healthins.model.User) session.getAttribute("loggedInUser") : null;
        model.addAttribute("agent", user);
        return "agent/profile";
    }

    @GetMapping({"/agent/customers", "/agent/customers.html"})
    public String customers(Model model) {
        java.util.List<com.genc.healthins.model.User> users = userService.findAll().stream()
                .filter(u -> "USER".equalsIgnoreCase(u.getRole()))
                .toList();

        long active = users.stream().filter(u -> !policyService.findByUser(u).isEmpty()).count();
        long pending = users.size() - active;
        long inactive = 0; // no explicit status field on User yet

        model.addAttribute("customers", users);
        model.addAttribute("statActive", active);
        model.addAttribute("statPending", pending);
        model.addAttribute("statInactive", inactive);
        model.addAttribute("customersCount", users.size());
        return "agent/customers";
    }

    @GetMapping({"/agent/customers/{id}", "/agent/customers/{id}.html"})
    public String customerDetails(@org.springframework.web.bind.annotation.PathVariable Long id, Model model, org.springframework.web.servlet.mvc.support.RedirectAttributes ra) {
        var opt = userService.findById(id);
        if (opt.isEmpty()) {
            ra.addFlashAttribute("error", "Customer not found");
            return "redirect:/agent/customers";
        }
        var user = opt.get();
        model.addAttribute("customer", user);
        model.addAttribute("policies", policyService.findByUser(user));
        return "agent/customer-details";
    }
}
---------AuthController.java----------------


package com.genc.healthins.controller;

import com.genc.healthins.model.User;
import com.genc.healthins.service.UserService;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpSession;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

@Controller
public class AuthController {

    private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(AuthController.class);
    private final UserService userService;
    private final org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder passwordEncoder;

    public AuthController(UserService userService, org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder passwordEncoder) {
        this.userService = userService;
        this.passwordEncoder = passwordEncoder;
    }

    @GetMapping({"/login", "/login.html"})
    public String loginPage() {
        return "login"; // templates/login.html
    }

    @GetMapping({"/", "/index", "/index.html"})
    public String homePage() {
        return "index"; // templates/index.html
    }

    @PostMapping("/login")
    public String loginSubmit(@RequestParam String email,
                              @RequestParam String password,
                              HttpServletRequest request,
                              RedirectAttributes ra) {
        log.debug("Login attempt for email={}", email);
        var opt = userService.findByEmail(email);
        if (opt.isEmpty()) {
            log.debug("Login failed: user not found for email={}", email);
            ra.addFlashAttribute("error", "Invalid credentials");
            return "redirect:/login";
        }
        User user = opt.get();
        // verify password using application encoder bean
        boolean ok = passwordEncoder.matches(password, user.getPassword());
        log.debug("Password check for email={} result={}", email, ok);
        if (!ok) {
            ra.addFlashAttribute("error", "Invalid credentials");
            return "redirect:/login";
        }

        // create session
        HttpSession session = request.getSession(true);
        session.setAttribute("loggedInUser", user);

        // Role-based redirect
        if ("ADMIN".equals(user.getRole())) {
            return "redirect:/admin/dashboard";
        } else if ("AGENT".equals(user.getRole())) {
            return "redirect:/agent/dashboard";
        } else {
            return "redirect:/user/dashboard";
        }
    }

    @GetMapping({"/register", "/register.html"})
    public String registerPage() {
        return "register";
    }

    @PostMapping("/register")
    public String registerSubmit(@RequestParam String email,
                                 @RequestParam String password,
                                 @RequestParam(required = false) String username,
                                 @RequestParam(required = false) String role,
                                 RedirectAttributes ra) {
        if (email == null || password == null) {
            ra.addFlashAttribute("error", "Please fill all required fields");
            return "redirect:/register";
        }

        if (userService.findByEmail(email).isPresent()) {
            ra.addFlashAttribute("error", "Email already registered");
            return "redirect:/register";
        }

        User user = new User();
        user.setEmail(email);
        user.setPassword(password);
        user.setRole(role != null && !role.isBlank() ? role : "USER");
        user.setUsername(username != null && !username.isBlank() ? username : email);
        userService.save(user);
        ra.addFlashAttribute("registered", true);
        return "redirect:/login";
    }

    @GetMapping("/logout")
    public String logout(HttpServletRequest request) {
        HttpSession session = request.getSession(false);
        if (session != null) session.invalidate();
        return "redirect:/login";
    }

    @GetMapping("/access-denied")
    public String accessDenied() { return "not-found"; }
}


-------------------DebugController.java-----------------------------


package com.genc.healthins.controller;

import com.genc.healthins.service.UserService;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class DebugController {

    private final UserService userService;

    public DebugController(UserService userService) {
        this.userService = userService;
    }

    @GetMapping("/debug/users/count")
    public String usersCount() {
        return "users=" + userService.findAll().size();
    }
}





---------------SupportController.java---------------------


package com.genc.healthins.controller;

import com.genc.healthins.model.SupportResponse;
import com.genc.healthins.model.SupportTicket;
import com.genc.healthins.model.User;
import com.genc.healthins.service.SupportResponseService;
import com.genc.healthins.service.SupportService;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpSession;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import java.time.LocalDateTime;

@Controller
public class SupportController {

    private final SupportService ticketService;
    private final SupportResponseService responseService;

    public SupportController(SupportService ticketService, SupportResponseService responseService) {
        this.ticketService = ticketService;
        this.responseService = responseService;
    }

    @GetMapping({"/user/support","/user/support.html"})
    public String userSupport(Model model, HttpServletRequest request) {
    HttpSession session = request.getSession(false);
    if (session == null || session.getAttribute("loggedInUser") == null) {
        return "redirect:/login"; // Force login if session is missing
    }
    
    User user = (User) session.getAttribute("loggedInUser");
    model.addAttribute("tickets", ticketService.findByUser(user));
    return "user/support";
}

    // @PostMapping("/user/support/create")
    // public String createTicket(@RequestParam String issue_description, HttpServletRequest request, RedirectAttributes ra) {
    //     HttpSession session = request.getSession(false);
    //     User user = session != null ? (User) session.getAttribute("loggedInUser") : null;
    //     if (user == null) {
    //         ra.addFlashAttribute("error", "Please login to create a ticket");
    //         return "redirect:/login";
    //     }
    //     SupportTicket ticket = new SupportTicket();
    //     ticket.setIssueDescription(issue_description);
    //     ticket.setCreatedDate(LocalDateTime.now());
    //     ticket.setTicketStatus("OPEN");
    //     ticket.setUser(user);
    //     ticketService.save(ticket);
    //     ra.addFlashAttribute("success", "Ticket created successfully");
    //     return "redirect:/user/support";
    // }
//     @PostMapping("/user/support/create")
//     public String createTicket(@RequestParam String issue_description, HttpServletRequest request, RedirectAttributes ra) {
//     HttpSession session = request.getSession(false);
    
//     // DEBUG: Check if session exists
//     if (session == null) {
//         System.out.println("DEBUG: Session is null");
//         return "redirect:/login";
//     }

//     User user = (User) session.getAttribute("loggedInUser");
    
//     // DEBUG: Check if user is in session
//     if (user == null) {
//         System.out.println("DEBUG: LoggedInUser not found in session");
//         ra.addFlashAttribute("error", "Please login to create a ticket");
//         return "redirect:/login";
//     }

//     try {
//         SupportTicket ticket = new SupportTicket();
//         ticket.setIssueDescription(issue_description);
//         ticket.setCreatedDate(LocalDateTime.now());
//         ticket.setTicketStatus("OPEN");
//         ticket.setUser(user); // Links ticket to user_id
        
//         ticketService.save(ticket);
//         System.out.println("DEBUG: Ticket saved successfully for user: " + user.getUsername());
        
//         ra.addFlashAttribute("success", "Ticket created successfully");
//     } catch (Exception e) {
//         System.err.println("DEBUG: Error saving ticket: " + e.getMessage());
//         ra.addFlashAttribute("error", "Database error occurred.");
//     }

//     return "redirect:/user/support";
// }

@PostMapping("/user/support/create")
public String createTicket(
    @RequestParam String subject,           // Added to match Photo 4
    @RequestParam String category,
    @RequestParam String priority,
    @RequestParam String issue_description,
    HttpServletRequest request, 
    RedirectAttributes ra) {
    
    HttpSession session = request.getSession(false);
    User user = (session != null) ? (User) session.getAttribute("loggedInUser") : null;

    if (user == null) return "redirect:/login";

    try {
        SupportTicket ticket = new SupportTicket();
        ticket.setSubject(subject);         // Save Subject
        ticket.setCategory(category); 
        ticket.setPriority(priority); 
        ticket.setIssueDescription(issue_description);
        ticket.setCreatedDate(LocalDateTime.now());
        ticket.setTicketStatus("OPEN");
        ticket.setUser(user);
        
        ticketService.save(ticket);
        ra.addFlashAttribute("success", "Ticket created successfully!");
    } catch (Exception e) {
        ra.addFlashAttribute("error", "Database error: " + e.getMessage());
    }

    return "redirect:/user/support";
}
    @GetMapping({"/admin/support","/admin/support.html"})
    public String adminSupport(Model model, HttpServletRequest request) {
    // 1. Fetch all tickets for the admin list
    model.addAttribute("tickets", ticketService.findAll());
    
    // 2. Add KPI stats (Missing in your current code)
    model.addAttribute("openCount", ticketService.countByStatus("OPEN"));
    model.addAttribute("highPriorityCount", ticketService.countByPriority("High"));
    model.addAttribute("resolvedCount", ticketService.countByStatus("RESOLVED"));
    
    return "admin/support";
}

    // @GetMapping({"/support/view/{id}", "/support/view/{id}.html"})
    // public String viewTicket(@PathVariable Long id, Model model) {
    //     var opt = ticketService.findById(id);
    //     if (opt.isEmpty()) return "not-found";
    //     SupportTicket ticket = opt.get();
    //     model.addAttribute("ticket", ticket);
    //     model.addAttribute("responses", responseService.findByTicket(ticket));
    //     return "support/view"; // templates/support/view.html
    // }

@GetMapping("/support/view/{id}")
public String viewTicket(@PathVariable Long id, Model model) {
    var opt = ticketService.findById(id);
    if (opt.isEmpty()) return "not-found";
    
    SupportTicket ticket = opt.get();
    model.addAttribute("ticket", ticket);
    model.addAttribute("responses", responseService.findByTicket(ticket));
    
    // Points to src/main/resources/templates/user/view.html
    return "user/view"; 
}
//     @PostMapping("/support/{id}/resolve")
//     public String resolveTicket(@PathVariable Long id, HttpServletRequest request, RedirectAttributes ra) {
//     var opt = ticketService.findById(id);
//     if (opt.isEmpty()) {
//         ra.addFlashAttribute("error", "Ticket not found");
//         return "redirect:/admin/support";
//     }

//     SupportTicket ticket = opt.get();
//     ticket.setTicketStatus("RESOLVED");
//     ticket.setResolvedDate(LocalDateTime.now());
//     ticketService.save(ticket);

//     ra.addFlashAttribute("success", "Ticket marked as resolved");
    
//     // Redirect logic: if admin/agent, stay in admin view; if user, go to support list
//     HttpSession session = request.getSession(false);
//     User loggedInUser = (User) session.getAttribute("loggedInUser");
    
//     if (loggedInUser != null && ("ADMIN".equals(loggedInUser.getRole()) || "AGENT".equals(loggedInUser.getRole()))) {
//         return "redirect:/admin/support";
//     }
//     return "redirect:/user/support";
// }
// Add these methods to your existing SupportController.java

// 1. Display the Agent Support Page
@GetMapping("/agent/support")
public String agentSupport(Model model, HttpServletRequest request) {
    HttpSession session = request.getSession(false);
    User user = (session != null) ? (User) session.getAttribute("loggedInUser") : null;

    if (user == null || (!"AGENT".equals(user.getRole()) && !"ADMIN".equals(user.getRole()))) {
        return "redirect:/login";
    }

    model.addAttribute("tickets", ticketService.findAll());
    
    // These match the th:text variables we will add to the HTML
    model.addAttribute("openCount", ticketService.countByStatus("OPEN"));
    model.addAttribute("highPriorityCount", ticketService.countByPriority("High"));
    model.addAttribute("resolvedCount", ticketService.countByStatus("RESOLVED"));

    return "agent/support";
}

// 2. Handle Agent Response (from Modal)
@PostMapping("/agent/support/response")
public String agentResponse(@RequestParam Long ticketId, 
                            @RequestParam String message, 
                            HttpServletRequest request, 
                            RedirectAttributes ra) {
    
    HttpSession session = request.getSession(false);
    User agent = (User) session.getAttribute("loggedInUser");

    try {
        SupportTicket ticket = ticketService.findById(ticketId).orElseThrow();
        
        SupportResponse response = new SupportResponse();
        response.setSupportTicket(ticket);
        response.setResponder(agent); // The Agent is the responder
        response.setMessage(message);
        response.setCreatedAt(LocalDateTime.now());
        
        responseService.save(response);
        ra.addFlashAttribute("success", "Response sent to customer!");
    } catch (Exception e) {
        ra.addFlashAttribute("error", "Error sending response.");
    }

    return "redirect:/agent/support";
}
    @PostMapping("/support/{id}/resolve")
    public String resolveTicket(@PathVariable Long id, HttpServletRequest request, RedirectAttributes ra) {
    var opt = ticketService.findById(id);
    if (opt.isEmpty()) {
        ra.addFlashAttribute("error", "Ticket not found.");
        return "redirect:/user/support";
    }

    SupportTicket ticket = opt.get();
    ticket.setTicketStatus("RESOLVED");
    ticket.setResolvedDate(LocalDateTime.now());
    ticketService.save(ticket);

    ra.addFlashAttribute("success", "Ticket resolved successfully.");
    
    // Logic: If Admin resolves, go to admin list. If User resolves, go to user list.
    HttpSession session = request.getSession(false);
    User user = (User) session.getAttribute("loggedInUser");
    if (user != null && "ADMIN".equals(user.getRole())) {
        return "redirect:/admin/support";
    }
    return "redirect:/user/support";
}
@PostMapping("/support/{id}/response")
public String addResponse(@PathVariable Long id, @RequestParam("message") String message, HttpServletRequest request, RedirectAttributes ra) {
    // Log to console so you can see if the button click reached Java
    System.out.println("DEBUG: Send Reply clicked for Ticket: " + id);

    var opt = ticketService.findById(id);
    if (opt.isEmpty()) return "redirect:/user/support";

    HttpSession session = request.getSession(false);
    User responder = (session != null) ? (User) session.getAttribute("loggedInUser") : null;

    // If this prints in your console, your session has expired
    if (responder == null) {
        System.out.println("DEBUG: Save failed because NO USER found in session");
        return "redirect:/login"; 
    }

    try {
        SupportResponse response = new SupportResponse();
        response.setSupportTicket(opt.get());
        response.setResponder(responder);
        response.setMessage(message);
        response.setCreatedAt(LocalDateTime.now());
        
        responseService.save(response);
        System.out.println("DEBUG: Successfully saved to database!"); 
    } catch (Exception e) {
        System.out.println("DEBUG: Error saving: " + e.getMessage());
    }

    return "redirect:/support/view/" + id;
}
}



------------------UserController.java------------------------------



package com.genc.healthins.controller;

import com.genc.healthins.model.Policy;
import com.genc.healthins.model.User;
import com.genc.healthins.service.PolicyService;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import java.util.List;

@Controller
public class UserController {

    private final PolicyService policyService;
    private final com.genc.healthins.service.ClaimService claimService;
    private final com.genc.healthins.service.PaymentService paymentService;
    private final com.genc.healthins.service.SupportService supportService;

    public UserController(PolicyService policyService,
                          com.genc.healthins.service.ClaimService claimService,
                          com.genc.healthins.service.PaymentService paymentService,
                          com.genc.healthins.service.SupportService supportService) {
        this.policyService = policyService;
        this.claimService = claimService;
        this.paymentService = paymentService;
        this.supportService = supportService;
    }

    @GetMapping({"/user/dashboard", "/user/dashboard.html"})
    public String dashboard(Model model, jakarta.servlet.http.HttpServletRequest request) {
        User user = (User) request.getSession().getAttribute("loggedInUser");
        List<Policy> policies = user != null ? policyService.findByUser(user) : java.util.Collections.emptyList();

        // Aggregate claims and payments for the logged-in user
        int claimsCount = 0;
        int pendingClaimsCount = 0;
        int paymentsDue = 0;
        java.util.List<com.genc.healthins.model.Claim> allClaims = new java.util.ArrayList<>();

        for (Policy p : policies) {
            var claims = claimService.findByPolicy(p);
            allClaims.addAll(claims);
            claimsCount += claims.size();
            for (var c : claims) {
                if ("PENDING".equalsIgnoreCase(c.getClaimStatus())) pendingClaimsCount++;
            }

            var payments = paymentService.findByPolicy(p);
            for (var pay : payments) {
                if (pay.getPaymentStatus() == null || "PENDING".equalsIgnoreCase(pay.getPaymentStatus())) paymentsDue++;
            }
        }

        java.util.List<com.genc.healthins.model.SupportTicket> tickets = user != null ? supportService.findByUser(user) : java.util.Collections.<com.genc.healthins.model.SupportTicket>emptyList();
        int ticketsOpen = (int) tickets.stream().filter(t -> t.getTicketStatus() == null || !"CLOSED".equalsIgnoreCase(t.getTicketStatus())).count();

        model.addAttribute("policies", policies);
        model.addAttribute("claimsCount", claimsCount);
        model.addAttribute("pendingClaimsCount", pendingClaimsCount);
        model.addAttribute("paymentsDue", paymentsDue);
        model.addAttribute("ticketsOpen", ticketsOpen);
        model.addAttribute("userName", user != null ? user.getUsername() : "Guest");

        return "user/dashboard";
    }

    @GetMapping({"/user/policies", "/user/policies.html"})
    public String policies(Model model, jakarta.servlet.http.HttpServletRequest request) {
        User user = (User) request.getSession().getAttribute("loggedInUser");
        java.util.List<Policy> policies = user != null ? policyService.findByUser(user) : java.util.Collections.emptyList();

        // compute last payment per policy
        java.util.Map<Long, com.genc.healthins.model.Payment> lastPayments = new java.util.HashMap<>();
        for (Policy p : policies) {
            var pays = paymentService.findByPolicy(p);
            if (!pays.isEmpty()) {
                var last = pays.stream().max(java.util.Comparator.comparing(com.genc.healthins.model.Payment::getPaymentDate)).get();
                lastPayments.put(p.getId(), last);
            }
        }

        model.addAttribute("policies", policies);
        model.addAttribute("lastPayments", lastPayments);
        return "user/policies";
    }

    @GetMapping({"/user/policy-details", "/user/policy-details.html"})
    public String policyDetails(@org.springframework.web.bind.annotation.RequestParam(required = false) Long id, Model model, jakarta.servlet.http.HttpServletRequest request, org.springframework.web.servlet.mvc.support.RedirectAttributes ra) {
        if (id == null) {
            ra.addFlashAttribute("error", "Policy not specified");
            return "redirect:/user/policies";
        }
        var opt = policyService.findById(id);
        if (opt.isEmpty()) {
            ra.addFlashAttribute("error", "Policy not found");
            return "redirect:/user/policies";
        }
        model.addAttribute("policy", opt.get());
        return "user/policy-details";
    }

    @GetMapping({"/user/claims", "/user/claims.html"})
    public String claims(Model model, jakarta.servlet.http.HttpServletRequest request) {
        User user = (User) request.getSession().getAttribute("loggedInUser");
        java.util.List<com.genc.healthins.model.Claim> allClaims = new java.util.ArrayList<>();
        if (user != null) {
            for (Policy p : policyService.findByUser(user)) {
                allClaims.addAll(claimService.findByPolicy(p));
            }
        }
        model.addAttribute("claims", allClaims);
        model.addAttribute("statPending", (int) allClaims.stream().filter(c -> "PENDING".equalsIgnoreCase(c.getClaimStatus())).count());
        model.addAttribute("statApproved", (int) allClaims.stream().filter(c -> "APPROVED".equalsIgnoreCase(c.getClaimStatus())).count());
        model.addAttribute("statRejected", (int) allClaims.stream().filter(c -> "REJECTED".equalsIgnoreCase(c.getClaimStatus())).count());
        return "user/claims";
    }

    @GetMapping({"/user/payments", "/user/payments.html"})
    public String payments(Model model, jakarta.servlet.http.HttpServletRequest request) {
        User user = (User) request.getSession().getAttribute("loggedInUser");
        java.util.List<com.genc.healthins.model.Payment> payments = new java.util.ArrayList<>();
        java.util.List<Policy> policies = user != null ? policyService.findByUser(user) : java.util.Collections.emptyList();
        if (user != null) {
            for (Policy p : policies) {
                payments.addAll(paymentService.findByPolicy(p));
            }
        }
        model.addAttribute("payments", payments);
        // provide user's policies to populate the "Select Policy" dropdown
        model.addAttribute("policies", policies);
        return "user/payments";
    }

    @PostMapping("/user/payments/pay")
    public String makePayment(@org.springframework.web.bind.annotation.RequestParam Long policyId,
                              @org.springframework.web.bind.annotation.RequestParam java.math.BigDecimal amount,
                              jakarta.servlet.http.HttpServletRequest request,
                              org.springframework.web.servlet.mvc.support.RedirectAttributes ra) {
        var opt = policyService.findById(policyId);
        if (opt.isEmpty()) {
            ra.addFlashAttribute("error", "Policy not found");
            return "redirect:/user/payments";
        }
        Policy policy = opt.get();
        // ensure user owns this policy
        User user = (User) request.getSession().getAttribute("loggedInUser");
        if (user == null || policy.getUser() == null || !policy.getUser().getId().equals(user.getId())) {
            ra.addFlashAttribute("error", "You are not authorized to pay for this policy");
            return "redirect:/user/payments";
        }

        try {
            com.genc.healthins.model.Payment p = new com.genc.healthins.model.Payment();
            p.setPaymentAmount(amount);
            p.setPaymentDate(java.time.LocalDateTime.now());
            p.setPaymentStatus("COMPLETED");
            p.setPolicy(policy);
            paymentService.save(p);
            ra.addFlashAttribute("success", "Payment recorded successfully");
        } catch (Exception ex) {
            ra.addFlashAttribute("error", "Could not process payment: " + ex.getMessage());
        }
        return "redirect:/user/payment-history";
    }

    @GetMapping({"/user/payment-history", "/user/payment-history.html"})
    public String paymentHistory(Model model, jakarta.servlet.http.HttpServletRequest request) {
        return payments(model, request);
    }

    @GetMapping({"/user/profile", "/user/profile.html"})
    public String profile(Model model, jakarta.servlet.http.HttpServletRequest request) {
        User user = (User) request.getSession().getAttribute("loggedInUser");
        model.addAttribute("user", user);
        return "user/profile";
    }

@GetMapping({"/user/submit-claim", "/user/submit-claim.html"})
public String submitClaimForm(Model model, jakarta.servlet.http.HttpServletRequest request) {
    User user = (User) request.getSession().getAttribute("loggedInUser");
    model.addAttribute("policies", user != null ? policyService.findByUser(user) : java.util.Collections.emptyList());
    return "user/submit-claim";
}

// Method 2: Process the data and SAVE it to DB
@PostMapping("/user/claims/submit")
public String submitClaim(@org.springframework.web.bind.annotation.RequestParam Long policyId,
                          @org.springframework.web.bind.annotation.RequestParam java.math.BigDecimal amount,
                          org.springframework.web.servlet.mvc.support.RedirectAttributes ra) {
    var opt = policyService.findById(policyId);
    if (opt.isPresent()) {
        com.genc.healthins.model.Claim c = new com.genc.healthins.model.Claim();
        c.setPolicy(opt.get());
        c.setClaimAmount(amount); // Setting the requested amount from the user
        c.setClaimDate(java.time.LocalDateTime.now());
        c.setClaimStatus("PENDING"); // New claims start as PENDING for Admin review
        
        claimService.save(c); // This line sends it to MySQL
        ra.addFlashAttribute("success", "Claim submitted for approval!");
    }
    return "redirect:/user/claims";
}
    @GetMapping({"/user/create-ticket", "/user/create-ticket.html"})
    public String createTicketForm(Model model, jakarta.servlet.http.HttpServletRequest request) {
        User user = (User) request.getSession().getAttribute("loggedInUser");
        model.addAttribute("user", user);
        return "user/create-ticket";
    }
@GetMapping({"/user/marketplace", "/user/marketplace.html"})
public String marketplace(Model model) {
    // Only show policies that haven't been bought yet (user_id is null)
    List<Policy> availablePlans = policyService.findAll().stream()
            .filter(p -> p.getUser() == null)
            .toList();
    model.addAttribute("plans", availablePlans);
    return "user/marketplace";
}
@PostMapping("/user/policies/enroll")
public String enrollInPolicy(@RequestParam("planId") Long planId, 
                             jakarta.servlet.http.HttpServletRequest request, 
                             RedirectAttributes ra) {
    User user = (User) request.getSession().getAttribute("loggedInUser");
    if (user == null) return "redirect:/login";

    var opt = policyService.findById(planId);
    if (opt.isPresent()) {
        com.genc.healthins.model.Policy plan = opt.get();
        
        // Associate the user with this policy
        plan.setUser(user); 
        plan.setPolicyStatus("Active");
        
        policyService.save(plan); // Persist change to MySQL
        ra.addFlashAttribute("success", "Successfully enrolled in " + plan.getCoverageType() + "!");
    }
    return "redirect:/user/policies";
}
@PostMapping("/user/policies/join")
public String joinPolicy(@RequestParam Long id, 
                         jakarta.servlet.http.HttpServletRequest request, 
                         RedirectAttributes ra) {
    User user = (User) request.getSession().getAttribute("loggedInUser");
    var opt = policyService.findById(id);
    
    if (opt.isPresent() && user != null) {
        Policy planTemplate = opt.get();
        
        // Logic: When a user joins, we assign their ID to the policy row
        planTemplate.setUser(user); 
        planTemplate.setPolicyStatus("Active");
        policyService.save(planTemplate); 
        
        ra.addFlashAttribute("success", "Successfully enrolled in " + planTemplate.getCoverageType());
    }
    return "redirect:/user/policies";
}
}

--------Model files-------

-----------------------Claim.java-------------------------

package com.genc.healthins.model;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.LocalDateTime;

@Entity
@Table(name = "claim")
public class Claim {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "claim_id")
    private Long id;

    @Column(name = "claim_amount")
    private BigDecimal claimAmount;

    @Column(name = "claim_date")
    private LocalDateTime claimDate;

    @Column(name = "claim_status")
    private String claimStatus;

    @Column(name = "doctor_id")
    private Long doctorId;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "policy_id")
    private Policy policy;

    // Getters and setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public BigDecimal getClaimAmount() { return claimAmount; }
    public void setClaimAmount(BigDecimal claimAmount) { this.claimAmount = claimAmount; }

    public LocalDateTime getClaimDate() { return claimDate; }
    public void setClaimDate(LocalDateTime claimDate) { this.claimDate = claimDate; }

    public String getClaimStatus() { return claimStatus; }
    public void setClaimStatus(String claimStatus) { this.claimStatus = claimStatus; }

    public Long getDoctorId() { return doctorId; }
    public void setDoctorId(Long doctorId) { this.doctorId = doctorId; }

    public Policy getPolicy() { return policy; }
    public void setPolicy(Policy policy) { this.policy = policy; }
}

-----------------------Payment.java------------------------------



package com.genc.healthins.model;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.LocalDateTime;

@Entity
@Table(name = "payment")
public class Payment {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "payment_id")
    private Long id;

    @Column(name = "payment_amount")
    private BigDecimal paymentAmount;

    @Column(name = "payment_date")
    private LocalDateTime paymentDate;

    @Column(name = "payment_status")
    private String paymentStatus;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "policy_id")
    private Policy policy;

    // Getters & setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public BigDecimal getPaymentAmount() { return paymentAmount; }
    public void setPaymentAmount(BigDecimal paymentAmount) { this.paymentAmount = paymentAmount; }

    public LocalDateTime getPaymentDate() { return paymentDate; }
    public void setPaymentDate(LocalDateTime paymentDate) { this.paymentDate = paymentDate; }

    public String getPaymentStatus() { return paymentStatus; }
    public void setPaymentStatus(String paymentStatus) { this.paymentStatus = paymentStatus; }

    public Policy getPolicy() { return policy; }
    public void setPolicy(Policy policy) { this.policy = policy; }
}



-------------------Policy.java-----------------------------------



package com.genc.healthins.model;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.LocalDateTime;

@Entity
@Table(name = "policy")
public class Policy {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "policy_id")
    private Long id;

    @Column(name = "policy_number", nullable = false, unique = true)
    private String policyNumber;

    @Column(name = "coverage_type")
    private String coverageType;

    @Column(name = "coverage_amount")
    private BigDecimal coverageAmount;

    @Column(name = "premium_amount")
    private BigDecimal premiumAmount;

    @Column(name = "start_date")
    private LocalDateTime startDate;

    @Column(name = "end_date")
    private LocalDateTime endDate;

    @Column(name = "policy_status")
    private String policyStatus;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id")
    private User user;

    @Column(name = "created_at")
    private LocalDateTime createdAt;

    @Column(name = "updated_at")
    private LocalDateTime updatedAt;

    // Getters and setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public String getPolicyNumber() { return policyNumber; }
    public void setPolicyNumber(String policyNumber) { this.policyNumber = policyNumber; }

    public String getCoverageType() { return coverageType; }
    public void setCoverageType(String coverageType) { this.coverageType = coverageType; }

    public BigDecimal getCoverageAmount() { return coverageAmount; }
    public void setCoverageAmount(BigDecimal coverageAmount) { this.coverageAmount = coverageAmount; }

    public BigDecimal getPremiumAmount() { return premiumAmount; }
    public void setPremiumAmount(BigDecimal premiumAmount) { this.premiumAmount = premiumAmount; }

    public LocalDateTime getStartDate() { return startDate; }
    public void setStartDate(LocalDateTime startDate) { this.startDate = startDate; }

    public LocalDateTime getEndDate() { return endDate; }
    public void setEndDate(LocalDateTime endDate) { this.endDate = endDate; }

    public String getPolicyStatus() { return policyStatus; }
    public void setPolicyStatus(String policyStatus) { this.policyStatus = policyStatus; }

    public User getUser() { return user; }
    public void setUser(User user) { this.user = user; }

    public LocalDateTime getCreatedAt() { return createdAt; }
    public void setCreatedAt(LocalDateTime createdAt) { this.createdAt = createdAt; }

    public LocalDateTime getUpdatedAt() { return updatedAt; }
    public void setUpdatedAt(LocalDateTime updatedAt) { this.updatedAt = updatedAt; }
}


--------------PolicyRenewal.java-------------------------------


package com.genc.healthins.model;

import jakarta.persistence.*;
import java.time.LocalDate;

@Entity
@Table(name = "policy_renewal")
public class PolicyRenewal {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "policy_id")
    private Policy policy;

    @Column(name = "renewal_due_date")
    private LocalDate renewalDueDate;

    @Column(name = "renewed_at")
    private LocalDate renewedAt;

    @Column
    private String status;

    @Column(name = "created_at")
    private LocalDate createdAt;

    @Column(name = "updated_at")
    private LocalDate updatedAt;

    // Getters & setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public Policy getPolicy() { return policy; }
    public void setPolicy(Policy policy) { this.policy = policy; }

    public LocalDate getRenewalDueDate() { return renewalDueDate; }
    public void setRenewalDueDate(LocalDate renewalDueDate) { this.renewalDueDate = renewalDueDate; }

    public LocalDate getRenewedAt() { return renewedAt; }
    public void setRenewedAt(LocalDate renewedAt) { this.renewedAt = renewedAt; }

    public String getStatus() { return status; }
    public void setStatus(String status) { this.status = status; }

    public LocalDate getCreatedAt() { return createdAt; }
    public void setCreatedAt(LocalDate createdAt) { this.createdAt = createdAt; }

    public LocalDate getUpdatedAt() { return updatedAt; }
    public void setUpdatedAt(LocalDate updatedAt) { this.updatedAt = updatedAt; }
}



-------------------SupportResponse.java---------------------------


package com.genc.healthins.model;

import jakarta.persistence.*;
import java.time.LocalDateTime;

@Entity
@Table(name = "support_response")
public class SupportResponse {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "support_ticket_id")
    private SupportTicket supportTicket;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "responder_user_id")
    private User responder;

    @Column(columnDefinition = "TEXT")
    private String message;

    @Column
    private String attachments;

    @Column(name = "created_at")
    private LocalDateTime createdAt;

    @Column(name = "updated_at")
    private LocalDateTime updatedAt;

    // Getters and setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public SupportTicket getSupportTicket() { return supportTicket; }
    public void setSupportTicket(SupportTicket supportTicket) { this.supportTicket = supportTicket; }

    public User getResponder() { return responder; }
    public void setResponder(User responder) { this.responder = responder; }

    public String getMessage() { return message; }
    public void setMessage(String message) { this.message = message; }

    public String getAttachments() { return attachments; }
    public void setAttachments(String attachments) { this.attachments = attachments; }

    public LocalDateTime getCreatedAt() { return createdAt; }
    public void setCreatedAt(LocalDateTime createdAt) { this.createdAt = createdAt; }

    public LocalDateTime getUpdatedAt() { return updatedAt; }
    public void setUpdatedAt(LocalDateTime updatedAt) { this.updatedAt = updatedAt; }
}



----------------------SupportTicket.java-------------------------------






package com.genc.healthins.model;

import jakarta.persistence.*;
import java.time.LocalDateTime;

@Entity
@Table(name = "support_ticket")
public class SupportTicket {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ticket_id")
    private Long id;

    @Column(name = "created_date")
    private LocalDateTime createdDate;

    @Column(name = "issue_description", columnDefinition = "TEXT")
    private String issueDescription;

    @Column(name = "resolved_date")
    private LocalDateTime resolvedDate;

    @Column(name = "ticket_status")
    private String ticketStatus;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id")
    private User user;
    // Inside SupportTicket.java
    @Column(name = "category")
    private String category;

    @Column(name = "priority")
    private String priority;

    // Inside SupportTicket.java
    @Column(name = "subject")
    private String subject;

    // Add Getter and Setter
    public String getSubject() { return subject; }
    public void setSubject(String subject) { this.subject = subject; }
    // Getters and Setters
    public String getCategory() { return category; }
    public void setCategory(String category) { this.category = category; }

    public String getPriority() { return priority; }
    public void setPriority(String priority) { this.priority = priority; }
    // Getters and setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public LocalDateTime getCreatedDate() { return createdDate; }
    public void setCreatedDate(LocalDateTime createdDate) { this.createdDate = createdDate; }

    public String getIssueDescription() { return issueDescription; }
    public void setIssueDescription(String issueDescription) { this.issueDescription = issueDescription; }

    public LocalDateTime getResolvedDate() { return resolvedDate; }
    public void setResolvedDate(LocalDateTime resolvedDate) { this.resolvedDate = resolvedDate; }

    public String getTicketStatus() { return ticketStatus; }
    public void setTicketStatus(String ticketStatus) { this.ticketStatus = ticketStatus; }

    public User getUser() { return user; }
    public void setUser(User user) { this.user = user; }
}



---------------------User.java---------------------------------------



package com.genc.healthins.model;

import jakarta.persistence.*;
import java.io.Serializable;

@Entity
@Table(name = "users")
public class User implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "user_id")
    private Long id;

    @Column(nullable = false, unique = true)
    private String email;

    @Column(nullable = false)
    private String password;

    @Column(nullable = false)
    private String role; // ADMIN, AGENT, USER

    @Column(nullable = false)
    private String username;

    private String phone;
    private java.time.LocalDateTime joinDate;

    public User() {}

    public User(String email, String password, String role, String username) {
        this.email = email;
        this.password = password;
        this.role = role;
        this.username = username;
    }

    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }

    public String getPassword() { return password; }
    public void setPassword(String password) { this.password = password; }

    public String getRole() { return role; }
    public void setRole(String role) { this.role = role; }

    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }

     // Getters and Setters
    public String getPhone() { return phone; }
    public void setPhone(String phone) { this.phone = phone; }

    public java.time.LocalDateTime getJoinDate() { return joinDate; }
    public void setJoinDate(java.time.LocalDateTime joinDate) { this.joinDate = joinDate; }
}


---------Repositories-------------


package com.genc.healthins.repository;

import com.genc.healthins.model.Claim;
import com.genc.healthins.model.Policy;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.List;

public interface ClaimRepository extends JpaRepository<Claim, Long> {
    List<Claim> findByPolicy(Policy policy);
}




package com.genc.healthins.repository;

import com.genc.healthins.model.Payment;
import com.genc.healthins.model.Policy;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.List;

public interface PaymentRepository extends JpaRepository<Payment, Long> {
    List<Payment> findByPolicy(Policy policy);
}




package com.genc.healthins.repository;

import com.genc.healthins.model.Policy;
import com.genc.healthins.model.User;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.List;

public interface PolicyRepository extends JpaRepository<Policy, Long> {
    List<Policy> findByUser(User user);
}



package com.genc.healthins.repository;

import com.genc.healthins.model.SupportResponse;
import com.genc.healthins.model.SupportTicket;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.List;

public interface SupportResponseRepository extends JpaRepository<SupportResponse, Long> {
    List<SupportResponse> findBySupportTicket(SupportTicket ticket);
}



package com.genc.healthins.repository;

import com.genc.healthins.model.SupportTicket;
import com.genc.healthins.model.User;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.List;

public interface SupportTicketRepository extends JpaRepository<SupportTicket, Long> {
    List<SupportTicket> findByUser(User user);
    long countByTicketStatus(String ticketStatus);
    
    // Fix for: "The method countByPriority is undefined"
    long countByPriority(String priority);
    
    long countByUserAndTicketStatus(User user, String status);
}



package com.genc.healthins.repository;

import com.genc.healthins.model.User;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.Optional;

public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByEmail(String email);
}



--------------------------Service Files----------------------


-----------------impl---------------------------

--------------------ClaimServiceImpl.java------------------------------




package com.genc.healthins.service.impl;

import com.genc.healthins.model.Claim;
import com.genc.healthins.model.Policy;
import com.genc.healthins.repository.ClaimRepository;
import com.genc.healthins.service.ClaimService;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.Optional;

@Service
public class ClaimServiceImpl implements ClaimService {

    private final ClaimRepository claimRepository;

    public ClaimServiceImpl(ClaimRepository claimRepository) {
        this.claimRepository = claimRepository;
    }

    @Override
    public List<Claim> findByPolicy(Policy policy) { return claimRepository.findByPolicy(policy); }

    @Override
    public Optional<Claim> findById(Long id) { return claimRepository.findById(id); }

    @Override
    public Claim save(Claim claim) { return claimRepository.save(claim); }

    @Override
    public void deleteById(Long id) { claimRepository.deleteById(id); }

    @Override
    public List<Claim> findAll() { return claimRepository.findAll(); } 
}






-----------------PaymentServiceImpl.java--------------------------


package com.genc.healthins.service.impl;

import com.genc.healthins.model.Payment;
import com.genc.healthins.model.Policy;
import com.genc.healthins.repository.PaymentRepository;
import com.genc.healthins.service.PaymentService;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.Optional;

@Service
public class PaymentServiceImpl implements PaymentService {

    private final PaymentRepository paymentRepository;

    public PaymentServiceImpl(PaymentRepository paymentRepository) {
        this.paymentRepository = paymentRepository;
    }

    @Override
    public List<Payment> findByPolicy(Policy policy) { return paymentRepository.findByPolicy(policy); }

    @Override
    public Optional<Payment> findById(Long id) { return paymentRepository.findById(id); }

    @Override
    public Payment save(Payment payment) { return paymentRepository.save(payment); }
}


-----------------------PolicyServiceImpl.java--------------------------


package com.genc.healthins.service.impl;

import com.genc.healthins.model.Policy;
import com.genc.healthins.model.User;
import com.genc.healthins.repository.PolicyRepository;
import com.genc.healthins.service.PolicyService;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.Optional;

@Service
public class PolicyServiceImpl implements PolicyService {

    private final PolicyRepository policyRepository;

    public PolicyServiceImpl(PolicyRepository policyRepository) {
        this.policyRepository = policyRepository;
    }

    @Override
    public List<Policy> findAll() { return policyRepository.findAll(); }

    @Override
    public Optional<Policy> findById(Long id) { return policyRepository.findById(id); }

    @Override
    public List<Policy> findByUser(User user) { return policyRepository.findByUser(user); }

    @Override
    public Policy save(Policy policy) { return policyRepository.save(policy); }

    @Override
    public void deleteById(Long id) { policyRepository.deleteById(id); }
}


--------------------------SupportResponseServiceImpl.java------------------------------


package com.genc.healthins.service.impl;

import com.genc.healthins.model.SupportResponse;
import com.genc.healthins.model.SupportTicket;
import com.genc.healthins.repository.SupportResponseRepository;
import com.genc.healthins.service.SupportResponseService;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class SupportResponseServiceImpl implements SupportResponseService {

    private final SupportResponseRepository repo;

    public SupportResponseServiceImpl(SupportResponseRepository repo) {
        this.repo = repo;
    }

    @Override
    public SupportResponse save(SupportResponse response) { return repo.save(response); }

    @Override
    public List<SupportResponse> findByTicket(SupportTicket ticket) { return repo.findBySupportTicket(ticket); }
}




--------------------SupportServiceImpl.java----------------------------


package com.genc.healthins.service.impl;

import com.genc.healthins.model.SupportTicket;
import com.genc.healthins.model.User;
import com.genc.healthins.repository.SupportTicketRepository;
import com.genc.healthins.service.SupportService;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import java.util.List;
import java.util.Optional;


@Service
@Transactional
public class SupportServiceImpl implements SupportService {

    private final SupportTicketRepository repository;

    public SupportServiceImpl(SupportTicketRepository repository) {
        this.repository = repository;
    }

    @Override
    public List<SupportTicket> findByUser(User user) {
        return repository.findByUser(user);
    }

    @Override
    public List<SupportTicket> findAll() {
        return repository.findAll();
    }

    @Override
    public SupportTicket save(SupportTicket ticket) {
        return repository.save(ticket);
    }

    @Override
    public Optional<SupportTicket> findById(Long id) {
        return repository.findById(id);
    }

    @Override
    public long countByStatus(String status) {
        // Matches the column 'ticketStatus' in your database
        return repository.countByTicketStatus(status);
    }

    @Override
    public long countByPriority(String priority) {
        return repository.countByPriority(priority);
    }
}








------------------------UserServiceImpl.java------------------------------



package com.genc.healthins.service.impl;

import com.genc.healthins.model.User;
import com.genc.healthins.repository.UserRepository;
import com.genc.healthins.service.UserService;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.stereotype.Service;

import java.util.Optional;

@Service
public class UserServiceImpl implements UserService {

    private final UserRepository userRepository;
    private final BCryptPasswordEncoder passwordEncoder;
    private final com.genc.healthins.repository.PolicyRepository policyRepository;
    private final com.genc.healthins.repository.ClaimRepository claimRepository;
    private final com.genc.healthins.repository.PaymentRepository paymentRepository;
    private final com.genc.healthins.repository.SupportTicketRepository supportTicketRepository;
    private final com.genc.healthins.repository.SupportResponseRepository supportResponseRepository;

    public UserServiceImpl(UserRepository userRepository,
                           BCryptPasswordEncoder passwordEncoder,
                           com.genc.healthins.repository.PolicyRepository policyRepository,
                           com.genc.healthins.repository.ClaimRepository claimRepository,
                           com.genc.healthins.repository.PaymentRepository paymentRepository,
                           com.genc.healthins.repository.SupportTicketRepository supportTicketRepository,
                           com.genc.healthins.repository.SupportResponseRepository supportResponseRepository) {
        this.userRepository = userRepository;
        this.passwordEncoder = passwordEncoder;
        this.policyRepository = policyRepository;
        this.claimRepository = claimRepository;
        this.paymentRepository = paymentRepository;
        this.supportTicketRepository = supportTicketRepository;
        this.supportResponseRepository = supportResponseRepository;
    }

    @Override
    public Optional<User> findByEmail(String email) {
        return userRepository.findByEmail(email);
    }

    @Override
    public User save(User user) {
        // ensure password is encoded
        if (user.getPassword() != null && !user.getPassword().startsWith("$2a$") && !user.getPassword().startsWith("$2b$") && !user.getPassword().startsWith("$2y$")) {
            user.setPassword(passwordEncoder.encode(user.getPassword()));
        }
        return userRepository.save(user);
    }

    @Override
    public Optional<User> findById(Long id) {
        return userRepository.findById(id);
    }

    @Override
    public java.util.List<User> findAll() {
        return userRepository.findAll();
    }

    @Override
    public void deleteById(Long id) {
        var opt = userRepository.findById(id);
        if (opt.isEmpty()) return;
        User user = opt.get();

        // delete dependent policies (and their claims/payments)
        var policies = policyRepository.findByUser(user);
        for (var p : policies) {
            var claims = claimRepository.findByPolicy(p);
            claimRepository.deleteAll(claims);
            var payments = paymentRepository.findByPolicy(p);
            paymentRepository.deleteAll(payments);
            policyRepository.delete(p);
        }

        // delete support tickets and responses
        var tickets = supportTicketRepository.findByUser(user);
        for (var t : tickets) {
            var responses = supportResponseRepository.findBySupportTicket(t);
            supportResponseRepository.deleteAll(responses);
            supportTicketRepository.delete(t);
        }

        userRepository.delete(user);
    }
}



-----------------------------Service Files-------------------------



package com.genc.healthins.service;

import com.genc.healthins.model.Claim;
import com.genc.healthins.model.Policy;

import java.util.List;
import java.util.Optional;

public interface ClaimService {
    List<Claim> findByPolicy(Policy policy);
    Optional<Claim> findById(Long id);
    Claim save(Claim claim);
    void deleteById(Long id);
    List<Claim> findAll(); 
}






package com.genc.healthins.service;

import com.genc.healthins.model.Payment;
import com.genc.healthins.model.Policy;

import java.util.List;
import java.util.Optional;

public interface PaymentService {
    List<Payment> findByPolicy(Policy policy);
    Optional<Payment> findById(Long id);
    Payment save(Payment payment);
}





package com.genc.healthins.service;

import com.genc.healthins.model.Policy;
import com.genc.healthins.model.User;

import java.util.List;
import java.util.Optional;

public interface PolicyService {
    List<Policy> findAll();
    Optional<Policy> findById(Long id);
    List<Policy> findByUser(User user);
    Policy save(Policy policy);
    void deleteById(Long id);
}





package com.genc.healthins.service;

import com.genc.healthins.model.SupportResponse;
import com.genc.healthins.model.SupportTicket;
import java.util.List;

public interface SupportResponseService {
    SupportResponse save(SupportResponse response);
    List<SupportResponse> findByTicket(SupportTicket ticket);
}





package com.genc.healthins.service;

import com.genc.healthins.model.SupportTicket;
import com.genc.healthins.model.User;
import java.util.List;
import java.util.Optional;

public interface SupportService {
    List<SupportTicket> findByUser(User user);
    List<SupportTicket> findAll();
    SupportTicket save(SupportTicket ticket);
    long countByStatus(String status);
    long countByPriority(String priority);
    Optional<SupportTicket> findById(Long id);

}



package com.genc.healthins.service;

import com.genc.healthins.model.User;
import java.util.Optional;

import java.util.List;

public interface UserService {
    Optional<User> findByEmail(String email);
    User save(User user);
    Optional<User> findById(Long id);
    List<User> findAll();
    void deleteById(Long id);
}




-----------------------MAIN File-------------------------


package com.genc.healthins;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class HealthInsuranceManagementApplication {

	public static void main(String[] args) {
		SpringApplication.run(HealthInsuranceManagementApplication.class, args);
	}

}



--------------static\assets------------------

-----------------app.js-------------------------------

function login() {
  alert("Login clicked (connect backend later)");
}

function registerUser() {
  alert("Register clicked (connect backend later)");
}
function openPolicy(id) {
  window.location.href = "/user/policy-details?id=" + id;
}
function submitClaim() {
  alert("Claim submitted successfully (backend later)");
}

function payNow() {
  alert("Redirecting to payment gateway (mock)");
}
function createTicket() {
  alert("Support ticket created (backend later)");
}

function saveProfile() {
  alert("Profile updated successfully");
}
function approveAction(type) {
  alert(type + " approved");
}

function rejectAction(type) {
  alert(type + " rejected");
}

function exportCSV() {
  alert("Exporting CSV (mock)");
}

function saveSettings() {
  alert("Settings saved");
}




----------------------------------style.css-----------------------------


/* RESET */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

body {
  background: #f5f7fb;
  color: #333;
}

/* HEADER */
.header {
  background: #2563eb;
  color: white;
  padding: 16px 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.header a {
  color: white;
  margin-left: 20px;
  text-decoration: none;
  font-weight: 500;
}

/* BUTTONS */
.btn {
  padding: 10px 18px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-weight: 600;
}

.btn-primary {
  background: #2563eb;
  color: white;
}

.btn-outline {
  background: transparent;
  border: 2px solid #2563eb;
  color: #2563eb;
}

/* CONTAINER */
.container {
  max-width: 1100px;
  margin: auto;
  padding: 40px;
}

/* HERO */
.hero {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 40px;
  align-items: center;
}

.hero h1 {
  font-size: 40px;
  margin-bottom: 16px;
}

.hero p {
  font-size: 18px;
  margin-bottom: 24px;
  color: #555;
}

/* CARDS */
.card-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-top: 40px;
}

.card {
  background: white;
  padding: 24px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.card h3 {
  margin-bottom: 10px;
}

/* AUTH */
.auth-box {
  max-width: 420px;
  margin: 80px auto;
  background: white;
  padding: 32px;
  border-radius: 10px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.1);
}

.auth-box h2 {
  text-align: center;
  margin-bottom: 24px;
}

.auth-box input {
  width: 100%;
  padding: 12px;
  margin-bottom: 16px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.auth-box button {
  width: 100%;
}
/* LAYOUT */
.container-flex {
  display: flex;
  min-height: 100vh;
}

.sidebar {
  width: 220px;
  background: #1e3a8a;
  padding: 20px;
}

.sidebar a {
  display: block;
  color: white;
  padding: 10px;
  text-decoration: none;
  border-radius: 6px;
  margin-bottom: 8px;
}

.sidebar a:hover {
  background: #2563eb;
}

.content {
  flex: 1;
  padding: 30px;
}

/* KPI */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-top: 20px;
}

.kpi {
  background: white;
  padding: 24px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
  font-size: 18px;
  font-weight: bold;
}

/* TABLE */
.table-box {
  background: white;
  margin-top: 30px;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 12px;
  border-bottom: 1px solid #e5e7eb;
  text-align: left;
}

/* POLICY CARD */
.policy-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-top: 20px;
}

.policy-card {
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

----------------------------TEMPLATES-------------------

-----------------------admin-----------------------------------

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Analytics  Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">


  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sidebar: "#0f172a",
            bg: "#f8fafc",
            card: "#ffffff",
            border: "#e5e7eb",
            muted: "#64748b",
            primary: "#2563eb",
          }
        }
      }
    }
  </script>

  <style>
    /* ---------- GLOBAL ---------- */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
    }

    .gradient-primary {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
    }

    /* ---------- SIDEBAR ---------- */
    .nav-btn {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 12px;
      transition: background-color 0.2s ease;
    }
    .nav-btn:hover {
      background: rgba(255,255,255,0.1);
    }

    /* ---------- KPI ---------- */
    .kpi-card {
      background: white;
      border: 1px solid #e5e7eb;
      padding: 20px;
      border-radius: 16px;
      position: relative;
      transition: box-shadow 0.25s ease, transform 0.25s ease;
      cursor: pointer;
    }
    .kpi-card:hover {
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      transform: translateY(-2px);
    }

    .icon-bubble {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: #e0f2fe;
      color: #0284c7;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ---------- CHART CARDS ---------- */
    .chart-card {
      transition: box-shadow 0.25s ease;
    }
    .chart-card:hover {
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }

    /* ---------- QUICK STATS ---------- */
    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-radius: 10px;
      transition: background-color 0.2s ease;
      cursor: pointer;
    }
    .stat-row:hover {
      background: #f1f5f9;
    }
    .stat-index {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      background: #e0f2fe;
      color: #0284c7;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 600;
    }

    /* ---------- ACTIVITY ---------- */
    .activity-row {
      padding: 10px;
      border-radius: 10px;
      transition: background-color 0.2s ease;
      cursor: pointer;
    }
    .activity-row:hover {
      background: #f1f5f9;
    }

    /* ---------- PERFORMANCE ---------- */
    .bar-bg {
      height: 10px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
    }
    .bar-fill {
      height: 100%;
      border-radius: 999px;
      transition: width 0.6s ease;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
    }
  </style>
</head>

<body class="bg-bg text-slate-900">

<!-- ================= SIDEBAR ================= -->
<aside class="fixed inset-y-0 left-0 w-64 bg-sidebar text-white flex flex-col">
  <div class="p-6 flex items-center gap-3">
    <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h1 class="font-bold">HIMS</h1>
      <p class="text-xs text-white/60">Admin Portal</p>
    </div>
  </div>

  <nav class="px-4 space-y-1 flex-1">
    <button onclick="go('/admin/dashboard')" class="nav-btn"><i data-lucide="layout-dashboard"></i> Dashboard</button>
    <button onclick="go('/admin/users')" class="nav-btn"><i data-lucide="users"></i> Users</button>
    <button onclick="go('/admin/policies')" class="nav-btn"><i data-lucide="file-text"></i> Policies</button>
    <button onclick="go('/admin/claims')" class="nav-btn"><i data-lucide="clipboard-list"></i> Claims</button>
    <button onclick="go('/admin/support')" class="nav-btn"><i data-lucide="headphones"></i> Support</button>
    <button class="nav-btn bg-white/10 cursor-default"><i data-lucide="bar-chart-3"></i> Analytics</button>
    <button onclick="go('/admin/settings')" class="nav-btn"><i data-lucide="settings"></i> Settings</button>
  </nav>

  <!-- <button class="m-4 flex items-center gap-2 text-red-400">
    <i data-lucide="log-out"></i> Logout
  </button> -->
  <div class="p-4 border-t">
    <button onclick="logout()"
      class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<!-- ================= MAIN ================= -->
<main class="ml-64 p-8">

  <!-- HEADER -->
  <div class="flex justify-between items-center mb-8">
    <div>
      <h1 class="text-3xl font-bold">Analytics</h1>
      <p class="text-muted">Insights and performance metrics</p>
    </div>
    <div class="flex gap-2">
      <button class="px-4 py-2 border rounded-xl hover:bg-slate-50 flex items-center gap-2">
        <i data-lucide="refresh-cw"></i> Refresh
      </button>
      <button class="px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 flex items-center gap-2">
        <i data-lucide="download"></i> Export
      </button>
    </div>
  </div>

  <!-- KPI CARDS -->
  <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
    <div class="kpi-card">
      <div class="icon-bubble"><i data-lucide="users"></i></div>
      <p class="text-sm text-muted">Total Users</p>
      <h2 class="text-3xl font-bold mt-1">0</h2>
      <span class="text-green-600 text-sm">+12%</span>
    </div>

    <div class="kpi-card">
      <div class="icon-bubble"><i data-lucide="file-text"></i></div>
      <p class="text-sm text-muted">Active Policies</p>
      <h2 class="text-3xl font-bold mt-1">0</h2>
      <span class="text-green-600 text-sm">+8%</span>
    </div>

    <div class="kpi-card">
      <div class="icon-bubble"><i data-lucide="clipboard-list"></i></div>
      <p class="text-sm text-muted">Claims Processed</p>
      <h2 class="text-3xl font-bold mt-1">0</h2>
      <span class="text-green-600 text-sm">+15%</span>
    </div>

    <div class="kpi-card">
      <div class="icon-bubble"><i data-lucide="dollar-sign"></i></div>
      <p class="text-sm text-muted">Revenue</p>
      <h2 class="text-3xl font-bold mt-1">$0</h2>
      <span class="text-green-600 text-sm">+22%</span>
    </div>
  </div>

  <!-- CHARTS -->
  <div class="grid lg:grid-cols-2 gap-6 mb-8">
    <div class="bg-card border rounded-2xl p-6 chart-card">
      <h3 class="font-semibold mb-4">Revenue Overview</h3>
      <canvas id="revenueChart" height="140"></canvas>
    </div>

    <div class="bg-card border rounded-2xl p-6 chart-card">
      <h3 class="font-semibold mb-4">Claims by Status</h3>
      <canvas id="claimsChart" height="140"></canvas>
      <div class="flex justify-center gap-6 mt-4 text-sm">
        <span class="flex items-center gap-2"><span class="dot bg-amber-500"></span>Pending</span>
        <span class="flex items-center gap-2"><span class="dot bg-emerald-500"></span>Approved</span>
        <span class="flex items-center gap-2"><span class="dot bg-red-500"></span>Rejected</span>
      </div>
    </div>
  </div>

  <!-- BOTTOM GRID -->
  <div class="grid lg:grid-cols-3 gap-6">

    <!-- QUICK STATS -->
    <div class="bg-card border rounded-2xl p-6">
      <h3 class="font-semibold mb-4">Quick Stats</h3>
      <div class="space-y-2 text-sm">
        <div class="stat-row">
          <div class="flex items-center gap-3">
            <span class="stat-index">1</span> Claim Approval Rate
          </div>
          <span class="text-green-600 flex items-center gap-1">0% <i data-lucide="trending-up"></i></span>
        </div>
        <div class="stat-row">
          <div class="flex items-center gap-3">
            <span class="stat-index">2</span> Pending Claims
          </div>
          <span class="text-green-600">0</span>
        </div>
        <div class="stat-row">
          <div class="flex items-center gap-3">
            <span class="stat-index">3</span> Active Policies
          </div>
          <span class="text-green-600">0</span>
        </div>
        <div class="stat-row">
          <div class="flex items-center gap-3">
            <span class="stat-index">4</span> Total Users
          </div>
          <span class="text-green-600">0</span>
        </div>
      </div>
    </div>

    <!-- RECENT ACTIVITY -->
    <div class="bg-card border rounded-2xl p-6">
      <h3 class="font-semibold mb-4">Recent Activity</h3>
      <div class="space-y-2 text-sm">
        <div class="activity-row flex justify-between">
          <span>New user registered</span><span class="text-muted">2 min ago</span>
        </div>
        <div class="activity-row flex justify-between">
          <span>Claim approved</span><span class="text-muted">15 min ago</span>
        </div>
        <div class="activity-row flex justify-between">
          <span>Payment received</span><span class="text-muted">1 hour ago</span>
        </div>
        <div class="activity-row flex justify-between">
          <span>Policy activated</span><span class="text-muted">2 hours ago</span>
        </div>
      </div>
    </div>

    <!-- PERFORMANCE -->
    <div class="bg-card border rounded-2xl p-6">
      <h3 class="font-semibold mb-4">Performance</h3>
      <div class="space-y-4 text-sm">
        <div>
          <div class="flex justify-between mb-1">
            <span>Customer Satisfaction</span><span>4.8/5</span>
          </div>
          <div class="bar-bg"><div class="bar-fill bg-amber-500 w-[96%]"></div></div>
        </div>
        <div>
          <div class="flex justify-between mb-1">
            <span>Response Time</span><span>2.5h</span>
          </div>
          <div class="bar-bg"><div class="bar-fill bg-blue-500 w-[75%]"></div></div>
        </div>
        <div>
          <div class="flex justify-between mb-1">
            <span>Policy Renewals</span><span>87%</span>
          </div>
          <div class="bar-bg"><div class="bar-fill bg-purple-500 w-[87%]"></div></div>
        </div>
      </div>
    </div>

  </div>
</main>

<script>
  lucide.createIcons();
  function go(url){ window.location.href = url; }
function logout(){ location.href='/logout' }
  new Chart(document.getElementById("revenueChart"), {
    type: "bar",
    data: {
      labels: ["Jan","Feb","Mar","Apr","May","Jun"],
      datasets: [{
        data: [12500,15200,18300,14800,21000,19500],
        backgroundColor: "#0ea5e9",
        borderRadius: 6
      }]
    },
    options: { plugins:{ legend:{ display:false } } }
  });

  new Chart(document.getElementById("claimsChart"), {
    type: "doughnut",
    data: {
      labels: ["Pending","Approved","Rejected"],
      datasets: [{
        data: [0,0,0],
        backgroundColor: ["#f59e0b","#10b981","#ef4444"]
      }]
    }
  });
</script>

</body>
</html>



-------------------------------


<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Claims  Admin Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sidebar: "#0f172a",
            bg: "#f8fafc",
            card: "#ffffff",
            border: "#e5e7eb",
            muted: "#64748b",
            success: "#16a34a",
            warning: "#f59e0b",
            destructive: "#dc2626"
          }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .gradient-primary { background: linear-gradient(135deg, #2563eb, #1d4ed8); }
    .bg-card { overflow: visible !important; }
  </style>
</head>

<body class="bg-bg flex">

<aside class="fixed inset-y-0 left-0 w-64 bg-sidebar text-white flex flex-col z-40">
  <div class="p-6 flex items-center gap-3">
    <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h1 class="font-bold leading-tight">HIMS</h1>
      <p class="text-xs text-white/60">Admin Portal</p>
    </div>
  </div>

  <nav class="px-4 space-y-1 flex-1">
    <button onclick="go('/admin/dashboard')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="layout-dashboard"></i> Dashboard
    </button>
    <button onclick="go('/admin/users')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="users"></i> Users
    </button>
    <button onclick="go('/admin/policies')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="file-text"></i> Policies
    </button>
    <button class="w-full flex items-center gap-3 p-3 rounded-xl bg-white/10 transition">
      <i data-lucide="clipboard-list"></i> Claims
    </button>
    <button onclick="go('/admin/support')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="headphones"></i> Support
    </button>
    <button onclick="go('/admin/analytics')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="bar-chart-3"></i> Analytics
    </button>
    <button onclick="go('/admin/settings')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="settings"></i> Settings
    </button>
  </nav>

  <div class="p-4 border-t border-white/10">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-400 hover:bg-red-500/10 font-semibold transition">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<main class="ml-64 flex-1 p-8">
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8">
    <div>
      <h1 class="text-3xl font-bold text-slate-900">Claims Management</h1>
      <p class="text-muted">Review and adjust insurance payouts</p>
    </div>
    <button onclick="location.reload()" class="px-4 py-2 border border-slate-200 rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all font-medium text-slate-600">
      <i data-lucide="refresh-cw" class="w-4 h-4"></i> Refresh
    </button>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div onclick="filterByStatus('PENDING')" class="bg-card rounded-2xl border border-slate-200 p-6 cursor-pointer hover:shadow-md transition-all">
      <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Pending Review</p>
      <p class="text-3xl font-bold text-amber-500" th:text="${pendingCount}">0</p>
    </div>
    <div onclick="filterByStatus('APPROVED')" class="bg-card rounded-2xl border border-slate-200 p-6 cursor-pointer hover:shadow-md transition-all">
      <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Approved Claims</p>
      <p class="text-3xl font-bold text-emerald-500" th:text="${approvedCount}">0</p>
    </div>
    <div onclick="filterByStatus('REJECTED')" class="bg-card rounded-2xl border border-slate-200 p-6 cursor-pointer hover:shadow-md transition-all">
      <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Rejected Claims</p>
      <p class="text-3xl font-bold text-red-500" th:text="${rejectedCount}">0</p>
    </div>
  </div>

  <div class="relative mb-6">
    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"></i>
    <input type="text" id="claimSearch" oninput="filterClaims()" placeholder="Search claims by ID, Holder, or Policy Number..." 
           class="w-full pl-12 pr-4 py-3.5 rounded-2xl border border-slate-200 bg-card outline-none focus:ring-4 focus:ring-blue-500/10 transition-all" />
  </div>

  <div class="bg-card rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
    <table class="w-full border-collapse">
      <thead>
        <tr class="text-left border-b border-slate-100 bg-slate-50/50">
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Claim Info</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Holder</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Amount</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Status</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Date</th>
          <th class="px-6 py-4 text-right text-[11px] font-bold text-slate-400 uppercase tracking-widest">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-50" id="claimsTableBody">
        <tr th:each="c : ${claims}" class="hover:bg-slate-50/50 transition-colors claim-row" 
            th:data-status="${c.claimStatus}">
          <td class="px-6 py-5">
            <p class="font-mono text-xs font-bold text-blue-600" th:text="${'CLM-' + c.id}">ID</p>
            <p class="text-[10px] text-slate-400" th:text="${c.policy.policyNumber}">POLICY</p>
          </td>
          <td class="px-6 py-5">
            <p class="font-semibold text-slate-900" th:text="${c.policy.user != null ? c.policy.user.username : 'Unknown'}">Holder</p>
          </td>
          <td class="px-6 py-5">
            <p class="font-bold text-slate-700" th:text="${'$' + c.claimAmount}">$0.00</p>
          </td>
          <td class="px-6 py-5">
            <span th:classappend="${c.claimStatus == 'PENDING' ? 'bg-amber-100 text-amber-600' : c.claimStatus == 'APPROVED' ? 'bg-emerald-100 text-emerald-600' : 'bg-red-100 text-red-600'}" 
                  class="px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest" th:text="${c.claimStatus}">STATUS</span>
          </td>
          <td class="px-6 py-5 text-sm text-slate-500" th:text="${#temporals.format(c.claimDate, 'MMM dd, yyyy')}">Date</td>
          <td class="px-6 py-5 text-right">
            <div class="flex justify-end gap-2" th:if="${c.claimStatus == 'PENDING'}">
              <button th:onclick="openProcessModal([[${c.id}]], [[${c.claimAmount}]])" 
                      class="p-2 text-emerald-500 hover:bg-emerald-50 rounded-lg transition-colors" title="Adjust and Approve">
                <i data-lucide="check-circle" class="w-5 h-5"></i>
              </button>
              <form th:action="@{/admin/claims/process}" method="post" onsubmit="return confirm('Reject this claim?')">
                <input type="hidden" name="claimId" th:value="${c.id}" />
                <input type="hidden" name="status" value="REJECTED" />
                <button type="submit" class="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors" title="Reject">
                  <i data-lucide="x-circle" class="w-5 h-5"></i>
                </button>
              </form>
            </div>
            <span th:if="${c.claimStatus != 'PENDING'}" class="text-xs text-slate-400 italic">Processed</span>
          </td>
        </tr>
      </tbody>
    </table>
    <div th:if="${claims == null or claims.size() == 0}" class="py-20 text-center">
      <i data-lucide="clipboard-list" class="w-12 h-12 text-slate-200 mx-auto mb-4"></i>
      <p class="text-slate-500 font-medium">No claims available for review.</p>
    </div>
  </div>
</main>

<div id="processModal" class="fixed inset-0 hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm z-50 p-4">
  <div class="bg-white max-w-sm w-full rounded-[40px] p-10 relative shadow-2xl">
    <button type="button" onclick="closeModals()" class="absolute top-8 right-8 text-slate-300 hover:text-slate-600 transition-colors z-[60]">
      <i data-lucide="x" class="w-6 h-6"></i>
    </button>
    <h2 class="text-2xl font-bold text-slate-900 mb-2">Process Claim</h2>
    <p class="text-sm text-slate-500 mb-8">Review requested amount. You may approve a partial amount if necessary.</p>
    
    <form th:action="@{/admin/claims/process}" method="post" class="space-y-6">
      <input type="hidden" id="modal-claim-id" name="claimId" />
      <input type="hidden" name="status" value="APPROVED" />
      
      <div>
        <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2 ml-1">Adjust Payout Amount ($)</label>
        <input type="number" step="0.01" id="modal-amount" name="approvedAmount" required
               class="w-full p-4 border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-emerald-500/10 transition-all font-bold text-emerald-700" />
      </div>

      <button type="submit" class="w-full bg-emerald-600 text-white py-5 rounded-[24px] font-bold hover:bg-emerald-700 transition-all shadow-xl shadow-emerald-500/20">
        Approve Payout
      </button>
    </form>
  </div>
</div>

<script>
  lucide.createIcons();

  function go(url) { window.location.href = url; }
  function logout() { location.href = '/logout'; }

  function openProcessModal(id, amount) {
    document.getElementById('modal-claim-id').value = id;
    document.getElementById('modal-amount').value = amount;
    document.getElementById('processModal').classList.replace('hidden', 'flex');
    document.body.style.overflow = 'hidden';
  }

  function closeModals() {
    document.getElementById('processModal').classList.replace('flex', 'hidden');
    document.body.style.overflow = 'auto';
  }

  function filterClaims() {
    const query = document.getElementById('claimSearch').value.toLowerCase();
    const rows = document.querySelectorAll('.claim-row');
    rows.forEach(row => {
      const text = row.innerText.toLowerCase();
      row.style.display = text.includes(query) ? '' : 'none';
    });
  }

  function filterByStatus(status) {
    const rows = document.querySelectorAll('.claim-row');
    rows.forEach(row => {
      if (status === 'ALL') row.style.display = '';
      else row.style.display = row.getAttribute('data-status') === status ? '' : 'none';
    });
  }

  window.onclick = function(event) {
    if (event.target.id === "processModal") closeModals();
  }
</script>

</body>
</html>


----------------------------------------


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">


  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sidebar: "#0f172a",
            bg: "#f8fafc",
            card: "#ffffff",
            border: "#e5e7eb",
            muted: "#64748b",
            success: "#16a34a",
            warning: "#f59e0b",
            destructive: "#dc2626"
          }
        }
      }
    }
  </script>

  <style>
    .gradient-primary {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
    }
    .kpi-hover:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }
  </style>
</head>

<body class="bg-bg">

<!-- SIDEBAR -->
<aside class="fixed inset-y-0 left-0 w-64 bg-sidebar text-white flex flex-col">
  <div class="p-6 flex items-center gap-3">
    <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h1 class="font-bold">HIMS</h1>
      <p class="text-xs text-white/60">Admin Portal</p>
    </div>
  </div>

  <nav class="px-4 space-y-1 flex-1">
    <button class="w-full flex items-center gap-3 p-3 rounded-xl bg-white/10">
      <i data-lucide="layout-dashboard"></i> Dashboard
    </button>
    <button onclick="go('/admin/users')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10">
      <i data-lucide="users"></i> Users
    </button>
    <button onclick="go('/admin/policies')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10">
      <i data-lucide="file-text"></i> Policies
    </button>
    <button onclick="go('/admin/claims')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10">
      <i data-lucide="clipboard-list"></i> Claims
    </button>
    <button onclick="go('/admin/support')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10">
      <i data-lucide="headphones"></i> Support
    </button>
    <button class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10">
      <i data-lucide="bar-chart-3"></i> Analytics
    </button>
    <button
      onclick="go('/admin/settings')"
      class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition"
    >
      <i data-lucide="settings"></i>
      <span>Settings</span>
    </button>
  </nav>

  <div class="p-4 border-t">
    <button onclick="logout()"
      class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<!-- MAIN -->
<main class="ml-64 p-8">

  <!-- HEADER -->
  <header class="mb-8">
    <h1 class="text-3xl font-bold">Admin Dashboard</h1>
    <p class="text-muted">Overview of your insurance platform metrics</p>
  </header>

  <!-- KPI CARDS -->
  <section class="grid grid-cols-4 gap-6 mb-8">
    <div onclick="go('/admin/users')" class="kpi-hover cursor-pointer transition bg-card p-6 rounded-2xl border flex justify-between">
      <div>
        <p class="text-muted">Total Users</p>
        <h2 class="text-3xl font-bold" th:text="${usersCount}">0</h2>
        <p class="text-success text-sm">+12% this month</p>
      </div>
      <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
        <i data-lucide="users" class="text-blue-600"></i>
      </div>
    </div>

    <div onclick="go('/admin/policies')" class="kpi-hover cursor-pointer transition bg-card p-6 rounded-2xl border flex justify-between">
      <div>
        <p class="text-muted">Active Policies</p>
        <h2 class="text-3xl font-bold" th:text="${activePolicies}">0</h2>
        <p class="text-success text-sm">+8% this month</p>
      </div>
      <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
        <i data-lucide="file-text" class="text-blue-600"></i>
      </div>
    </div>

    <div onclick="go('/admin/claims')" class="kpi-hover cursor-pointer transition bg-card p-6 rounded-2xl border flex justify-between">
      <div>
        <p class="text-muted">Open Claims</p>
        <h2 class="text-3xl font-bold" th:text="${openClaims}">0</h2>
        <p class="text-muted text-sm">Pending review</p>
      </div>
      <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
        <i data-lucide="clipboard-list" class="text-blue-600"></i>
      </div>
    </div>

    <div onclick="go('/admin/support')" class="kpi-hover cursor-pointer transition bg-card p-6 rounded-2xl border flex justify-between">
      <div>
        <p class="text-muted">Support Tickets</p>
        <h2 class="text-3xl font-bold" th:text="${ticketsCount}">0</h2>
        <p class="text-destructive text-sm">Unassigned</p>
      </div>
      <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
        <i data-lucide="headphones" class="text-blue-600"></i>
      </div>
    </div>
  </section>
<section class="grid grid-cols-3 gap-8 mb-8">

    <!-- Revenue Overview -->
    <div class="col-span-2 bg-card p-6 rounded-2xl border">
      <div class="flex justify-between mb-6">
        <div>
          <h2 class="text-xl font-semibold">Revenue Overview</h2>
          <p class="text-muted text-sm">Premium collections this year</p>
        </div>
        <span class="text-success flex items-center gap-1 font-medium">
          <i data-lucide="trending-up"></i> +23.5%
        </span>
      </div>

      <div class="h-64 bg-blue-50 border border-dashed rounded-xl flex items-center justify-center">
        <div class="text-center">
          <div class="w-16 h-16 gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-4">
            <i data-lucide="trending-up" class="text-white w-8 h-8"></i>
          </div>
          <p class="text-muted">Analytics Chart</p>
          <p class="text-sm text-muted">Connect to view real data</p>
        </div>
      </div>
    </div>

    <!-- Recent Claims -->
    <div class="bg-card p-6 rounded-2xl border">
      <div class="flex justify-between mb-6">
        <h2 class="text-xl font-semibold">Recent Claims</h2>
        <button onclick="go('/admin/claims')" class="text-sm font-medium">View All</button>
      </div>

      <div class="space-y-4" th:if="${recentClaims != null}">
        <div th:each="c : ${recentClaims}" class="p-4 border rounded-xl hover:bg-slate-50">
          <div class="flex justify-between mb-1">
            <span class="font-medium" th:text="${'CLM-' + c.id}">CLM-001</span>
            <span th:classappend="${c.claimStatus == 'APPROVED'} ? ' bg-green-100 text-success' : ' bg-yellow-100 text-warning'" class="px-3 py-1 rounded-full text-sm" th:text="${c.claimStatus}">Pending</span>
          </div>
          <p class="text-muted text-sm" th:text="${c.policy != null && c.policy.user != null ? c.policy.user.username : ''}">John Doe</p>
          <div class="flex justify-between mt-2">
            <span class="text-muted text-sm" th:text="${c.policy != null ? c.policy.coverageType : ''}">Medical</span>
            <span class="font-semibold" th:text="${c.claimAmount != null ? '$' + c.claimAmount : ''}">$1,250</span>
          </div>
        </div>

        <div th:if="${recentClaims.size() == 0}" class="p-4 text-sm text-muted">No recent claims</div>
      </div>
    </div>

  </section>
  <!-- RECENT USERS -->
<section class="bg-card p-6 rounded-2xl border">
  <!-- Header -->
  <div class="flex justify-between items-start mb-6">
    <div>
      <h2 class="text-xl font-semibold">Recent Users</h2>
      <p class="text-muted text-sm">Latest registered users</p>
    </div>
    <button onclick="go('/admin/users')" class="font-medium flex items-center gap-2">
        View All Users <i data-lucide="arrow-right"></i>
      </button>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto">
    <table class="w-full border-collapse">
      <!-- FORCE COLUMN ALIGNMENT -->
      <colgroup>
        <col class="w-[32%]" />
        <col class="w-[28%]" />
        <col class="w-[12%]" />
        <col class="w-[16%]" />
        <col class="w-[12%]" />
      </colgroup>

      <thead>
        <tr class="border-b text-muted text-sm">
          <th class="py-3 text-left font-medium">User</th>
          <th class="py-3 text-left font-medium">Email</th>
          <th class="py-3 text-center font-medium">Policies</th>
          <th class="py-3 text-center font-medium">Status</th>
          <th class="py-3 text-right font-medium">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr th:each="u, iterStat : ${recentUsers}" th:if="${recentUsers != null}" th:classappend="${iterStat.index >= 5} ? ' hidden' : ''" class="border-b hover:bg-slate-50 transition">
          <!-- User -->
          <td class="py-4">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 gradient-primary rounded-full flex items-center justify-center text-white font-medium" th:text="${u.username != null ? u.username.substring(0,1).toUpperCase() : 'U'}">S</div>
              <span class="font-medium" th:text="${u.username}">Sarah Johnson</span>
            </div>
          </td>

          <!-- Email -->
          <td class="py-4 text-muted" th:text="${u.email}">sarah@example.com</td>

          <!-- Policies -->
          <td class="py-4 text-center" th:text="${u.policyCount}">0</td>

          <!-- Status -->
          <td class="py-4 text-center">
            <span class="bg-green-100 text-success px-4 py-1 rounded-full text-sm font-medium">Active</span>
          </td>

          <!-- Actions -->
          <td class="py-4 text-right relative">
            <button class="p-2 rounded-full hover:bg-slate-100">
              <i data-lucide="more-vertical"></i>
            </button>
          </td>
        </tr>
        <tr th:if="${recentUsers == null || recentUsers.size() == 0}" class="text-sm text-muted">
          <td colspan="5" class="px-6 py-6 text-center">No users found</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>


</main>

<script>
  lucide.createIcons();

  function go(url) {
    window.location.href = url;
  }
function logout(){ location.href='/logout' }
  function toggleMenu(index) {
    document.querySelectorAll(".action-menu").forEach((m, i) => {
      if (i === index) {
        m.classList.toggle("hidden");
      } else {
        m.classList.add("hidden");
      }
    });
  }

  document.addEventListener("click", e => {
    if (!e.target.closest(".relative")) {
      document.querySelectorAll(".action-menu").forEach(m => m.classList.add("hidden"));
    }
  });
</script>

</body>
</html>



-----------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Payments</title>
  <link rel="stylesheet" href="../css/styles.css">
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

</head>
<body>

<header class="header">
  <h2>Admin - Payments</h2>
</header>

<div class="container-flex">

  <aside class="sidebar">
    <a th:href="@{/admin/dashboard}">Dashboard</a>
      <a th:href="@{/admin/payments}">Payments</a>
  </aside>

  <main class="content">
    <h1>Payments</h1>

    <button class="btn btn-primary" onclick="exportCSV()">Export CSV</button>

    <div class="table-box">
      <table>
        <tr>
          <th>User</th>
          <th>Amount</th>
          <th>Status</th>
        </tr>
        <tr>
          <td>Meera</td>
          <td>1200</td>
          <td>Paid</td>
        </tr>
      </table>
    </div>
  </main>

</div>

<script src="../js/app.js"></script>
</body>
</html>



-------------------------------------------



<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Policies  Admin Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sidebar: "#0f172a",
            bg: "#f8fafc",
            card: "#ffffff",
            border: "#e5e7eb",
            muted: "#64748b",
            success: "#16a34a",
            warning: "#f59e0b"
          }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .gradient-primary { background: linear-gradient(135deg, #2563eb, #1d4ed8); }
    .bg-card { overflow: visible !important; }
  </style>
</head>

<body class="bg-bg flex">

<aside class="fixed inset-y-0 left-0 w-64 bg-sidebar text-white flex flex-col z-40">
  <div class="p-6 flex items-center gap-3">
    <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h1 class="font-bold leading-tight">HIMS</h1>
      <p class="text-xs text-white/60">Admin Portal</p>
    </div>
  </div>

  <nav class="px-4 space-y-1 flex-1">
    <button onclick="go('/admin/dashboard')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="layout-dashboard"></i><span>Dashboard</span>
    </button>
    <button onclick="go('/admin/users')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="users"></i><span>Users</span>
    </button>
    <button class="w-full flex items-center gap-3 p-3 rounded-xl bg-white/10 transition">
      <i data-lucide="file-text"></i><span>Policies</span>
    </button>
    <button onclick="go('/admin/claims')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="clipboard-list"></i><span>Claims</span>
    </button>
    <button onclick="go('/admin/support')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="headphones"></i><span>Support</span>
    </button>
    <button onclick="go('/admin/analytics')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="bar-chart-3"></i><span>Analytics</span>
    </button>
    <button onclick="go('/admin/settings')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="settings"></i><span>Settings</span>
    </button>
  </nav>

  <div class="p-4 border-t border-white/10">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-400 hover:bg-red-500/10 font-semibold transition">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<main class="ml-64 flex-1 p-8">
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8">
    <div>
      <h1 class="text-3xl font-bold text-slate-900">Policy Plans</h1>
      <p class="text-muted">Manage marketplace insurance products</p>
    </div>
    <div class="flex gap-3">
      <button onclick="location.reload()" class="px-4 py-2 border border-slate-200 rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all font-medium text-slate-600">
        <i data-lucide="refresh-cw" class="w-4 h-4"></i> Refresh
      </button>
      <button onclick="openCreatePolicy()" class="px-5 py-2 bg-sidebar text-white rounded-xl flex items-center gap-2 hover:bg-slate-800 transition-all font-bold shadow-lg">
        <i data-lucide="plus-circle" class="w-4 h-4"></i> Create New Plan
      </button>
    </div>
  </div>

  <div th:if="${success}" class="mb-6 p-4 rounded-2xl bg-emerald-50 border border-emerald-100 text-emerald-700 flex items-center gap-3 shadow-sm">
    <i data-lucide="check-circle" class="w-5 h-5"></i>
    <span class="font-medium" th:text="${success}"></span>
  </div>

  <div class="bg-card rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
    <div class="relative mb-6">
  <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"></i>
  <input type="text" id="policySearch" oninput="filterPolicies()" placeholder="Search by plan name or ID..." 
         class="w-full pl-12 pr-4 py-3.5 rounded-2xl border border-slate-200 bg-card outline-none focus:ring-4 focus:ring-blue-500/10 transition-all" />
</div>
    <table class="w-full border-collapse">
      <thead>
        <tr class="text-left border-b border-slate-100 bg-slate-50/50">
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Plan ID</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Plan Name</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest hidden sm:table-cell">Premium</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest hidden lg:table-cell">Coverage</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Status</th>
          <th class="px-6 py-4 text-right text-[11px] font-bold text-slate-400 uppercase tracking-widest">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-50" th:if="${policies != null}">
        <tr th:each="p : ${policies}" class="hover:bg-slate-50/50 transition-colors">
          <td class="px-6 py-5 font-mono text-xs text-blue-600 font-bold" th:text="${p.policyNumber}">PLAN-001</td>
          <td class="px-6 py-5 font-bold text-slate-900" th:text="${p.coverageType}">Health Plus</td>
          <td class="px-6 py-5 hidden sm:table-cell text-emerald-600 font-bold" th:text="${p.premiumAmount != null ? '$' + p.premiumAmount : ''}"></td>
          <td class="px-6 py-5 hidden lg:table-cell text-slate-700 font-semibold" th:text="${p.coverageAmount != null ? '$' + p.coverageAmount : ''}"></td>
          <td class="px-6 py-5">
            <span th:classappend="${p.policyStatus == 'ACTIVE'} ? 'bg-green-100 text-green-700' : 'bg-slate-100 text-slate-500'" 
                  class="px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest" th:text="${p.policyStatus}">ACTIVE</span>
          </td>
          <td class="px-6 py-5 text-right">
            <div class="flex justify-end gap-2">
              <a th:href="@{/admin/policies/{id}(id=${p.id})}" 
   class="p-2 hover:bg-blue-50 text-blue-600 rounded-lg transition-colors inline-block">
    <i data-lucide="eye" class="w-4 h-4"></i>
</a>
              <button th:onclick="openEdit([[${p.id}]], [[${p.coverageType}]], [[${p.premiumAmount}]], [[${p.coverageAmount}]], [[${p.startDate}]], [[${p.endDate}]])" 
        class="p-2 hover:bg-amber-50 text-amber-600 rounded-lg transition-colors">
    <i data-lucide="edit-3" class="w-4 h-4"></i>
</button>
              <form th:action="@{/admin/policies/delete/{id}(id=${p.id})}" method="post" style="display:inline" onsubmit="return confirm('Remove this plan?');">
                <button type="submit" class="p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
              </form>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <div th:if="${policies == null or policies.size() == 0}" class="py-20 text-center">
        <i data-lucide="file-x" class="w-12 h-12 text-slate-300 mx-auto mb-4"></i>
        <p class="text-slate-500 font-medium">No marketplace policies found.</p>
    </div>
  </div>
</main>

<div id="createPolicyModal" class="fixed inset-0 hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm z-50 p-4">
  <div class="bg-white w-full max-w-lg rounded-[40px] p-10 relative shadow-2xl">
    <button type="button" onclick="closeModals()" class="absolute top-8 right-8 text-slate-300 hover:text-slate-600 transition-colors z-[60]">
        <i data-lucide="x" class="w-6 h-6"></i>
    </button>
    <h2 class="text-3xl font-bold text-slate-900 mb-2">New Insurance Plan</h2>
    <p class="text-sm text-slate-500 mb-10">Configure a plan to be published in the marketplace.</p>
    <form th:action="@{/admin/policies}" method="post" class="space-y-6">
      <div class="space-y-1">
        <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Plan Name</label>
        <input name="policyName" type="text" placeholder="e.g., Premium Family Health" required class="w-full p-4 border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all" />
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div class="space-y-1">
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Premium ($/mo)</label>
          <input name="premium" type="number" step="0.01" required class="w-full p-4 border border-slate-200 rounded-2xl outline-none" />
        </div>
        <div class="space-y-1">
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Total Coverage ($)</label>
          <input name="coverage" type="number" step="0.01" required class="w-full p-4 border border-slate-200 rounded-2xl outline-none" />
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div class="space-y-1">
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Market Start</label>
          <input name="startDate" type="date" required class="w-full p-4 border border-slate-200 rounded-2xl outline-none" />
        </div>
        <div class="space-y-1">
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Market End</label>
          <input name="endDate" type="date" required class="w-full p-4 border border-slate-200 rounded-2xl outline-none" />
        </div>
      </div>
      <button type="submit" class="w-full bg-blue-600 text-white py-5 rounded-[24px] font-bold mt-4 hover:bg-blue-700 transition-all shadow-xl shadow-blue-500/30">Publish Plan</button>
    </form>
  </div>
</div>

<div id="viewPolicyModal" class="fixed inset-0 hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm z-50 p-4">
  <div class="bg-white max-w-md w-full rounded-[40px] p-10 relative shadow-2xl">
    <button type="button" onclick="closeModals()" class="absolute top-8 right-8 text-slate-300 hover:text-slate-600 transition-colors z-[60]">
      <i data-lucide="x" class="w-6 h-6"></i>
    </button>
    
    <h3 class="text-[11px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-10 text-center">Plan Details</h3>
    <div class="flex flex-col items-center mb-10">
      <div class="w-20 h-20 rounded-2xl gradient-primary flex items-center justify-center text-white mb-4 shadow-xl shadow-blue-500/20">
        <i data-lucide="file-text" class="w-10 h-10"></i>
      </div>
      <h2 id="view-plan-name" class="text-3xl font-bold text-slate-900 tracking-tight text-center"></h2>
      <span id="view-status" class="mt-2 bg-green-100 text-green-700 px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest"></span>
    </div>

    <div class="grid grid-cols-2 gap-y-8 mb-10 border-t border-slate-50 pt-10 px-2">
      <div><p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Monthly Premium</p><p id="view-premium" class="font-bold text-emerald-600 text-lg"></p></div>
      <div><p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Total Coverage</p><p id="view-coverage" class="font-bold text-slate-700 text-lg"></p></div>
      <div><p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Market Launch</p><p id="view-start" class="font-semibold text-slate-600 text-sm"></p></div>
      <div><p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Expiry Date</p><p id="view-end" class="font-semibold text-slate-600 text-sm"></p></div>
    </div>
    
    <button onclick="closeModals()" class="w-full bg-slate-900 text-white py-5 rounded-[24px] font-bold hover:bg-slate-800 transition-all shadow-xl">Done</button>
  </div>
</div>
<div id="editPolicyModal" class="fixed inset-0 hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm z-50 p-4">
  <div class="bg-white w-full max-w-lg rounded-[40px] p-10 relative shadow-2xl">
    <button type="button" onclick="closeModals()" class="absolute top-8 right-8 text-slate-300 hover:text-slate-600 z-[60]"><i data-lucide="x"></i></button>
    <h2 class="text-3xl font-bold text-slate-900 mb-8 text-center">Edit Policy Plan</h2>
    
    <form th:action="@{/admin/policies/edit}" method="post" class="space-y-6">
      <input type="hidden" id="edit-policy-id" name="id" />
      
      <div>
        <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2">Plan Name</label>
        <input type="text" id="edit-name" name="policyName" class="w-full p-4 border border-slate-200 rounded-2xl outline-none" required />
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2">Premium ($)</label>
          <input type="number" step="0.01" id="edit-premium" name="premium" class="w-full p-4 border border-slate-200 rounded-2xl outline-none" required />
        </div>
        <div>
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2">Coverage ($)</label>
          <input type="number" step="0.01" id="edit-coverage" name="coverage" class="w-full p-4 border border-slate-200 rounded-2xl outline-none" required />
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2">Start Date</label>
          <input type="date" id="edit-start" name="startDate" class="w-full p-4 border border-slate-200 rounded-2xl outline-none" required />
        </div>
        <div>
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2">End Date</label>
          <input type="date" id="edit-end" name="endDate" class="w-full p-4 border border-slate-200 rounded-2xl outline-none" required />
        </div>
      </div>

      <button type="submit" class="w-full bg-blue-600 text-white py-5 rounded-[24px] font-bold hover:bg-blue-700 shadow-xl shadow-blue-500/20">Save All Changes</button>
    </form>
  </div>
</div>

<script>
  lucide.createIcons();

  function go(url) { window.location.href = url; }
  function logout() { location.href = '/logout'; }

  function openCreatePolicy() {
    document.getElementById("createPolicyModal").classList.replace('hidden', 'flex');
    document.body.style.overflow = 'hidden';
  }

  function openViewPlan(name, premium, coverage, status, start, end) {
    document.getElementById('view-plan-name').innerText = name;
    document.getElementById('view-premium').innerText = '$' + premium;
    document.getElementById('view-coverage').innerText = '$' + coverage;
    document.getElementById('view-status').innerText = status;
    document.getElementById('view-start').innerText = start;
    document.getElementById('view-end').innerText = end;
    
    document.getElementById('viewPolicyModal').classList.replace('hidden', 'flex');
    document.body.style.overflow = 'hidden';
  }
// Function for Real-time Search
function filterPolicies() {
    const query = document.getElementById('policySearch').value.toLowerCase();
    const rows = document.querySelectorAll('tbody tr');
    rows.forEach(row => {
        const text = row.innerText.toLowerCase();
        row.style.display = text.includes(query) ? '' : 'none';
    });
}
// Function to Open Edit Modal and fill data
function openEdit(id, name, premium, coverage, start, end) {
    document.getElementById('edit-policy-id').value = id;
    document.getElementById('edit-name').value = name;
    document.getElementById('edit-premium').value = premium;
    document.getElementById('edit-coverage').value = coverage;
    
    // Clean dates to YYYY-MM-DD format
    if(start) document.getElementById('edit-start').value = start.split('T')[0];
    if(end) document.getElementById('edit-end').value = end.split('T')[0];

    document.getElementById('editPolicyModal').classList.replace('hidden', 'flex');
    document.body.style.overflow = 'hidden';
}
// Ensure closeModals targets all modal IDs
function closeModals() {
    document.getElementById('createPolicyModal').classList.replace('flex', 'hidden');
    document.getElementById('viewPolicyModal').classList.replace('flex', 'hidden');
    document.getElementById('editPolicyModal').classList.replace('flex', 'hidden');
    document.body.style.overflow = 'auto';
}
  window.onclick = function(event) {
    if (event.target.id === "createPolicyModal" || event.target.id === "viewPolicyModal") closeModals();
  }
</script>

</body>
</html>

-------------------------------------



<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Plan Details  Admin Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { sidebar: "#0f172a", bg: "#f8fafc", border: "#e5e7eb" } } }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .gradient-primary { background: linear-gradient(135deg, #2563eb, #1d4ed8); }
  </style>
</head>
<body class="bg-bg flex">

<aside class="fixed inset-y-0 left-0 w-64 bg-sidebar text-white flex flex-col z-40">
  <div class="p-6 flex items-center gap-3">
    <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h1 class="font-bold leading-tight">HIMS</h1>
      <p class="text-xs text-white/60">Admin Portal</p>
    </div>
  </div>

  <nav class="px-4 space-y-1 flex-1">
    <button onclick="go('/admin/dashboard')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="layout-dashboard"></i><span>Dashboard</span>
    </button>
    <button onclick="go('/admin/users')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="users"></i><span>Users</span>
    </button>
    <button class="w-full flex items-center gap-3 p-3 rounded-xl bg-white/10 transition">
      <i data-lucide="file-text"></i><span>Policies</span>
    </button>
    <button onclick="go('/admin/claims')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="clipboard-list"></i><span>Claims</span>
    </button>
    <button onclick="go('/admin/support')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="headphones"></i><span>Support</span>
    </button>
    <button onclick="go('/admin/analytics')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="bar-chart-3"></i><span>Analytics</span>
    </button>
    <button onclick="go('/admin/settings')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="settings"></i><span>Settings</span>
    </button>
  </nav>

  <div class="p-4 border-t border-white/10">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-400 hover:bg-red-500/10 font-semibold transition">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<main class="ml-64 flex-1 p-12">
  <button onclick="location.href='/admin/policies'" class="flex items-center gap-2 text-slate-500 hover:text-slate-900 mb-8 transition-colors">
    <i data-lucide="arrow-left" class="w-4 h-4"></i> Back to Marketplace
  </button>

  <div class="max-w-4xl bg-white rounded-[40px] border border-slate-200 shadow-sm p-12">
    <div class="flex justify-between items-start mb-12">
      <div class="flex items-center gap-6">
        <div class="w-20 h-20 rounded-3xl gradient-primary flex items-center justify-center text-white shadow-xl shadow-blue-500/20">
          <i data-lucide="file-text" class="w-10 h-10"></i>
        </div>
        <div>
          <p class="text-[11px] font-bold text-blue-600 uppercase tracking-[0.2em] mb-1" th:text="${policy.policyNumber}">PLAN-CODE</p>
          <h1 class="text-4xl font-bold text-slate-900 tracking-tight" th:text="${policy.coverageType}">Plan Name</h1>
        </div>
      </div>
      <span th:classappend="${policy.policyStatus == 'ACTIVE'} ? 'bg-green-100 text-green-700' : 'bg-slate-100 text-slate-500'" 
            class="px-5 py-2 rounded-full text-xs font-bold uppercase tracking-widest shadow-sm" th:text="${policy.policyStatus}">STATUS</span>
    </div>

    <div class="grid grid-cols-2 gap-12 border-t border-slate-50 pt-12">
      <div class="space-y-8">
        <div>
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2">Financial Breakdown</label>
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-slate-50 p-6 rounded-3xl">
              <p class="text-xs text-slate-500 mb-1">Monthly Premium</p>
              <p class="text-2xl font-bold text-emerald-600" th:text="${'$' + policy.premiumAmount}">$0.00</p>
            </div>
            <div class="bg-slate-50 p-6 rounded-3xl">
              <p class="text-xs text-slate-500 mb-1">Total Coverage</p>
              <p class="text-2xl font-bold text-slate-900" th:text="${'$' + policy.coverageAmount}">$0.00</p>
            </div>
          </div>
        </div>
      </div>

      <div class="space-y-8">
        <div>
          <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2">Marketplace Timeline</label>
          <div class="space-y-4">
            <div class="flex items-center gap-4 bg-slate-50 p-4 rounded-2xl">
              <i data-lucide="calendar-days" class="text-blue-500"></i>
              <div>
                <p class="text-[10px] text-slate-400 font-bold uppercase">Published Date</p>
                <p class="text-sm font-semibold text-slate-700" th:text="${#temporals.format(policy.startDate, 'MMMM dd, yyyy')}">Date</p>
              </div>
            </div>
            <div class="flex items-center gap-4 bg-slate-50 p-4 rounded-2xl">
              <i data-lucide="calendar-off" class="text-red-400"></i>
              <div>
                <p class="text-[10px] text-slate-400 font-bold uppercase">Available Until</p>
                <p class="text-sm font-semibold text-slate-700" th:text="${#temporals.format(policy.endDate, 'MMMM dd, yyyy')}">Date</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
<script>
  lucide.createIcons();
  function go(url) { window.location.href = url; }
  function logout() { location.href = '/logout'; }
</script>
</body>
</html>




---------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Settings  Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">


  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sidebar: "#0f172a",
            bg: "#f8fafc",
            card: "#ffffff",
            border: "#e5e7eb",
            muted: "#64748b",
            primary: "#2563eb"
          }
        }
      }
    }
  </script>

  <style>
    .gradient-primary {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
    }

    /* ---------- Sidebar ---------- */
    .nav-btn {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 12px;
      transition: background-color 0.15s ease;
    }
    .nav-btn:hover {
      background: rgba(255,255,255,0.1);
    }

    /* ---------- Toggle ---------- */
    .toggle {
      width: 46px;
      height: 24px;
      border-radius: 999px;
      position: relative;
      cursor: pointer;
      transition: background-color 0.25s ease;
    }
    .toggle span {
      width: 18px;
      height: 18px;
      background: #fff;
      border-radius: 999px;
      position: absolute;
      top: 3px;
      left: 3px;
      transition: transform 0.25s ease;
    }
    .toggle.on {
      background: #2563eb;
    }
    .toggle.on span {
      transform: translateX(22px);
    }
    .toggle.off {
      background: #e5e7eb;
    }

    /* ---------- Cards ---------- */
    .card-hover {
      transition: box-shadow 0.25s ease, transform 0.25s ease;
    }
    .card-hover:hover {
      box-shadow: 0 10px 28px rgba(0,0,0,0.08);
      transform: translateY(-1px);
    }
  </style>
</head>

<body class="bg-bg text-slate-900">

<!-- ================= SIDEBAR ================= -->
<aside class="fixed inset-y-0 left-0 w-64 bg-sidebar text-white flex flex-col z-40">

  <!-- Logo -->
  <div class="p-6 flex items-center gap-3">
    <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h1 class="font-bold leading-tight">HIMS</h1>
      <p class="text-xs text-white/60">Admin Portal</p>
    </div>
  </div>

  <!-- Nav -->
  <nav class="px-4 space-y-1 flex-1">
    <button onclick="go('/admin/dashboard')" class="nav-btn">
      <i data-lucide="layout-dashboard"></i> Dashboard
    </button>
    <button onclick="go('/admin/users')" class="nav-btn">
      <i data-lucide="users"></i> Users
    </button>
    <button onclick="go('/admin/policies')" class="nav-btn">
      <i data-lucide="file-text"></i> Policies
    </button>
    <button onclick="go('/admin/claims')" class="nav-btn">
      <i data-lucide="clipboard-list"></i> Claims
    </button>
    <button onclick="go('/admin/support')" class="nav-btn">
      <i data-lucide="headphones"></i> Support
    </button>
    <button
      onclick="go('/admin/analytics')"
      class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition"
    >
      <i data-lucide="bar-chart-3"></i>
      <span>Analytics</span>
    </button>
    <!-- ACTIVE -->
    <button class="nav-btn bg-white/10 cursor-default">
      <i data-lucide="settings"></i> Settings
    </button>
  </nav>

  <!-- <button class="m-4 flex items-center gap-2 text-red-400 hover:text-red-500">
    <i data-lucide="log-out"></i> Logout
  </button> -->

  <div class="p-4 border-t">
    <button onclick="logout()"
      class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<!-- ================= MAIN ================= -->
<main class="ml-64 p-8">

  <!-- Header -->
  <div class="flex justify-between items-start mb-10">
    <div>
      <h1 class="text-3xl font-bold">Settings</h1>
      <p class="text-muted mt-1">
        Manage system preferences and configurations
      </p>
    </div>

    <button
      onclick="resetSettings()"
      class="px-5 py-2.5 border rounded-xl flex items-center gap-2 hover:bg-slate-50"
    >
      <i data-lucide="refresh-cw"></i>
      Reset to Defaults
    </button>
  </div>

  <!-- ================= GRID ================= -->
  <div class="grid lg:grid-cols-2 gap-6">

    <!-- Notifications -->
    <div class="bg-card border rounded-2xl p-6 card-hover">
      <div class="flex gap-4 mb-6">
        <div class="w-12 h-12 gradient-primary rounded-xl flex items-center justify-center text-white">
          <i data-lucide="bell"></i>
        </div>
        <div>
          <h3 class="font-semibold">Notifications</h3>
          <p class="text-sm text-muted">
            Configure email and push notification preferences
          </p>
        </div>
      </div>

      <div class="space-y-5">
        <div class="flex justify-between items-center border-b pb-4">
          <span>Email notifications for new claims</span>
          <div class="toggle on" onclick="toggle(this)"><span></span></div>
        </div>
        <div class="flex justify-between items-center border-b pb-4">
          <span>SMS alerts for urgent tickets</span>
          <div class="toggle off" onclick="toggle(this)"><span></span></div>
        </div>
        <div class="flex justify-between items-center">
          <span>Daily summary reports</span>
          <div class="toggle on" onclick="toggle(this)"><span></span></div>
        </div>
      </div>
    </div>

    <!-- Security -->
    <div class="bg-card border rounded-2xl p-6 card-hover">
      <div class="flex gap-4 mb-6">
        <div class="w-12 h-12 gradient-primary rounded-xl flex items-center justify-center text-white">
          <i data-lucide="shield"></i>
        </div>
        <div>
          <h3 class="font-semibold">Security</h3>
          <p class="text-sm text-muted">
            Manage security and authentication settings
          </p>
        </div>
      </div>

      <div class="space-y-5">
        <div class="flex justify-between items-center border-b pb-4">
          <span>Two-factor authentication</span>
          <div class="toggle on" onclick="toggle(this)"><span></span></div>
        </div>
        <div class="flex justify-between items-center border-b pb-4">
          <span>Session timeout (30 mins)</span>
          <div class="toggle on" onclick="toggle(this)"><span></span></div>
        </div>
        <div class="flex justify-between items-center">
          <span>IP whitelist</span>
          <div class="toggle off" onclick="toggle(this)"><span></span></div>
        </div>
      </div>
    </div>

    <!-- Regional -->
    <div class="bg-card border rounded-2xl p-6 card-hover">
      <div class="flex gap-4 mb-6">
        <div class="w-12 h-12 gradient-primary rounded-xl flex items-center justify-center text-white">
          <i data-lucide="globe"></i>
        </div>
        <div>
          <h3 class="font-semibold">Regional</h3>
          <p class="text-sm text-muted">
            Configure timezone and language preferences
          </p>
        </div>
      </div>

      <div class="space-y-5">
        <div class="flex justify-between items-center border-b pb-4">
          <span>Timezone: EST (UTC-5)</span>
          <div class="toggle on" onclick="toggle(this)"><span></span></div>
        </div>
        <div class="flex justify-between items-center border-b pb-4">
          <span>Language: English (US)</span>
          <div class="toggle on" onclick="toggle(this)"><span></span></div>
        </div>
        <div class="flex justify-between items-center">
          <span>Currency: USD ($)</span>
          <div class="toggle on" onclick="toggle(this)"><span></span></div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="bg-card border rounded-2xl p-6 card-hover">
      <div class="flex gap-4 mb-6">
        <div class="w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center text-amber-600">
          <i data-lucide="database"></i>
        </div>
        <div>
          <h3 class="font-semibold">Quick Actions</h3>
          <p class="text-sm text-muted">
            System maintenance and data management
          </p>
        </div>
      </div>

      <div class="space-y-3">
        <button class="w-full border rounded-xl p-3 flex gap-3 hover:bg-slate-50">
          <i data-lucide="database"></i> Export All Data
        </button>
        <button class="w-full border rounded-xl p-3 flex gap-3 hover:bg-slate-50">
          <i data-lucide="mail"></i> Test Email Configuration
        </button>
        <button class="w-full border rounded-xl p-3 flex gap-3 hover:bg-slate-50">
          <i data-lucide="palette"></i> Customize Branding
        </button>
      </div>
    </div>

  </div>

  <!-- Save -->
  <div class="flex justify-end mt-10">
    <button
      onclick="saveSettings()"
      class="px-6 py-3 bg-blue-600 text-white rounded-2xl shadow-lg hover:bg-blue-700 flex items-center gap-2"
    >
      <i data-lucide="save"></i>
      Save All Changes
    </button>
  </div>

</main>

<!-- ================= SCRIPTS ================= -->
<script>
  lucide.createIcons();

  function toggle(el) {
    el.classList.toggle("on");
    el.classList.toggle("off");
  }
function logout(){ location.href='/logout' }
  function saveSettings() {
    alert("Settings saved successfully");
  }

  function resetSettings() {
    alert("Settings reset to defaults");
  }

  function go(url) {
    window.location.href = url;
  }
</script>

</body>
</html>


------------------------------------------------


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Support  Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">


  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sidebar: "#0f172a",
            bg: "#f8fafc",
            card: "#ffffff",
            border: "#e5e7eb",
            muted: "#64748b",
          }
        }
      }
    }
  </script>

  <style>
    .gradient-primary {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
    }
  </style>
</head>

<body class="bg-bg">

<!-- SIDEBAR -->
<aside class="fixed inset-y-0 left-0 w-64 bg-sidebar text-white flex flex-col z-40">
  <div class="p-6 flex items-center gap-3">
    <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h1 class="font-bold">HIMS</h1>
      <p class="text-xs text-white/60">Admin Portal</p>
    </div>
  </div>

  <nav class="px-4 space-y-1 flex-1">
    <button onclick="go('/admin/dashboard')" class="nav-btn">
      <i data-lucide="layout-dashboard"></i> Dashboard
    </button>
    <button onclick="go('/admin/users')" class="nav-btn">
      <i data-lucide="users"></i> Users
    </button>
    <button onclick="go('/admin/policies')" class="nav-btn">
      <i data-lucide="file-text"></i> Policies
    </button>
    <button onclick="go('/admin/claims')" class="nav-btn">
      <i data-lucide="clipboard-list"></i> Claims
    </button>
    <button
  class="w-full flex items-center gap-3 p-3 rounded-xl bg-white/10 cursor-default"
>
  <i data-lucide="headphones"></i> Support
</button>
    <button onclick="go('/admin/analytics')" class="nav-btn">
      <i data-lucide="bar-chart-3"></i> Analytics
    </button>
    <button onclick="go('/admin/settings')" class="nav-btn">
      <i data-lucide="settings"></i> Settings
    </button>
  </nav>

  <div class="p-4 border-t">
    <button onclick="logout()"
      class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<!-- MAIN -->
<main class="ml-64 p-8">

  <!-- HEADER -->
  <div class="flex justify-between items-center mb-8">
    <div>
      <h1 class="text-3xl font-bold">Support Tickets</h1>
      <p class="text-muted">Manage customer support requests</p>
    </div>
    <button class="px-4 py-2 border rounded-xl flex items-center gap-2 hover:bg-slate-50">
      <i data-lucide="refresh-cw"></i> Refresh
    </button>
  </div>

  <!-- STATS -->
<div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
    <div onclick="filterStatus('OPEN')" class="stat-card hover:ring-amber-400">
        <div class="icon bg-amber-100 text-amber-600"><i data-lucide="clock"></i></div>
        <div>
            <p class="text-sm text-muted">Open</p>
            <p class="text-2xl font-bold" th:text="${openCount}">0</p>
        </div>
    </div>

    <div onclick="filterStatus('progress')" class="stat-card hover:ring-blue-400">
        <div class="icon bg-blue-100 text-blue-600"><i data-lucide="message-square"></i></div>
        <div>
            <p class="text-sm text-muted">High Priority</p>
            <p class="text-2xl font-bold" th:text="${highPriorityCount}">0</p>
        </div>
    </div>

    <div onclick="filterStatus('RESOLVED')" class="stat-card hover:ring-emerald-400">
        <div class="icon bg-emerald-100 text-emerald-600"><i data-lucide="check-circle"></i></div>
        <div>
            <p class="text-sm text-muted">Resolved</p>
            <p class="text-2xl font-bold" th:text="${resolvedCount}">0</p>
        </div>
    </div>

    <div onclick="filterStatus('all')" class="stat-card hover:ring-purple-400">
        <div class="icon bg-purple-100 text-purple-600"><i data-lucide="layers"></i></div>
        <div>
            <p class="text-sm text-muted">Total</p>
            <p class="text-2xl font-bold" th:text="${#lists.size(tickets)}">0</p>
        </div>
    </div>
</div>

  <!-- SEARCH -->
  <div class="relative mb-6">
    <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-muted"></i>
    <input
      type="text"
      placeholder="Search tickets..."
      class="w-full pl-10 pr-4 py-3 rounded-xl border bg-card focus:ring-2 focus:ring-blue-500/20"
    />
  </div>

  <!-- TICKET CARD -->
<div id="ticket-container" class="space-y-4">
    <div th:each="t : ${tickets}" 
         class="bg-card rounded-xl border p-4 transition-shadow hover:shadow-md ticket-item"
         th:data-status="${t.ticketStatus}"
         th:data-search="${t.subject.toLowerCase() + ' ' + t.user.username.toLowerCase()}">
        <div class="flex justify-between items-center">
            <div>
                <p class="text-xs text-muted font-mono mb-1" th:text="${'TCK-' + t.id}">TCK-1000</p>
                <h3 class="font-semibold" th:text="${t.subject}">Issue Subject</h3>
                <p class="text-sm text-muted">
                    <span th:text="${t.user.username}">User</span>  
                    <span th:text="${#temporals.format(t.createdDate, 'MMM dd, yyyy')}">Date</span>
                </p>
            </div>
            <div class="flex items-center gap-3">
                <span class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider"
                      th:classappend="${t.ticketStatus == 'OPEN' ? 'bg-amber-100 text-amber-700' : 'bg-emerald-100 text-emerald-700'}"
                      th:text="${t.ticketStatus}">STATUS</span>
                <button th:onclick="openTicket([[${t.id}]], [[${t.user.username}]], [[${t.user.email}]], [[${t.issueDescription}]])" 
                        class="px-3 py-2 border rounded-xl hover:bg-slate-50">
                    View Ticket
                </button>
            </div>
        </div>
    </div>
</div>

</main>

<!-- VIEW TICKET MODAL -->
<div id="ticketModal" class="fixed inset-0 hidden items-center justify-center bg-black/50 z-50">
    <div class="bg-white max-w-lg w-full rounded-2xl p-6 relative">
        <h2 id="modal-title" class="text-lg font-semibold mb-4 text-slate-800">Ticket Details</h2>
        <div class="space-y-4">
            <div class="flex justify-between border-b pb-2 text-sm">
                <p><strong>User:</strong> <span id="modal-name"></span></p>
                <p><strong>Email:</strong> <span id="modal-email"></span></p>
            </div>
            <div id="modal-message" class="bg-slate-50 p-4 rounded-xl text-sm italic text-slate-600"></div>
            
            <form th:action="@{/agent/support/response}" method="POST">
                <input type="hidden" name="ticketId" id="hidden-ticket-id">
                <textarea name="message" rows="3" placeholder="Type your reply..." class="w-full px-4 py-3 border rounded-xl mb-3 outline-none focus:ring-2 focus:ring-blue-500/20" required></textarea>
                <div class="flex gap-2">
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors">Send Reply</button>
            </form>
            <form id="resolve-form" method="POST" class="flex-1">
                <button type="submit" class="w-full border py-3 rounded-xl font-bold hover:bg-slate-50 transition-colors">Mark Resolved</button>
            </form>
        </div>
    </div>
</div>

<script>
  lucide.createIcons();

    function openTicket(id, name, email, message) {
        // Set content
        document.getElementById("modal-title").innerText = "Ticket #TCK-" + id;
        document.getElementById("modal-name").innerText = name;
        document.getElementById("modal-email").innerText = email;
        document.getElementById("modal-message").innerText = message;
        
        // Prepare hidden inputs for forms
        document.getElementById("hidden-ticket-id").value = id;
        document.getElementById("resolve-form").action = "/support/" + id + "/resolve";

        // Show modal
        const modal = document.getElementById("ticketModal");
        modal.classList.remove("hidden");
        modal.classList.add("flex");
    }

    function closeTicket() {
        const modal = document.getElementById("ticketModal");
        modal.classList.add("hidden");
        modal.classList.remove("flex");
    }

    // SEARCH FILTERING
    document.querySelector('input[placeholder="Search tickets..."]').addEventListener('input', function(e) {
        const query = e.target.value.toLowerCase();
        document.querySelectorAll('.ticket-item').forEach(card => {
            const searchData = card.getAttribute('data-search');
            card.style.display = searchData.includes(query) ? 'block' : 'none';
        });
    });

    function logout() { location.href = '/logout'; }
    function go(url) { window.location.href = url; }
</script>

<style>
  .nav-btn {
  width: 100%;
  display: flex;
  gap: 12px;
  padding: 12px;
  border-radius: 12px;
  transition: background-color 0.2s ease;
}
.nav-btn:hover {
  background: rgba(255,255,255,0.1);
}


 .stat-card {
  background: white;
  border: 1px solid #e5e7eb;
  padding: 16px;
  border-radius: 16px;
  display: flex;
  gap: 16px;
  cursor: pointer;

  /* SAFE: no layout movement */
  transition: box-shadow 0.25s ease;
}

.stat-card:hover {
  box-shadow: 0 10px 24px rgba(0,0,0,0.08);
}



  .icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>

</body>
</html>


--------------------------------------------

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Users  Admin Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sidebar: "#0f172a",
            bg: "#f8fafc",
            card: "#ffffff",
            border: "#e5e7eb",
            muted: "#64748b",
            success: "#16a34a",
            warning: "#f59e0b",
            destructive: "#dc2626"
          }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .gradient-primary { background: linear-gradient(135deg, #2563eb, #1d4ed8); }
    /* Ensure table container allows menus to overflow */
    .bg-card { overflow: visible !important; }
  </style>
</head>

<body class="bg-bg flex">

<aside class="fixed inset-y-0 left-0 w-64 bg-sidebar text-white flex flex-col z-40">
  <div class="p-6 flex items-center gap-3">
    <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h1 class="font-bold leading-tight">HIMS</h1>
      <p class="text-xs text-white/60">Admin Portal</p>
    </div>
  </div>

  <nav class="px-4 space-y-1 flex-1">
    <button onclick="go('/admin/dashboard')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="layout-dashboard"></i><span>Dashboard</span>
    </button>
    <button class="w-full flex items-center gap-3 p-3 rounded-xl bg-white/10 transition">
      <i data-lucide="users"></i><span>Users</span>
    </button>
    <button onclick="go('/admin/policies')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="file-text"></i><span>Policies</span>
    </button>
    <button onclick="go('/admin/claims')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="clipboard-list"></i><span>Claims</span>
    </button>
    <button onclick="go('/admin/support')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="headphones"></i><span>Support</span>
    </button>
    <button onclick="go('/admin/analytics')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="bar-chart-3"></i><span>Analytics</span>
    </button>
    <button onclick="go('/admin/settings')" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/10 transition">
      <i data-lucide="settings"></i><span>Settings</span>
    </button>
  </nav>

  <div class="p-4 border-t border-white/10">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-400 hover:bg-red-500/10 font-semibold transition">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<main class="ml-64 flex-1 p-8">

  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8">
    <div>
      <h1 class="text-3xl font-bold text-slate-900">Users</h1>
      <p class="text-muted">Manage all registered users</p>
    </div>
    <div class="flex gap-3">
      <button onclick="location.reload()" class="px-4 py-2 border border-slate-200 rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all font-medium text-slate-600">
        <i data-lucide="refresh-cw" class="w-4 h-4"></i> Refresh
      </button>
      <button onclick="openAddUser()" class="px-5 py-2 bg-sidebar text-white rounded-xl flex items-center gap-2 hover:bg-slate-800 transition-all font-bold shadow-lg shadow-slate-200">
        <i data-lucide="user-plus" class="w-4 h-4"></i> Add New Account
      </button>
    </div>
  </div>

  <div class="relative mb-6">
    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"></i>
    <input type="text" id="userSearch" oninput="filterUsers()" placeholder="Search users by name, email, or role..." 
           class="w-full pl-12 pr-4 py-3.5 rounded-2xl border border-slate-200 bg-card outline-none focus:ring-4 focus:ring-blue-500/10 transition-all" />
  </div>

  <div class="bg-card rounded-2xl border border-slate-200 shadow-sm">
    <table class="w-full border-collapse">
      <thead>
        <tr class="text-left border-b border-slate-100 bg-slate-50/50">
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">User</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest hidden md:table-cell">Contact</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Status</th>
          <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest hidden lg:table-cell">Join Date</th>
          <th class="px-6 py-4 text-right text-[11px] font-bold text-slate-400 uppercase tracking-widest">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-50">
        <tr th:each="u : ${users}" class="hover:bg-slate-50/50 transition-colors user-row"
            th:data-search="${u.username.toLowerCase() + ' ' + u.email.toLowerCase() + ' ' + u.role.toLowerCase()}">
          <td class="px-6 py-5">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-full gradient-primary flex items-center justify-center text-white font-bold" 
                   th:text="${#strings.substring(u.username,0,1).toUpperCase()}">U</div>
              <div>
                <p class="font-semibold text-slate-900" th:text="${u.username}">Username</p>
                <p class="text-xs text-muted md:hidden" th:text="${u.email}">email@example.com</p>
              </div>
            </div>
          </td>
          <td class="px-6 py-5 hidden md:table-cell">
            <div class="text-sm space-y-1">
              <div class="flex gap-2 items-center text-slate-600">
                <i data-lucide="mail" class="w-3.5 h-3.5 text-slate-400"></i>
                <span th:text="${u.email}">email@example.com</span>
              </div>
              <div class="flex gap-2 items-center text-slate-400">
                <i data-lucide="phone" class="w-3.5 h-3.5"></i>
                <span th:text="${u.phone ?: '-'}">-</span>
              </div>
            </div>
          </td>
          <td class="px-6 py-5">
            <span th:classappend="${u.role == 'USER' ? 'bg-green-100 text-green-700' : u.role == 'AGENT' ? 'bg-blue-100 text-blue-700' : 'bg-purple-100 text-purple-700'}" 
                  class="px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider" th:text="${u.role}">ROLE</span>
          </td>
          <td class="px-6 py-5 hidden lg:table-cell text-sm text-slate-500">
            <span th:text="${u.joinDate != null ? #temporals.format(u.joinDate, 'MMM dd, yyyy') : 'N/A'}">Join Date</span>
          </td>
          <td class="px-6 py-5 text-right relative">
            <button onclick="toggleMenu(this)" class="p-2 rounded-full hover:bg-slate-100 text-slate-400 transition-colors">
              <i data-lucide="more-horizontal" class="w-5 h-5"></i>
            </button>
            <div class="hidden absolute right-6 mt-2 w-48 bg-white border border-slate-200 rounded-2xl shadow-xl z-50 p-2 overflow-hidden">
              <button th:onclick="openView([[${u.id}]], [[${u.username}]], [[${u.email}]], [[${u.role}]], [[${u.phone}]], [[${u.joinDate != null ? #temporals.format(u.joinDate, 'MMM dd, yyyy') : 'N/A'}]])" 
                      class="w-full text-left px-4 py-2.5 flex items-center gap-3 hover:bg-slate-50 rounded-xl text-sm font-medium text-slate-700">
                <i data-lucide="eye" class="w-4 h-4 text-blue-500"></i> View Details
              </button>
              <button th:onclick="openEdit([[${u.id}]], [[${u.username}]], [[${u.phone}]], [[${u.role}]])" 
                      class="w-full text-left px-4 py-2.5 flex items-center gap-3 hover:bg-slate-50 rounded-xl text-sm font-medium text-slate-700">
                <i data-lucide="edit-3" class="w-4 h-4 text-amber-500"></i> Edit Account
              </button>
              <div class="h-px bg-slate-100 my-1"></div>
              <form th:action="@{/admin/users/delete/{id}(id=${u.id})}" method="post" onsubmit="return confirm('Delete this account permanently?')">
                <button type="submit" class="w-full text-left px-4 py-2.5 flex items-center gap-3 hover:bg-red-50 rounded-xl text-sm font-medium text-red-600">
                  <i data-lucide="trash-2" class="w-4 h-4"></i> Delete User
                </button>
              </form>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</main>

<div id="addUserModal" class="fixed inset-0 hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm z-50 p-4">
  <div class="bg-white max-w-md w-full rounded-[32px] p-10 relative shadow-2xl scale-100 transition-transform">
    <button type="button" onclick="closeModals()" class="absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors z-[70]">
    <i data-lucide="x" class="w-6 h-6"></i>
</button>
    
    <h2 class="text-2xl font-bold text-slate-900 mb-2">Create Account</h2>
    <p class="text-sm text-slate-500 mb-8">Add a new user or agent to the system</p>
    
    <form th:action="@{/admin/users/add}" method="post" class="space-y-4">
      <input type="text" name="username" placeholder="Full Name" class="w-full p-4 border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10" required />
      <input type="email" name="email" placeholder="Email Address" class="w-full p-4 border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10" required />
      <input type="password" name="password" placeholder="Temporary Password" class="w-full p-4 border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10" required />
      <div class="grid grid-cols-2 gap-4">
        <input type="text" name="phone" placeholder="Phone" class="w-full p-4 border border-slate-200 rounded-2xl outline-none" />
        <select name="role" class="w-full p-4 border border-slate-200 rounded-2xl bg-white outline-none">
          <option value="USER">User</option>
          <option value="AGENT">Agent</option>
          <option value="ADMIN">Admin</option>
        </select>
      </div>
      <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-bold mt-4 hover:bg-blue-700 transition-all shadow-xl">Create Account</button>
    </form>
  </div>
</div>

<div id="editUserModal" class="fixed inset-0 hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm z-50 p-4">
  <div class="bg-white max-w-md w-full rounded-[32px] p-10 relative shadow-2xl">
    <button type="button" onclick="closeModals()" class="absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors z-[70]">
    <i data-lucide="x" class="w-6 h-6"></i>
</button>
    
    <h2 class="text-2xl font-bold text-slate-900 mb-8 text-center">Edit User</h2>
    <form th:action="@{/admin/users/edit}" method="post" class="space-y-6">
      <input type="hidden" id="edit-id" name="id" />
      <div>
        <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 block">Full Name</label>
        <input type="text" id="edit-name" name="username" class="w-full p-4 border border-slate-200 rounded-2xl bg-slate-50/50 outline-none" />
      </div>
      <div>
        <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 block">Phone Number</label>
        <input type="text" id="edit-phone" name="phone" class="w-full p-4 border border-slate-200 rounded-2xl outline-none" />
      </div>
      <div>
        <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 block">Account Status</label>
        <select id="edit-role" name="role" class="w-full p-4 border border-slate-200 rounded-2xl bg-white outline-none">
          <option value="USER">User</option>
          <option value="AGENT">Agent</option>
          <option value="ADMIN">Admin</option>
        </select>
      </div>
      <div class="flex gap-4 pt-4">
        <button type="button" onclick="closeModals()" class="flex-1 py-4 border border-slate-200 rounded-2xl font-bold text-slate-500 hover:bg-slate-50">Cancel</button>
        <button type="submit" class="flex-1 bg-blue-600 text-white py-4 rounded-2xl font-bold hover:bg-blue-700 transition-all">Save Changes</button>
      </div>
    </form>
  </div>
</div>

<div id="viewUserModal" class="fixed inset-0 hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm z-50 p-4">
  <div class="bg-white max-w-md w-full rounded-[40px] p-10 relative shadow-2xl">
    <button type="button" onclick="closeModals()" class="absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors z-[70]">
    <i data-lucide="x" class="w-6 h-6"></i>
</button>
    
    <h3 class="text-[11px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-10 text-center">User Details</h3>
    <div class="flex flex-col items-center mb-10">
      <div id="view-avatar" class="w-24 h-24 rounded-full gradient-primary flex items-center justify-center text-white text-4xl font-bold mb-4 shadow-xl shadow-blue-500/20"></div>
      <h2 id="view-name" class="text-3xl font-bold text-slate-900 tracking-tight"></h2>
      <span id="view-role" class="mt-2 bg-green-100 text-green-700 px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest"></span>
    </div>
    <div class="grid grid-cols-2 gap-y-8 mb-10 border-t border-slate-50 pt-10 px-2">
      <div><p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Email</p><p id="view-email" class="font-semibold text-slate-700 text-sm"></p></div>
      <div><p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Phone</p><p id="view-phone" class="font-semibold text-slate-700 text-sm"></p></div>
      <div class="col-span-2"><p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Member Since</p><p id="view-date" class="font-semibold text-slate-700 text-sm"></p></div>
    </div>
    <button onclick="switchToEdit()" class="w-full bg-blue-600 text-white py-5 rounded-[24px] font-bold flex items-center justify-center gap-3 hover:bg-blue-700 transition-all">
      <i data-lucide="user-cog" class="w-5 h-5"></i> Edit Account
    </button>
  </div>
</div>

<script>
  // Initialize Icons
  lucide.createIcons();

  // Navigation and Actions
  function go(url) { window.location.href = url; }
  function logout() { location.href = '/logout'; }

  // Action Menu Toggle Logic (Fixes last row visibility)
  function toggleMenu(btn) {
    const menu = btn.nextElementSibling;
    const isLastRow = btn.closest('tr').isSameNode(document.querySelector('tbody tr:last-child'));
    
    // Close other menus
    document.querySelectorAll(".absolute").forEach(m => {
        if(m !== menu) m.classList.add("hidden");
    });

    // Flip menu upwards if it's the last row to prevent cutoff
    if (isLastRow) {
      menu.classList.remove('mt-2');
      menu.classList.add('bottom-full', 'mb-2');
    } else {
      menu.classList.remove('bottom-full', 'mb-2');
      menu.classList.add('mt-2');
    }
    
    menu.classList.toggle("hidden");
  }

  // Modal Handlers
function openAddUser() {
    document.getElementById('addUserModal').classList.remove('hidden');
    document.getElementById('addUserModal').classList.add('flex');
    lucide.createIcons(); // Refresh icons inside the newly shown modal
    document.body.style.overflow = 'hidden';
}

  function openView(id, name, email, role, phone, date) {
    document.getElementById('view-name').innerText = name;
    document.getElementById('view-email').innerText = email;
    document.getElementById('view-role').innerText = role;
    document.getElementById('view-phone').innerText = phone || 'Not provided';
    document.getElementById('view-date').innerText = date;
    document.getElementById('view-avatar').innerText = name.charAt(0).toUpperCase();
    
    // Cache for switching to edit
    window.activeUser = {id, name, phone, role};
    
    document.getElementById('viewUserModal').classList.replace('hidden', 'flex');
    document.body.style.overflow = 'hidden';
  }

  function openEdit(id, name, phone, role) {
    document.getElementById('edit-id').value = id;
    document.getElementById('edit-name').value = name;
    document.getElementById('edit-phone').value = phone || '';
    document.getElementById('edit-role').value = role;
    
    document.getElementById('editUserModal').classList.replace('hidden', 'flex');
    document.body.style.overflow = 'hidden';
  }

  function switchToEdit() {
    const u = window.activeUser;
    closeModals();
    setTimeout(() => openEdit(u.id, u.name, u.phone, u.role), 100);
  }

function closeModals() {
    // Hide each specific modal
    document.getElementById('addUserModal').classList.add('hidden');
    document.getElementById('editUserModal').classList.add('hidden');
    document.getElementById('viewUserModal').classList.add('hidden');
    
    // Cleanup display classes
    document.getElementById('addUserModal').classList.remove('flex');
    document.getElementById('editUserModal').classList.remove('flex');
    document.getElementById('viewUserModal').classList.remove('flex');
    
    // Re-enable page scrolling
    document.body.style.overflow = 'auto';
}
  // Real-time Search Filter
  function filterUsers() {
    const query = document.getElementById('userSearch').value.toLowerCase();
    document.querySelectorAll('.user-row').forEach(row => {
      const text = row.getAttribute('data-search');
      row.style.display = text.includes(query) ? '' : 'none';
    });
  }

  // Close menus on click outside
  document.addEventListener("click", e => {
    if (!e.target.closest("td")) {
      document.querySelectorAll(".absolute").forEach(m => m.classList.add("hidden"));
    }
  });
</script>

</body>
</html>



-----------------------------------AGENT TMPLATES----------------------------------


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claims Review - HIMS Agent Portal</title>
      <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; overflow-x: hidden; }

        .nav-active { 
            background: linear-gradient(to right, rgba(16, 185, 129, 0.1), rgba(20, 184, 166, 0.1)); 
            color: #059669; 
            font-weight: 600;
        }

        .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }

        .hidden-modal { display: none !important; }
        .modal-backdrop { background-color: rgba(15, 23, 42, 0.5); backdrop-filter: blur(8px); z-index: 100; }
        
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-approved { background: #dcfce7; color: #15803d; }
        .status-rejected { background: #fee2e2; color: #b91c1c; }
    </style>
</head>
<body class="flex min-h-screen">

   <header id="mobileHeader"
  class="fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-30 lg:hidden">

  <a href="#"
     class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
     aria-label="HIMS Agent Portal Home">
    <div class="w-8 h-8 rounded-lg bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
      <i data-lucide="shield" class="w-5 h-5 text-white"></i>
    </div>
    <span class="text-lg font-bold text-gray-900">HIMS Agent</span>
  </a>

  <button onclick="toggleSidebar(true)"
    class="p-2 rounded-lg hover:bg-gray-100"
    aria-label="Open navigation menu">
    <i data-lucide="menu" class="w-6 h-6"></i>
  </button>
</header>

<!-- ===== Mobile Overlay ===== -->
<div id="sidebarOverlay"
  class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"
  onclick="toggleSidebar(false)">
</div>

<!-- ===== Sidebar (AgentSidebar) ===== -->
<aside id="agentSidebar"
  class="fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 flex flex-col z-50
         transition-transform duration-300 ease-in-out
         -translate-x-full lg:translate-x-0">

  <!-- Header -->
  <div class="p-6 border-b border-gray-200">
    <div class="flex items-center justify-between">
      <a href="#"
         class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
         aria-label="HIMS Agent Portal Home">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
          <i data-lucide="shield" class="w-6 h-6 text-white"></i>
        </div>
        <div>
          <span class="text-lg font-bold text-gray-900">HIMS</span>
          <p class="text-xs text-gray-500">Agent Portal</p>
        </div>
      </a>

      <!-- Close (mobile) -->
      <button onclick="toggleSidebar(false)"
        class="lg:hidden p-2 rounded-lg hover:bg-gray-100"
        aria-label="Close navigation">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-4 space-y-1" aria-label="Main menu">

    <!-- Agent Dashboard -->
    <a th:href="@{/agent/dashboard}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Agent Dashboard</span>
    </a>

    <!-- Policies -->
    <a th:href="@{/agent/policies}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200"
      aria-current="page">
      <i data-lucide="file-text" class="w-5 h-5"></i>
      <span>Policies</span>
    </a>

    <!-- Claims (ACTIVE) -->
    <a th:href="@{/agent/claims}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             bg-gradient-to-r from-emerald-500/10 to-teal-600/10
             text-emerald-600 font-medium
             transition-all duration-200">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i>
      <span>Claims</span>
    </a>

    <!-- Customers -->
    <a th:href="@{/agent/customers}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Customers</span>
    </a>

    <!-- Support -->
    <a th:href="@{/agent/support}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Support</span>
    </a>

    <!-- Profile -->
    <a th:href="@{/agent/profile}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Profile</span>
    </a>

  </nav>

  <!-- Logout -->
  <div class="p-4 border-t border-gray-200">
    <button onclick="logout()"
      class="flex items-center gap-3 px-4 py-3 w-full rounded-xl
             text-red-600 hover:bg-red-50
             transition-all duration-200">
      <i data-lucide="log-out" class="w-5 h-5"></i>
      <span>Logout</span>
    </button>
  </div>
</aside>

    <main class="lg:ml-64 flex-1 p-4 sm:p-8 pt-20 lg:pt-8">
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-slate-900 mb-2">Claims Review</h1>
            <p class="text-slate-500 font-medium">Review and process insurance claims assigned to you</p>
        </div>

        <div class="grid grid-cols-3 gap-4 mb-8">
            <div class="bg-white p-4 rounded-xl border border-slate-200 text-center card-hover">
                <div class="w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center mx-auto mb-2 text-amber-600">
                    <i data-lucide="alert-circle" class="w-5 h-5"></i>
                </div>
                <p id="stat-pending" class="text-2xl font-bold text-amber-600" th:text="${statPending}">0</p>
                <p class="text-sm text-slate-500">Pending</p>
            </div>
            <div class="bg-white p-4 rounded-xl border border-slate-200 text-center card-hover">
                <div class="w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center mx-auto mb-2 text-emerald-600">
                    <i data-lucide="check-circle" class="w-5 h-5"></i>
                </div>
                <p id="stat-approved" class="text-2xl font-bold text-emerald-600" th:text="${statApproved}">0</p>
                <p class="text-sm text-slate-500">Approved</p>
            </div>
            <div class="bg-white p-4 rounded-xl border border-slate-200 text-center card-hover">
                <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-2 text-red-600">
                    <i data-lucide="x-circle" class="w-5 h-5"></i>
                </div>
                <p id="stat-rejected" class="text-2xl font-bold text-red-600" th:text="${statRejected}">0</p>
                <p class="text-sm text-slate-500">Rejected</p>
            </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 mb-6">
            <div class="relative flex-1 max-w-md">
                <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"></i>
                <input type="text" id="searchInput" oninput="renderClaims()" placeholder="Search by Claim ID, Policy, or Customer..." class="w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm focus:ring-2 focus:ring-emerald-500/20 outline-none">
            </div>
            <select id="statusFilter" onchange="renderClaims()" class="w-full sm:w-48 bg-white border border-slate-200 rounded-2xl px-4 py-3 text-sm font-bold text-slate-600 outline-none">
                <option value="all">All Claims</option>
                <option value="pending">Pending Review</option>
                <option value="approved">Approved</option>
                <option value="rejected">Rejected</option>
            </select>
        </div>

        <div class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-slate-50/50 text-slate-400 text-[11px] font-bold uppercase tracking-widest border-b border-slate-100">
                        <tr>
                            <th class="px-6 py-4">Claim ID</th>
                            <th class="px-6 py-4 hidden sm:table-cell">Policy No.</th>
                            <th class="px-6 py-4">Customer</th>
                            <th class="px-6 py-4 hidden md:table-cell">Type</th>
                            <th class="px-6 py-4">Amount</th>
                            <th class="px-6 py-4">Status</th>
                            <th class="px-6 py-4 text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="claimsBody" class="divide-y divide-slate-50 text-sm">
                        <tr th:each="c : ${claims}" th:attr="data-claim-id=${c.id}" class="border-t border-slate-50 hover:bg-slate-50/80 transition-colors">
                            <td class="px-6 py-4 font-mono font-bold text-slate-400 text-xs" th:text="${'CLM-' + c.id}">CLM-000</td>
                            <td class="px-6 py-4 hidden sm:table-cell font-mono text-slate-400 text-xs" th:text="${c.policy != null ? c.policy.policyNumber : 'N/A'}">POL-001</td>
                            <td class="px-6 py-4 font-bold text-slate-900" th:text="${c.policy != null && c.policy.user != null ? c.policy.user.username : 'Unknown'}">John Doe</td>
                            <td class="px-6 py-4 hidden md:table-cell text-slate-500" th:text="${c.policy != null ? c.policy.coverageType : ''}">Type</td>
                            <td class="px-6 py-4 font-bold text-slate-900" th:text="${c.claimAmount}">0.00</td>
                            <td class="px-6 py-4">
                                <span class="px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider" th:classappend="' status-' + (${c.claimStatus}?.toLowerCase())" th:text="${c.claimStatus}">PENDING</span>
                            </td>
                            <td class="px-6 py-4 text-right">
                                <div class="flex items-center justify-end gap-1">
                                    <span th:if="${c.claimStatus} == 'PENDING'">
                                        <button th:onclick="|openProcessModal('CLM-${c.id}', 'approve')|" class="p-2 text-emerald-500 hover:bg-emerald-50 rounded-lg transition-colors"><i data-lucide="check-circle" class="w-4 h-4"></i></button>
                                        <button th:onclick="|openProcessModal('CLM-${c.id}', 'reject')|" class="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors"><i data-lucide="x-circle" class="w-4 h-4"></i></button>
                                    </span>
                                    <button th:onclick="|openViewModal('CLM-${c.id}')|" class="p-2 text-slate-300 hover:text-slate-600 transition-colors"><i data-lucide="eye" class="w-4 h-4"></i></button>
                                    <button th:onclick="|deleteClaim(${c.id})|" class="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                </table>
            </div>
        </div>
    </main>

    <div id="viewModal" class="hidden-modal fixed inset-0 modal-backdrop flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-lg rounded-[32px] shadow-2xl relative overflow-hidden">
            <button onclick="closeModals()" class="absolute top-6 right-6 text-slate-300 hover:text-slate-600"><i data-lucide="x" class="w-6 h-6"></i></button>
            <div class="p-10">
                <h3 class="text-2xl font-bold mb-8">Claim Details</h3>
                <div id="viewContent" class="space-y-6">
                    </div>
            </div>
        </div>
    </div>

    <div id="processModal" class="hidden-modal fixed inset-0 modal-backdrop flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-[32px] shadow-2xl relative p-10">
            <h3 id="processTitle" class="text-xl font-bold mb-4 flex items-center gap-2"></h3>
            <p id="processDesc" class="text-sm text-slate-500 mb-6"></p>
            
            <div class="mb-6">
                <label class="text-sm font-bold text-slate-700 block mb-2 uppercase tracking-tighter">Internal Remarks</label>
                <textarea id="remarksInput" rows="3" class="w-full border border-slate-200 rounded-xl p-3 text-sm focus:ring-2 focus:ring-emerald-500/20 outline-none" placeholder="Add notes for this decision..."></textarea>
            </div>

            <div class="flex gap-3">
                <button onclick="closeModals()" class="flex-1 py-3 border border-slate-200 rounded-xl font-bold text-sm hover:bg-slate-50">Cancel</button>
                <button id="confirmBtn" class="flex-1 py-3 rounded-xl font-bold text-sm text-white transition-all"></button>
            </div>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('-translate-x-full');
            document.getElementById('sidebarOverlay').classList.toggle('hidden');
        }

        function formatUSD(amt) {
            try {
                return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amt);
            } catch (e) { return amt; }
        }

        function renderClaims() {
            const searchTerm = (document.getElementById('searchInput').value || '').toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const rows = Array.from(document.querySelectorAll('#claimsBody tr'));

            let pending = 0, approved = 0, rejected = 0;

            rows.forEach(row => {
                const id = (row.querySelector('td')?.innerText || '').toLowerCase();
                const holder = (row.querySelector('td:nth-child(3)')?.innerText || '').toLowerCase();
                const status = (row.querySelector('td:nth-child(6) span')?.innerText || '').toLowerCase();
                const matchesSearch = id.includes(searchTerm) || holder.includes(searchTerm);
                const matchesStatus = statusFilter === 'all' || status === statusFilter;
                const visible = matchesSearch && matchesStatus;
                row.style.display = visible ? '' : 'none';
                if (visible) {
                    if (status === 'pending') pending++;
                    else if (status === 'approved') approved++;
                    else if (status === 'rejected') rejected++;
                }
            });

            document.getElementById('stat-pending').innerText = pending;
            document.getElementById('stat-approved').innerText = approved;
            document.getElementById('stat-rejected').innerText = rejected;
        }

        function openViewModal(clmId) {
            const row = document.querySelector(`#claimsBody tr[data-claim-id][data-claim-id='${clmId.replace('CLM-','')}']`) || document.querySelector(`#claimsBody tr[data-claim-id='${clmId.replace('CLM-','')}']`);
            let holder = row ? row.querySelector('td:nth-child(3)')?.innerText : '';
            let policy = row ? row.querySelector('td:nth-child(2)')?.innerText : '';
            let type = row ? row.querySelector('td:nth-child(4)')?.innerText : '';
            let amount = row ? row.querySelector('td:nth-child(5)')?.innerText : '';
            let status = row ? row.querySelector('td:nth-child(6) span')?.innerText : '';

            const content = document.getElementById('viewContent');
            content.innerHTML = `
                <div class="flex justify-between items-center">
                    <span class="text-xl font-mono font-bold text-slate-900 tracking-tighter">${clmId}</span>
                    <span class="px-4 py-1 rounded-full text-[11px] font-bold uppercase tracking-widest">${status}</span>
                </div>
                <div class="grid grid-cols-2 gap-y-6 text-sm">
                    <div><p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Policy Number</p><p class="font-bold text-slate-900 font-mono">${policy}</p></div>
                    <div><p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Customer</p><p class="font-bold text-slate-900">${holder}</p></div>
                    <div><p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Type</p><p class="font-bold text-slate-900">${type}</p></div>
                    <div><p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Amount</p><p class="font-bold text-slate-900 text-lg">${amount}</p></div>
                </div>
                <div>
                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Description</p>
                    <p class="text-sm text-slate-600 leading-relaxed bg-slate-50 p-4 rounded-2xl border border-slate-100">No description provided.</p>
                </div>
            `;
            document.getElementById('viewModal').classList.remove('hidden-modal');
        }

        let activeClaimId = null;
        function openProcessModal(id, type) {
            activeClaimId = id.replace('CLM-','');
            const modal = document.getElementById('processModal');
            const title = document.getElementById('processTitle');
            const desc = document.getElementById('processDesc');
            const confirmBtn = document.getElementById('confirmBtn');

            document.getElementById('remarksInput').value = '';
            document.getElementById('viewModal').classList.add('hidden-modal');

            if (type === 'approve') {
                title.innerHTML = '<i data-lucide="check-circle" class="text-emerald-500"></i> Approve Claim';
                desc.innerText = `Approve ${id} ?`;
                confirmBtn.innerText = 'Confirm Approval';
                confirmBtn.className = 'flex-1 py-3 rounded-xl font-bold text-sm text-white bg-emerald-500 hover:bg-emerald-600';
                confirmBtn.onclick = () => doProcess('approve');
            } else {
                title.innerHTML = '<i data-lucide="x-circle" class="text-red-500"></i> Reject Claim';
                desc.innerText = `Please provide a reason for rejecting ${id}.`;
                confirmBtn.innerText = 'Confirm Rejection';
                confirmBtn.className = 'flex-1 py-3 rounded-xl font-bold text-sm text-white bg-red-500 hover:bg-red-600';
                confirmBtn.onclick = () => doProcess('reject');
            }
            modal.classList.remove('hidden-modal');
            lucide.createIcons();
        }

        async function doProcess(action) {
            const remarks = document.getElementById('remarksInput').value || '';
            if (action === 'reject' && !remarks.trim()) { alert('Please include remarks for rejection'); return; }
            try {
                const res = await fetch(`/agent/claims/${activeClaimId}/action?action=${encodeURIComponent(action)}`, { method: 'POST' });
                if (res.ok) {
                    location.reload();
                } else {
                    const j = await res.json().catch(()=>null);
                    alert(j && j.error ? j.error : 'Failed');
                }
            } catch (e) { alert('Network error: ' + e.message); }
        }

        function closeModals() {
            document.getElementById('viewModal').classList.add('hidden-modal');
            document.getElementById('processModal').classList.add('hidden-modal');
        }

        async function deleteClaim(id) {
            if (!confirm('Delete this claim?')) return;
            try {
                const res = await fetch('/agent/claims/' + id, { method: 'DELETE' });
                if (res.ok) location.reload();
                else {
                    const j = await res.json().catch(()=>null);
                    alert(j && j.error ? j.error : 'Delete failed');
                }
            } catch (e) { alert('Network error: ' + e.message); }
        }

        // initialize UI
        document.addEventListener('DOMContentLoaded', function(){
            renderClaims();
            lucide.createIcons();
        });
        function logout() {
    window.location.href = '/logout';
  }
        // Initialize
        renderClaims();
    </script>
</body>
</html>




-------------------------------------------------------


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Customer Details</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-bg">
  <main class="ml-64 p-8">
    <a href="/agent/customers" class="text-sm text-blue-600"> Back to customers</a>
    <div class="bg-white rounded-2xl p-8 mt-4">
      <h1 class="text-2xl font-bold mb-2" th:text="${customer.username}">Customer Name</h1>
      <p class="text-sm text-muted mb-2">Email: <span th:text="${customer.email}">email@example.com</span></p>
      <p class="text-sm text-muted mb-2">Assigned Policies: <span th:text="${policies != null ? policies.size() : 0}">0</span></p>

      <div class="mt-6">
        <h3 class="font-semibold mb-2">Policies</h3>
        <div class="space-y-3">
          <div th:each="p : ${policies}" class="flex items-center justify-between p-3 bg-slate-50 rounded-xl border border-slate-100">
            <div>
              <p class="text-sm font-bold text-slate-800" th:text="${p.coverageType}">Policy Name</p>
              <p class="text-[10px] font-mono text-slate-400 tracking-tighter uppercase" th:text="${'PLCY-' + p.id}">PLCY-001</p>
            </div>
            <span class="px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-widest" th:text="${p.policyStatus}">Active</span>
          </div>
          <div th:if="${policies == null || policies.size() == 0}" class="text-sm text-slate-400 italic">No policies linked to this account.</div>
        </div>
      </div>
    </div>
  </main>
</body>
</html>


------------------------------------------------------------


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assigned Customers - HIMS Agent Portal</title>
      <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; overflow-x: hidden; }

        /* Sidebar Nav Styles */
        .nav-active { 
            background: linear-gradient(to right, rgba(16, 185, 129, 0.1), rgba(20, 184, 166, 0.1)); 
            color: #059669; 
            font-weight: 600;
        }

        .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }

        /* Modal Styles */
        .hidden-modal { display: none !important; }
        .modal-backdrop {
            background-color: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(8px);
            z-index: 100;
        }

        /* Status Badge Colors */
        .badge-active { background: #dcfce7; color: #15803d; }
        .badge-pending { background: #fef3c7; color: #92400e; }
        .badge-inactive { background: #f1f5f9; color: #64748b; }
    </style>
</head>
<body class="flex min-h-screen">

   <header id="mobileHeader"
  class="fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-30 lg:hidden">

  <a href="#"
     class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
     aria-label="HIMS Agent Portal Home">
    <div class="w-8 h-8 rounded-lg bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
      <i data-lucide="shield" class="w-5 h-5 text-white"></i>
    </div>
    <span class="text-lg font-bold text-gray-900">HIMS Agent</span>
  </a>

  <button onclick="toggleSidebar(true)"
    class="p-2 rounded-lg hover:bg-gray-100"
    aria-label="Open navigation menu">
    <i data-lucide="menu" class="w-6 h-6"></i>
  </button>
</header>

<!-- ===== Mobile Overlay ===== -->
<div id="sidebarOverlay"
  class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"
  onclick="toggleSidebar(false)">
</div>

<!-- ===== Sidebar (AgentSidebar) ===== -->
<aside id="agentSidebar"
  class="fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 flex flex-col z-50
         transition-transform duration-300 ease-in-out
         -translate-x-full lg:translate-x-0">

  <!-- Header -->
  <div class="p-6 border-b border-gray-200">
    <div class="flex items-center justify-between">
      <a href="#"
         class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
         aria-label="HIMS Agent Portal Home">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
          <i data-lucide="shield" class="w-6 h-6 text-white"></i>
        </div>
        <div>
          <span class="text-lg font-bold text-gray-900">HIMS</span>
          <p class="text-xs text-gray-500">Agent Portal</p>
        </div>
      </a>

      <!-- Close (mobile) -->
      <button onclick="toggleSidebar(false)"
        class="lg:hidden p-2 rounded-lg hover:bg-gray-100"
        aria-label="Close navigation">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-4 space-y-1" aria-label="Main menu">

    <!-- Agent Dashboard -->
    <a th:href="@{/agent/dashboard}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Agent Dashboard</span>
    </a>

    <!-- Policies -->
    <a th:href="@{/agent/policies}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200"
      aria-current="page">
      <i data-lucide="file-text" class="w-5 h-5"></i>
      <span>Policies</span>
    </a>

    <!-- Claims -->
    <a th:href="@{/agent/claims}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i>
      <span>Claims</span>
    </a>

    <!-- Customers (ACTIVE) -->
    <a th:href="@{/agent/customers}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             bg-gradient-to-r from-emerald-500/10 to-teal-600/10
             text-emerald-600 font-medium
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Customers</span>
    </a>

    <!-- Support -->
    <a th:href="@{/agent/support}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Support</span>
    </a>

    <!-- Profile -->
    <a th:href="@{/agent/profile}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Profile</span>
    </a>

  </nav>

  <!-- Logout -->
  <div class="p-4 border-t border-gray-200">
    <button onclick="logout()"
      class="flex items-center gap-3 px-4 py-3 w-full rounded-xl
             text-red-600 hover:bg-red-50
             transition-all duration-200">
      <i data-lucide="log-out" class="w-5 h-5"></i>
      <span>Logout</span>
    </button>
  </div>
</aside>

    <main class="lg:ml-64 flex-1 p-4 sm:p-8 pt-20 lg:pt-8">
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-slate-900 mb-2">Assigned Customers</h1>
            <p class="text-slate-500 font-medium">View and manage customers assigned to you</p>
        </header>

        <div class="grid grid-cols-3 gap-4 mb-8">
            <div class="bg-white p-4 rounded-xl border border-slate-200 text-center card-hover">
                <div class="w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center mx-auto mb-2 text-emerald-600">
                    <i data-lucide="user" class="w-5 h-5"></i>
                </div>
                <p class="text-2xl font-bold text-emerald-600" th:text="${statActive}">0</p>
                <p class="text-sm text-slate-500 font-medium">Active</p>
            </div>
            <div class="bg-white p-4 rounded-xl border border-slate-200 text-center card-hover">
                <div class="w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center mx-auto mb-2 text-amber-600">
                    <i data-lucide="user" class="w-5 h-5"></i>
                </div>
                <p class="text-2xl font-bold text-amber-600" th:text="${statPending}">0</p>
                <p class="text-sm text-slate-500 font-medium">Pending</p>
            </div>
            <div class="bg-white p-4 rounded-xl border border-slate-200 text-center card-hover">
                <div class="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-2 text-slate-600">
                    <i data-lucide="user" class="w-5 h-5"></i>
                </div>
                <p class="text-2xl font-bold text-slate-600" th:text="${statInactive}">0</p>
                <p class="text-sm text-slate-500 font-medium">Inactive</p>
            </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 mb-6">
            <div class="relative flex-1 max-w-md">
                <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"></i>
                <input type="text" id="customerSearch" oninput="renderCustomers()" placeholder="Search by name, email, or phone..." class="w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm focus:ring-2 focus:ring-emerald-500/20 outline-none transition-all">
            </div>
            <select id="statusFilter" onchange="renderCustomers()" class="w-full sm:w-48 bg-white border border-slate-200 rounded-2xl px-4 py-3 text-sm font-bold text-slate-600 outline-none transition-all">
                <option value="all">All Customers</option>
                <option value="active">Active</option>
                <option value="pending">Pending</option>
                <option value="inactive">Inactive</option>
            </select>
        </div>

        <div class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-slate-50/50 text-slate-400 text-[11px] font-bold uppercase tracking-widest border-b border-slate-100">
                        <tr>
                            <th class="px-6 py-4">Customer</th>
                            <th class="px-6 py-4 hidden sm:table-cell">Email</th>
                            <th class="px-6 py-4 hidden md:table-cell">Phone</th>
                            <th class="px-6 py-4 hidden lg:table-cell">Joined</th>
                            <th class="px-6 py-4">Status</th>
                            <th class="px-6 py-4 text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="customerTableBody" class="divide-y divide-slate-50 text-sm">
                        <tr th:each="u : ${customers}" class="hover:bg-slate-50/80 transition-colors group">
                            <td class="px-6 py-4 flex items-center gap-3 font-bold text-slate-800">
                                <div class="w-9 h-9 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center text-white text-[10px] shadow-sm" th:text="${u.username != null and u.username.length() > 0 ? u.username.substring(0,1).toUpperCase() : 'U'}">J</div>
                                <div>
                                    <p th:text="${u.username}">John Doe</p>
                                    <div class="flex gap-2 text-[10px] text-slate-400 font-medium uppercase">
                                        <span th:text="${#lists.size(policyService.findByUser(u)) + ' policies'}">0 policies</span>  <span th:text="${0 + ' claims'}">0 claims</span>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 text-slate-500 font-medium hidden sm:table-cell" th:text="${u.email}">john@example.com</td>
                            <td class="px-6 py-4 text-slate-500 font-medium hidden md:table-cell"></td>
                            <td class="px-6 py-4 text-slate-400 text-xs hidden lg:table-cell font-medium"></td>
                            <td class="px-6 py-4">
                                <span th:class="${#lists.isEmpty(policyService.findByUser(u)) ? 'badge-pending' : 'badge-active'} + ' px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest'" th:text="${#lists.isEmpty(policyService.findByUser(u)) ? 'Pending' : 'Active'}">Active</span>
                            </td>
                            <td class="px-6 py-4 text-right">
                                <div class="flex justify-end gap-1">
                                    <a th:href="@{/agent/customers/{id}(id=${u.id})}" class="p-2 text-slate-300 hover:text-slate-600 transition-colors"><i data-lucide="eye" class="w-5 h-5"></i></a>
                                    <button class="p-2 text-slate-300 hover:text-emerald-600 transition-colors"><i data-lucide="mail" class="w-5 h-5"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr th:if="${customers == null || customers.size() == 0}" class="text-sm text-muted">
                            <td colspan="6" class="px-6 py-6 text-center">No customers found</td>
                        </tr>
                        </tbody>
                </table>
            </div>
        </div>
    </main>

    <div id="customerModal" class="hidden-modal fixed inset-0 modal-backdrop flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-lg rounded-[32px] shadow-2xl relative overflow-hidden">
            <button onclick="closeModal()" class="absolute top-6 right-6 text-slate-300 hover:text-slate-600 transition-colors z-20">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <div class="p-10 max-h-[85vh] overflow-y-auto">
                <h3 class="text-2xl font-bold mb-8">Customer Details</h3>
                
                <div class="flex items-center gap-4 mb-8">
                    <div id="m-avatar" class="w-16 h-16 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center text-white text-xl font-bold shadow-lg"></div>
                    <div>
                        <h4 id="m-name" class="text-xl font-bold text-slate-900"></h4>
                        <span id="m-status-badge" class="text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest"></span>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-y-6 mb-8 border-t border-slate-50 pt-8">
                    <div>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Email Address</p>
                        <div class="flex items-center gap-2 text-sm font-medium text-slate-700">
                            <i data-lucide="mail" class="w-3.5 h-3.5"></i> <span id="m-email"></span>
                        </div>
                    </div>
                    <div>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Phone Number</p>
                        <div class="flex items-center gap-2 text-sm font-medium text-slate-700">
                            <i data-lucide="phone" class="w-3.5 h-3.5"></i> <span id="m-phone"></span>
                        </div>
                    </div>
                    <div>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Member Since</p>
                        <div class="flex items-center gap-2 text-sm font-medium text-slate-700">
                            <i data-lucide="calendar" class="w-3.5 h-3.5"></i> <span id="m-joined"></span>
                        </div>
                    </div>
                </div>

                <div class="mb-8 border-t border-slate-50 pt-8">
                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4">Linked Policies</p>
                    <div id="m-policies-list" class="space-y-3"></div>
                </div>

                <div class="flex gap-4 border-t border-slate-50 pt-8">
                    <button class="flex-1 bg-slate-50 border border-slate-100 font-bold py-4 rounded-2xl text-xs text-slate-700 hover:bg-slate-100 flex items-center justify-center gap-2">
                        <i data-lucide="mail" class="w-4 h-4"></i> Send Email
                    </button>
                    <button class="flex-1 bg-emerald-500 text-white font-bold py-4 rounded-2xl text-xs shadow-lg shadow-emerald-100 hover:opacity-90 transition-all flex items-center justify-center gap-2">
                        <i data-lucide="file-text" class="w-4 h-4"></i> View Policies
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data mirroring the mockData
        const customers = [
            { id: 'USR-001', full_name: 'John Doe', email: 'john@example.com', phone: '+1 555-0100', status: 'active', created_at: '2024-01-15' },
            { id: 'USR-002', full_name: 'Jane Smith', email: 'jane@example.com', phone: '+1 555-0101', status: 'active', created_at: '2024-02-20' },
            { id: 'USR-003', full_name: 'Mike Johnson', email: 'mike@example.com', phone: '+1 555-0102', status: 'pending', created_at: '2024-03-10' },
            { id: 'USR-004', full_name: 'Robert Brown', email: 'robert@example.com', phone: '+1 555-0104', status: 'active', created_at: '2024-04-05' }
        ];

        const policies = [
            { id: 'POL-001', holder_name: 'John Doe', name: 'Health Plus Premium', status: 'active' },
            { id: 'POL-002', holder_name: 'Jane Smith', name: 'Dental Care Basic', status: 'active' },
            { id: 'POL-003', holder_name: 'Mike Johnson', name: 'Vision Care', status: 'inactive' }
        ];

        const claims = [
            { id: 'CLM-002', holder_name: 'John Doe', type: 'Lab Tests', status: 'pending' }
        ];

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('-translate-x-full');
            document.getElementById('sidebarOverlay').classList.toggle('hidden');
        }

        function renderCustomers() {
            const searchTerm = document.getElementById('customerSearch').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const body = document.getElementById('customerTableBody');
            
            const filtered = customers.filter(u => {
                const matchesSearch = u.full_name.toLowerCase().includes(searchTerm) || u.email.toLowerCase().includes(searchTerm) || u.phone.includes(searchTerm);
                const matchesStatus = statusFilter === 'all' || u.status === statusFilter;
                return matchesSearch && matchesStatus;
            });

            // Update stats
            document.getElementById('stat-active').innerText = customers.filter(c => c.status === 'active').length;
            document.getElementById('stat-pending').innerText = customers.filter(c => c.status === 'pending').length;
            document.getElementById('stat-inactive').innerText = customers.filter(c => c.status === 'inactive').length;

            body.innerHTML = filtered.map(u => {
                const initials = u.full_name.split(" ").map(n => n[0]).join("");
                const userPolicies = policies.filter(p => p.holder_name === u.full_name).length;
                const userClaims = claims.filter(c => c.holder_name === u.full_name).length;

                return `
                    <tr class="hover:bg-slate-50/80 transition-colors group">
                        <td class="px-6 py-4 flex items-center gap-3 font-bold text-slate-800">
                            <div class="w-9 h-9 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center text-white text-[10px] shadow-sm">
                                ${initials}
                            </div>
                            <div>
                                <p>${u.full_name}</p>
                                <div class="flex gap-2 text-[10px] text-slate-400 font-medium uppercase">
                                    <span>${userPolicies} policies</span>  <span>${userClaims} claims</span>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-slate-500 font-medium hidden sm:table-cell">${u.email}</td>
                        <td class="px-6 py-4 text-slate-500 font-medium hidden md:table-cell">${u.phone}</td>
                        <td class="px-6 py-4 text-slate-400 text-xs hidden lg:table-cell font-medium">${u.created_at}</td>
                        <td class="px-6 py-4">
                            <span class="badge-${u.status} px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest">${u.status}</span>
                        </td>
                        <td class="px-6 py-4 text-right">
                            <div class="flex justify-end gap-1">
                                <button onclick="openCustomerModal('${u.id}')" class="p-2 text-slate-300 hover:text-slate-600 transition-colors"><i data-lucide="eye" class="w-5 h-5"></i></button>
                                <button class="p-2 text-slate-300 hover:text-emerald-600 transition-colors"><i data-lucide="mail" class="w-5 h-5"></i></button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            lucide.createIcons();
        }

        function openCustomerModal(id) {
            const u = customers.find(user => user.id === id);
            const userPolicies = policies.filter(p => p.holder_name === u.full_name);
            const initials = u.full_name.split(" ").map(n => n[0]).join("");

            document.getElementById('m-name').innerText = u.full_name;
            document.getElementById('m-email').innerText = u.email;
            document.getElementById('m-phone').innerText = u.phone;
            document.getElementById('m-joined').innerText = u.created_at;
            document.getElementById('m-avatar').innerText = initials;
            
            const badge = document.getElementById('m-status-badge');
            badge.innerText = u.status;
            badge.className = `badge-${u.status} text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest mt-1 inline-block`;

            const list = document.getElementById('m-policies-list');
            if (userPolicies.length === 0) {
                list.innerHTML = '<p class="text-sm text-slate-400 italic">No policies linked to this account.</p>';
            } else {
                list.innerHTML = userPolicies.map(p => `
                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl border border-slate-100">
                        <div>
                            <p class="text-sm font-bold text-slate-800">${p.name}</p>
                            <p class="text-[10px] font-mono text-slate-400 tracking-tighter uppercase">${p.id}</p>
                        </div>
                        <span class="badge-${p.status} px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-widest">${p.status}</span>
                    </div>
                `).join('');
            }

            document.getElementById('customerModal').classList.remove('hidden-modal');
            document.body.style.overflow = 'hidden';
            lucide.createIcons();
        }

        function closeModal() {
            document.getElementById('customerModal').classList.add('hidden-modal');
            document.body.style.overflow = 'auto';
        }

        // Close on backdrop click
        document.getElementById('customerModal').addEventListener('click', (e) => {
            if (e.target.id === 'customerModal') closeModal();
        });
        function logout() {
    window.location.href = '/logout';
  }

        // Initial Load
        renderCustomers();
    </script>
</body>
</html>


------------------------------------------


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIMS Agent Portal - Dashboard</title>
      <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }

        /* KPI Card Hover Effect */
        .kpi-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            border-color: #3b82f6;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            background-color: #ffffff;
        }

        /* Sidebar Active State */
        .nav-active { 
            background: linear-gradient(to right, rgba(16, 185, 129, 0.1), rgba(20, 184, 166, 0.1)); 
            color: #059669; 
            font-weight: 600;
        }

        /* Modal Overlay */
        .hidden-modal { display: none !important; }
        
        /* Mobile Overlay */
        #sidebarOverlay.active { display: block !important; }
    </style>
</head>
<body class="min-h-screen">

   <header id="mobileHeader"
  class="fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-30 lg:hidden">

  <a href="#"
     class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
     aria-label="HIMS Agent Portal Home">
    <div class="w-8 h-8 rounded-lg bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
      <i data-lucide="shield" class="w-5 h-5 text-white"></i>
    </div>
    <span class="text-lg font-bold text-gray-900">HIMS Agent</span>
  </a>

  <button onclick="toggleSidebar(true)"
    class="p-2 rounded-lg hover:bg-gray-100"
    aria-label="Open navigation menu">
    <i data-lucide="menu" class="w-6 h-6"></i>
  </button>
</header>

<!-- ===== Mobile Overlay ===== -->
<div id="sidebarOverlay"
  class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"
  onclick="toggleSidebar(false)">
</div>

<!-- ===== Sidebar (AgentSidebar) ===== -->
<aside id="agentSidebar"
  class="fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 flex flex-col z-50
         transition-transform duration-300 ease-in-out
         -translate-x-full lg:translate-x-0">

  <!-- Header -->
  <div class="p-6 border-b border-gray-200">
    <div class="flex items-center justify-between">
      <a href="#"
         class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
         aria-label="HIMS Agent Portal Home">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
          <i data-lucide="shield" class="w-6 h-6 text-white"></i>
        </div>
        <div>
          <span class="text-lg font-bold text-gray-900">HIMS</span>
          <p class="text-xs text-gray-500">Agent Portal</p>
        </div>
      </a>

      <!-- Close (mobile) -->
      <button onclick="toggleSidebar(false)"
        class="lg:hidden p-2 rounded-lg hover:bg-gray-100"
        aria-label="Close navigation">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-4 space-y-1" aria-label="Main menu">

    <!-- Agent Dashboard  (ACTIVE)-->
    <a th:href="@{/agent/dashboard}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             bg-gradient-to-r from-emerald-500/10 to-teal-600/10
             text-emerald-600 font-medium
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Agent Dashboard</span>
    </a>

    <!-- Policies -->
    <a th:href="@{/agent/policies}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200"
      aria-current="page">
      <i data-lucide="file-text" class="w-5 h-5"></i>
      <span>Policies</span>
    </a>

    <!-- Claims -->
    <a th:href="@{/agent/claims}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i>
      <span>Claims</span>
    </a>

    <!-- Customers -->
    <a th:href="@{/agent/customers}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Customers</span>
    </a>

    <!-- Support -->
    <a th:href="@{/agent/support}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Support</span>
    </a>

    <!-- Profile -->
    <a th:href="@{/agent/profile}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Profile</span>
    </a>

  </nav>

  <!-- Logout -->
  <div class="p-4 border-t border-gray-200">
    <button onclick="logout()"
      class="flex items-center gap-3 px-4 py-3 w-full rounded-xl
             text-red-600 hover:bg-red-50
             transition-all duration-200">
      <i data-lucide="log-out" class="w-5 h-5"></i>
      <span>Logout</span>
    </button>
  </div>
</aside>


    <main class="lg:ml-64 p-4 sm:p-8 pt-20 lg:pt-8">
        
        <header class="flex items-center gap-4 mb-8">
            <div class="w-14 h-14 bg-emerald-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-100">
                <i data-lucide="trending-up" class="text-white w-7 h-7"></i>
            </div>
            <div>
                <h1 class="text-3xl font-bold text-slate-900">Agent Dashboard</h1>
                <p class="text-slate-400 text-sm font-medium">Manage policies, review claims, and assist customers</p>
            </div>
        </header>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
            <div class="kpi-card bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm">
                <div class="flex justify-between items-start mb-4">
                    <span class="text-slate-400 text-sm font-semibold">Assigned Policies</span>
                    <div class="p-2 bg-sky-50 rounded-xl text-sky-500"><i data-lucide="file-text" class="w-5 h-5"></i></div>
                </div>
                <div class="text-4xl font-bold mb-1" th:text="${policies != null ? policies.size() : 0}">0</div>
                <p class="text-xs text-slate-400 font-medium tracking-wide">Under management</p>
            </div>
            <div class="kpi-card bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm">
                <div class="flex justify-between items-start mb-4">
                    <span class="text-slate-400 text-sm font-semibold">Pending Claims</span>
                    <div class="p-2 bg-sky-50 rounded-xl text-sky-500"><i data-lucide="clock" class="w-5 h-5"></i></div>
                </div>
                <div class="text-4xl font-bold mb-1" th:text="${pendingClaimsCount}">0</div>
                <p class="text-xs text-red-500 font-bold uppercase tracking-wide">Requires review</p>
            </div>
            <div class="kpi-card bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm">
                <div class="flex justify-between items-start mb-4">
                    <span class="text-slate-400 text-sm font-semibold">Approved Today</span>
                    <div class="p-2 bg-sky-50 rounded-xl text-sky-500"><i data-lucide="check-circle" class="w-5 h-5"></i></div>
                </div>
                <div class="text-4xl font-bold mb-1" th:text="${approvedToday}">0</div>
                <p class="text-xs text-emerald-500 font-bold uppercase tracking-wide">Claims processed</p>
            </div>
            <div class="kpi-card bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm">
                <div class="flex justify-between items-start mb-4">
                    <span class="text-slate-400 text-sm font-semibold">Rejected Today</span>
                    <div class="p-2 bg-sky-50 rounded-xl text-sky-500"><i data-lucide="x-circle" class="w-5 h-5"></i></div>
                </div>
                <div class="text-4xl font-bold mb-1" th:text="${rejectedToday}">0</div>
                <p class="text-xs text-slate-400 font-medium tracking-wide">Claims declined</p>
            </div>
        </div>

        <h3 class="text-xl font-bold mb-6 px-1">Quick Actions</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
            <div class="bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm cursor-pointer group transition-all hover:border-emerald-500">
                <div class="w-12 h-12 bg-orange-500 text-white rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-orange-100 transition-transform group-hover:scale-110">
                    <i data-lucide="clipboard-list" class="w-6 h-6"></i>
                </div>
                <p class="text-slate-900 font-bold mb-1">Review Claims</p>
                <div class="flex justify-between items-center">
                    <span class="text-2xl font-bold">4</span>
                    <i data-lucide="arrow-right" class="w-4 h-4 text-slate-300 group-hover:translate-x-1 transition-transform"></i>
                </div>
            </div>
            <div class="bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm cursor-pointer group transition-all hover:border-emerald-500">
                <div class="w-12 h-12 bg-blue-600 text-white rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-blue-100 transition-transform group-hover:scale-110">
                    <i data-lucide="users" class="w-6 h-6"></i>
                </div>
                <p class="text-slate-900 font-bold mb-1">View Customers</p>
                <div class="flex justify-between items-center">
                    <span class="text-2xl font-bold">4</span>
                    <i data-lucide="arrow-right" class="w-4 h-4 text-slate-300 group-hover:translate-x-1 transition-transform"></i>
                </div>
            </div>
            <div class="bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm cursor-pointer group transition-all hover:border-emerald-500">
                <div class="w-12 h-12 bg-emerald-500 text-white rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-emerald-100 transition-transform group-hover:scale-110">
                    <i data-lucide="book-open" class="w-6 h-6"></i>
                </div>
                <p class="text-slate-900 font-bold mb-1">Policy Assistance</p>
                <div class="flex justify-between items-center">
                    <span class="text-2xl font-bold" th:text="${policies != null ? policies.size() : 0}">0</span>
                    <i data-lucide="arrow-right" class="w-4 h-4 text-slate-300 group-hover:translate-x-1 transition-transform"></i>
                </div>
            </div>
            <div class="bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm cursor-pointer group transition-all hover:border-emerald-500">
                <div class="w-12 h-12 bg-purple-500 text-white rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-purple-100 transition-transform group-hover:scale-110">
                    <i data-lucide="alert-circle" class="w-6 h-6"></i>
                </div>
                <p class="text-slate-900 font-bold mb-1">Support Escalations</p>
                <div class="flex justify-between items-center">
                    <span class="text-2xl font-bold" th:text="${tickets != null ? tickets.size() : 0}">0</span>
                    <i data-lucide="arrow-right" class="w-4 h-4 text-slate-300 group-hover:translate-x-1 transition-transform"></i>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
            <section>
                <div class="flex justify-between items-center mb-6 px-2">
                    <h3 class="text-xl font-bold text-slate-900">Claims Pending Review</h3>
                    <button class="text-xs font-bold text-slate-400 hover:text-emerald-600 flex items-center gap-1 uppercase tracking-widest">View All <i data-lucide="chevron-right" class="w-3 h-3"></i></button>
                </div>
                <div class="space-y-4">
                    <div th:if="${pendingClaims.empty}" class="p-6 text-sm text-slate-500 bg-white rounded-xl border">No pending claims</div>
                    <div th:each="c : ${pendingClaims}" class="bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-[10px] font-bold font-mono text-slate-300 tracking-tighter uppercase" th:text="${'CLM-' + c.id}">CLM-000</span>
                            <span class="bg-amber-100 text-amber-600 text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest" th:text="${c.claimStatus}">PENDING</span>
                        </div>
                        <h4 class="text-lg font-bold" th:text="${c.policy.user != null ? c.policy.user.username : 'Unknown'}">John Doe</h4>
                        <p class="text-xs text-slate-400 font-semibold mb-6" th:text="${c.policy.coverageType + '  $' + c.claimAmount}">Lab Tests  $0.00</p>
                        <div class="flex gap-3">
                            <button type="button" th:onclick="|processClaim(${c.id}, 'approve')|" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-500 text-white font-bold py-3.5 rounded-2xl text-sm shadow-lg shadow-blue-100 hover:opacity-90 transition-all flex items-center justify-center gap-2">
                                <i data-lucide="check-circle-2" class="w-4 h-4"></i> Approve
                            </button>
                            <button type="button" th:onclick="|processClaim(${c.id}, 'reject')|" class="flex-1 bg-gradient-to-r from-red-500 to-red-400 text-white font-bold py-3.5 rounded-2xl text-sm shadow-lg shadow-red-100 hover:opacity-90 transition-all flex items-center justify-center gap-2">
                                <i data-lucide="x-circle" class="w-4 h-4"></i> Reject
                            </button>
                            <button type="button" th:onclick="|openModal('CLM-${c.id}', 'POL-${c.policy.id}', '${c.policy.user != null ? c.policy.user.username : 'Unknown'}', '${c.policy.coverageType}', '${c.claimAmount}', '')|" class="px-4 border border-slate-100 rounded-2xl text-slate-300 hover:bg-slate-50 transition-colors">
                                <i data-lucide="eye" class="w-5 h-5"></i>
                            </button>
                            <button type="button" th:onclick="|deleteClaim(${c.id})|" class="px-4 border border-slate-100 rounded-2xl text-red-500 hover:bg-red-50 transition-colors">Delete</button>
                        </div>
                    </div>
                </div>
            </section>

            <section>
                <div class="flex justify-between items-center mb-6 px-2">
                    <h3 class="text-xl font-bold text-slate-900">Support Escalations</h3>
                    <button class="text-xs font-bold text-slate-400 hover:text-emerald-600 flex items-center gap-1 uppercase tracking-widest">View All <i data-lucide="chevron-right" class="w-3 h-3"></i></button>
                </div>
                <div class="bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm h-full flex flex-col">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-[10px] font-bold font-mono text-slate-300 tracking-tighter uppercase">TKT-001</span>
                        <span class="bg-red-100 text-red-500 text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest">high</span>
                    </div>
                    <h4 class="text-lg font-bold text-slate-900">Claim processing delay</h4>
                    <p class="text-xs text-slate-400 font-semibold mb-6">John Doe  2024-11-20</p>
                    <button class="mt-auto w-full py-4 border-2 border-slate-50 text-slate-700 font-bold rounded-2xl hover:bg-slate-50 transition-colors text-sm">
                        Review Ticket
                    </button>
                </div>
            </section>
        </div>

        <section class="bg-white rounded-[32px] border border-slate-100 shadow-sm overflow-hidden mb-12">
            <div class="px-8 py-6 flex justify-between items-center border-b border-slate-50">
                <h3 class="text-xl font-bold text-slate-900">Assigned Customers</h3>
                <button class="text-xs font-bold text-slate-400 hover:text-emerald-600 flex items-center gap-1 uppercase tracking-widest">View All <i data-lucide="chevron-right" class="w-3 h-3"></i></button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-slate-50/50">
                        <tr>
                            <th class="px-8 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest">Customer</th>
                            <th class="px-8 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest">Email</th>
                            <th class="px-8 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest">Phone</th>
                            <th class="px-8 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest">Status</th>
                            <th class="px-8 py-4 text-xs font-bold text-slate-400 text-right uppercase tracking-widest">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-50 text-sm">
                        <tr class="hover:bg-slate-50/50 transition-colors">
                            <td class="px-8 py-5 flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full bg-emerald-600 text-white flex items-center justify-center font-bold text-xs">JD</div>
                                <span class="font-bold text-slate-800 text-base">John Doe</span>
                            </td>
                            <td class="px-8 py-5 text-slate-500 font-medium">john@example.com</td>
                            <td class="px-8 py-5 text-slate-500 font-medium">+1 555-0100</td>
                            <td class="px-8 py-5">
                                <span class="bg-emerald-100 text-emerald-700 text-[10px] font-bold px-3 py-1 rounded-full uppercase">Active</span>
                            </td>
                            <td class="px-8 py-5 text-right">
                                <button class="p-2 text-slate-300 hover:text-slate-600 transition-colors"><i data-lucide="eye" class="w-5 h-5"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <div id="claimModal" class="hidden-modal fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-lg rounded-[32px] shadow-2xl relative overflow-hidden transition-all scale-100">
            <button onclick="closeModal()" class="absolute top-6 right-6 text-slate-300 hover:text-slate-600">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <div class="p-10">
                <h3 class="text-2xl font-bold mb-8 text-slate-900">Claim Details</h3>
                
                <div class="flex justify-between items-start mb-8">
                    <span id="mID" class="text-xl font-bold font-mono text-slate-900 tracking-tighter"></span>
                    <span class="bg-amber-100 text-amber-600 text-[11px] font-bold px-4 py-1.5 rounded-full tracking-widest">PENDING</span>
                </div>

                <div class="grid grid-cols-2 gap-y-8 mb-10">
                    <div>
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Policy ID</p>
                        <p id="mPolicy" class="font-bold text-slate-900"></p>
                    </div>
                    <div>
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Holder</p>
                        <p id="mHolder" class="font-bold text-slate-900"></p>
                    </div>
                    <div>
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Type</p>
                        <p id="mType" class="font-bold text-slate-900"></p>
                    </div>
                    <div>
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Amount</p>
                        <p id="mAmount" class="text-xl font-bold text-slate-900"></p>
                    </div>
                </div>

                <div class="mb-10">
                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Description</p>
                    <p id="mDesc" class="text-sm font-medium text-slate-600 leading-relaxed"></p>
                </div>

                <div class="flex gap-4">
                    <button class="flex-1 bg-gradient-to-r from-blue-600 to-blue-500 text-white font-bold py-4 rounded-2xl text-sm shadow-xl shadow-blue-200 hover:opacity-90 flex items-center justify-center gap-2">
                        <i data-lucide="check-circle-2" class="w-5 h-5"></i> Approve
                    </button>
                    <button class="flex-1 bg-gradient-to-r from-red-500 to-red-400 text-white font-bold py-4 rounded-2xl text-sm shadow-xl shadow-red-200 hover:opacity-90 flex items-center justify-center gap-2">
                        <i data-lucide="x-circle" class="w-5 h-5"></i> Reject
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        if (window.lucide && typeof lucide.createIcons === 'function') {
            lucide.createIcons();
        }

        function toggleSidebar(show) {
            const sidebar = document.getElementById('agentSidebar');
            const overlay = document.getElementById('sidebarOverlay');
            if (!sidebar || !overlay) return;

            if (typeof show === 'undefined') {
                // toggle state
                sidebar.classList.toggle('-translate-x-full');
                overlay.classList.toggle('hidden');
                overlay.classList.toggle('active');
            } else if (show) {
                // open
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
                overlay.classList.add('active');
            } else {
                // close
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
                overlay.classList.remove('active');
            }
        }

        function openModal(id, pol, holder, type, amt, desc) {
            document.getElementById('mID').innerText = id;
            document.getElementById('mPolicy').innerText = pol;
            document.getElementById('mHolder').innerText = holder;
            document.getElementById('mType').innerText = type;
            document.getElementById('mAmount').innerText = amt;
            document.getElementById('mDesc').innerText = desc;
            
            document.getElementById('claimModal').classList.remove('hidden-modal');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('claimModal').classList.add('hidden-modal');
            document.body.style.overflow = 'auto';
        }

        async function processClaim(id, action) {
            try {
                const resp = await fetch('/agent/claims/' + id + '/action?action=' + encodeURIComponent(action), { method: 'POST' });
                if (resp.ok) {
                    location.reload();
                } else {
                    const json = await resp.json().catch(()=>null);
                    alert(json && json.error ? json.error : 'Failed to process claim');
                }
            } catch (e) {
                alert('Network error: ' + e.message);
            }
        }

        async function deleteClaim(id) {
            if (!confirm('Delete this claim?')) return;
            try {
                const resp = await fetch('/agent/claims/' + id, { method: 'DELETE' });
                if (resp.ok) location.reload();
                else {
                    const json = await resp.json().catch(()=>null);
                    alert(json && json.error ? json.error : 'Failed to delete claim');
                }
            } catch (e) {
                alert('Network error: ' + e.message);
            }
        }

function logout() {
    window.location.href = '/logout';
  }
        // Handle backdrop click to close
        (function() {
            const _claimModal = document.getElementById('claimModal');
            if (!_claimModal) return;
            _claimModal.addEventListener('click', (e) => {
                if (e.target.id === 'claimModal') closeModal();
            });
        })();
    </script>
</body>
</html>


------------------------------------------------------




<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Policy Assistance  HIMS</title>
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

body {
  font-family: 'Inter', sans-serif;
  background: #f8fafc;
}

.card-hover {
  transition: all .25s ease;
}
.card-hover:hover {
  transform: translateY(-6px);
  box-shadow: 0 22px 45px rgba(0,0,0,.15);
}

.modal-backdrop {
  background: rgba(0,0,0,.45);
}
</style>
</head>

<body class="text-slate-900">

<!-- ================= SIDEBAR ================= -->
<aside class="fixed left-0 top-0 h-screen w-64 bg-white border-r border-slate-200 flex flex-col z-40">

  <div class="p-6 border-b">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
        <i data-lucide="shield" class="text-white"></i>
      </div>
      <div>
        <h2 class="font-bold text-lg">HIMS</h2>
        <p class="text-xs text-slate-400">Agent Portal</p>
      </div>
    </div>
  </div>

  <nav class="flex-1 p-4 space-y-1 text-sm">
    <a th:href="@{/agent/dashboard}" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100">
      <i data-lucide="layout-dashboard"></i> Agent Dashboard
    </a>
    <a th:href="@{/agent/policies}" class="flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-50 text-emerald-600 font-semibold">
      <i data-lucide="file-text"></i> Policies
    </a>
    <a th:href="@{/agent/claims}" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100">
      <i data-lucide="clipboard-list"></i> Claims
    </a>
    <a th:href="@{/agent/customers}" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100">
      <i data-lucide="user"></i> Customers
    </a>
    <a th:href="@{/agent/support}" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100">
      <i data-lucide="message-square"></i> Support
    </a>
    <a th:href="@{/agent/profile}" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100">
      <i data-lucide="user-circle"></i> Profile
    </a>
  </nav>

  <div class="p-4 border-t">
    <button onclick="go('/logout')" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-600 hover:bg-red-50">
      <i data-lucide="log-out"></i> Logout
    </button>
  </div>
</aside>

<!-- ================= MAIN ================= -->
<main class="ml-64 p-8">

<h1 class="text-3xl font-bold mb-1">Policy Assistance</h1>
<p class="text-slate-500 mb-6">View and assist customers with their policies</p>

<!-- INFO BANNER -->
<div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6 flex gap-3">
  <i data-lucide="info" class="text-blue-600"></i>
  <div>
    <p class="font-semibold text-blue-800">Agent Role: View & Assist Only</p>
    <p class="text-sm text-blue-600">
      You can view policy details and assist customers with renewals, coverage explanations,
      and premium queries. Policy creation and modifications are handled by administrators.
    </p>
  </div>
</div>

<!-- STATS -->
<div class="grid grid-cols-3 gap-4 mb-6 text-center">
  <div class="bg-white border rounded-xl p-4 card-hover">
    <p class="text-2xl font-bold text-emerald-600">3</p>
    <p class="text-sm text-slate-500">Active</p>
  </div>
  <div class="bg-white border rounded-xl p-4 card-hover">
    <p class="text-2xl font-bold text-amber-600">1</p>
    <p class="text-sm text-slate-500">Inactive</p>
  </div>
  <div class="bg-white border rounded-xl p-4 card-hover">
    <p class="text-2xl font-bold text-red-600">1</p>
    <p class="text-sm text-slate-500">Expired</p>
  </div>
</div>

<!-- FILTERS -->
<div class="flex gap-4 mb-6">
  <input class="border rounded-lg px-4 py-2 w-96"
         placeholder="Search by Policy ID, Name, or Customer...">
  <select id="statusFilter"
        onchange="renderPolicies()"
        class="border rounded-lg px-4 py-2">
  <option value="all">All Policies</option>
  <option value="active">Active</option>
  <option value="inactive">Inactive</option>
  <option value="expired">Expired</option>
</select>

</div>

<!-- ================= POLICIES GRID ================= -->
<div id="policiesGrid"
     class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
</div>

</main>

<!-- ================= MODAL ================= -->
<div id="policyModal" class="fixed inset-0 hidden items-center justify-center modal-backdrop z-50">
  <div class="bg-white rounded-2xl w-full max-w-lg p-6 relative shadow-soft">
    <button onclick="closeModal()" class="absolute right-4 top-4">
      <i data-lucide="x"></i>
    </button>

    <h2 class="text-xl font-bold mb-4">Policy Details</h2>
    <p class="font-mono mb-4">POL-001</p>

    <div class="grid grid-cols-2 gap-4 text-sm">
      <div><p class="text-slate-400">Policy Name</p><p class="font-semibold">Health Plus Premium</p></div>
      <div><p class="text-slate-400">Policy Holder</p><p class="font-semibold">John Doe</p></div>
      <div><p class="text-slate-400">Coverage Amount</p><p class="font-bold">$500,000.00</p></div>
      <div><p class="text-slate-400">Monthly Premium</p><p class="font-bold">$450.00</p></div>
      <div><p class="text-slate-400">Start Date</p><p>2024-01-01</p></div>
      <div><p class="text-slate-400">End Date</p><p>2024-12-31</p></div>
    </div>

    <div class="mt-4 pt-4 border-t">
      <p class="text-slate-400">Renewal Status</p>
      <p class="text-amber-600 font-semibold">Due in 30 days</p>
    </div>

    <div class="mt-4 pt-4 border-t">
      <p class="font-semibold mb-3">Customer Assistance Actions</p>
      <div class="flex gap-2 mb-3">
        <button class="flex-1 border rounded-xl py-2">Explain Coverage</button>
        <button class="flex-1 border rounded-xl py-2">Contact Customer</button>
      </div>
      <button class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-xl font-semibold">
        Assist with Renewal
      </button>
    </div>
  </div>
</div>

<script>
function openModal(){
  policyModal.classList.remove("hidden");
  policyModal.classList.add("flex");
}
function closeModal(){
  policyModal.classList.add("hidden");
}
lucide.createIcons();
const policies = [
  {
    id: "POL-001",
    name: "Health Plus Premium",
    holder: "John Doe",
    status: "active",
    coverage: "$500,000.00",
    premium: "$450.00/mo",
    valid: "2024-12-31",
    renewal: "Due in 30 days",
    renewalColor: "text-amber-600"
  },
  {
    id: "POL-002",
    name: "Dental Care Basic",
    holder: "Jane Smith",
    status: "active",
    coverage: "$25,000.00",
    premium: "$75.00/mo",
    valid: "2025-03-14",
    renewal: "Active",
    renewalColor: "text-emerald-600"
  },
  {
    id: "POL-003",
    name: "Vision Care",
    holder: "Mike Johnson",
    status: "inactive",
    coverage: "$10,000.00",
    premium: "$35.00/mo",
    valid: "2025-05-31",
    renewal: "Pending activation",
    renewalColor: "text-emerald-600"
  },
  {
    id: "POL-004",
    name: "Family Health Plan",
    holder: "Sarah Wilson",
    status: "expired",
    coverage: "$750,000.00",
    premium: "$650.00/mo",
    valid: "2023-12-31",
    renewal: "Expired - Renewal required",
    renewalColor: "text-red-600"
  },
  {
    id: "POL-005",
    name: "Critical Illness Cover",
    holder: "Robert Brown",
    status: "active",
    coverage: "$300,000.00",
    premium: "$200.00/mo",
    valid: "2025-01-31",
    renewal: "Active",
    renewalColor: "text-emerald-600"
  }
];

function renderPolicies() {
  const filter = document.getElementById("statusFilter").value;
  const grid = document.getElementById("policiesGrid");
  grid.innerHTML = "";

  policies
    .filter(p => filter === "all" || p.status === filter)
    .forEach(p => {
      grid.innerHTML += `
      <div class="bg-white rounded-3xl overflow-hidden border shadow-soft card-hover">
        <div class="bg-gradient-to-r from-emerald-500 to-teal-600 p-6 text-white">
          <div class="flex justify-between mb-2">
            <i data-lucide="shield"></i>
            <span class="bg-white/25 px-3 py-1 rounded-full text-xs capitalize">
              ${p.status}
            </span>
          </div>
          <h3 class="font-bold text-lg">${p.name}</h3>
          <p class="text-sm opacity-90">${p.holder}</p>
        </div>

        <div class="p-6 space-y-2 text-sm">
          <div class="flex justify-between"><span>Policy Number</span><span class="font-mono">${p.id}</span></div>
          <div class="flex justify-between"><span>Coverage</span><span class="font-bold">${p.coverage}</span></div>
          <div class="flex justify-between"><span>Premium</span><span class="font-bold">${p.premium}</span></div>
          <div class="flex justify-between"><span>Valid Until</span><span>${p.valid}</span></div>

          <div class="pt-2 border-t font-medium ${p.renewalColor}">
            ${p.renewal}
          </div>

          <div class="flex gap-2 pt-3">
            <button onclick="openModal()"
              class="flex-1 border rounded-xl py-2 flex items-center justify-center gap-2">
              <i data-lucide="eye"></i> View
            </button>
            <button
              class="flex-1 border rounded-xl py-2 flex items-center justify-center gap-2">
              <i data-lucide="user"></i> Contact
            </button>
          </div>
        </div>
      </div>`;
    });

  lucide.createIcons();
}

// initial load
renderPolicies();
</script>

</body>
</html>



--------------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - HIMS Agent Portal</title>
      <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; overflow-x: hidden; }

        /* Sidebar Nav Styles */
        .nav-active { 
            background: linear-gradient(to right, rgba(16, 185, 129, 0.1), rgba(20, 184, 166, 0.1)); 
            color: #059669; 
            font-weight: 600;
        }

        .replica-card {
            background: white;
            border-radius: 2rem;
            border: 1px solid #f1f5f9;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        /* Form Input Focus Effects */
        .hims-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            transition: all 0.2s;
            outline: none;
        }
        .hims-input:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
        }
        .hims-input:disabled {
            background-color: #f1f5f9;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="flex min-h-screen">

 <header id="mobileHeader"
  class="fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-30 lg:hidden">

  <a href="#"
     class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
     aria-label="HIMS Agent Portal Home">
    <div class="w-8 h-8 rounded-lg bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
      <i data-lucide="shield" class="w-5 h-5 text-white"></i>
    </div>
    <span class="text-lg font-bold text-gray-900">HIMS Agent</span>
  </a>

  <button onclick="toggleSidebar(true)"
    class="p-2 rounded-lg hover:bg-gray-100"
    aria-label="Open navigation menu">
    <i data-lucide="menu" class="w-6 h-6"></i>
  </button>
</header>

<!-- ===== Mobile Overlay ===== -->
<div id="sidebarOverlay"
  class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"
  onclick="toggleSidebar(false)">
</div>

<!-- ===== Sidebar (AgentSidebar) ===== -->
<aside id="agentSidebar"
  class="fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 flex flex-col z-50
         transition-transform duration-300 ease-in-out
         -translate-x-full lg:translate-x-0">

  <!-- Header -->
  <div class="p-6 border-b border-gray-200">
    <div class="flex items-center justify-between">
      <a href="#"
         class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
         aria-label="HIMS Agent Portal Home">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
          <i data-lucide="shield" class="w-6 h-6 text-white"></i>
        </div>
        <div>
          <span class="text-lg font-bold text-gray-900">HIMS</span>
          <p class="text-xs text-gray-500">Agent Portal</p>
        </div>
      </a>

      <!-- Close (mobile) -->
      <button onclick="toggleSidebar(false)"
        class="lg:hidden p-2 rounded-lg hover:bg-gray-100"
        aria-label="Close navigation">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-4 space-y-1" aria-label="Main menu">

    <!-- Agent Dashboard -->
    <a th:href="@{/agent/dashboard}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Agent Dashboard</span>
    </a>

    <!-- Policies -->
    <a th:href="@{/agent/policies}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200"
      aria-current="page">
      <i data-lucide="file-text" class="w-5 h-5"></i>
      <span>Policies</span>
    </a>

    <!-- Claims -->
    <a th:href="@{/agent/claims}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i>
      <span>Claims</span>
    </a>

    <!-- Customers-->
    <a th:href="@{/agent/customers}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Customers</span>
    </a>

    <!-- Support -->
    <a th:href="@{/agent/support}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Support</span>
    </a>

    <!-- Profile (ACTIVE)  -->
    <a th:href="@{/agent/profile}"
      class="flex items-center gap-3 px-4 py-3 rounded-xl
             bg-gradient-to-r from-emerald-500/10 to-teal-600/10
             text-emerald-600 font-medium
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Profile</span>
    </a>

  </nav>

  <!-- Logout -->
  <div class="p-4 border-t border-gray-200">
    <button onclick="logout()"
      class="flex items-center gap-3 px-4 py-3 w-full rounded-xl
             text-red-600 hover:bg-red-50
             transition-all duration-200">
      <i data-lucide="log-out" class="w-5 h-5"></i>
      <span>Logout</span>
    </button>
  </div>
</aside>

    <main class="lg:ml-64 flex-1 p-4 sm:p-8 pt-20 lg:pt-8">
        <div class="max-w-3xl mx-auto">
            <header class="mb-8">
                <h1 class="text-3xl font-bold text-slate-900 mb-2">My Profile</h1>
                <p class="text-slate-500 font-medium">Manage your agent profile information</p>
            </header>

            <div class="replica-card p-6 sm:p-8 mb-8 flex flex-col sm:flex-row items-center gap-6">
                <div class="relative">
                    <div class="w-24 h-24 rounded-[2rem] bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg shadow-emerald-100">
                        AS
                    </div>
                    <button class="absolute -bottom-1 -right-1 w-8 h-8 rounded-full bg-white border border-slate-200 shadow-sm flex items-center justify-center hover:bg-slate-50 transition-colors">
                        <i data-lucide="camera" class="w-4 h-4 text-slate-500"></i>
                    </button>
                </div>
                <div class="text-center sm:text-left">
                    <h2 class="text-2xl font-bold text-slate-900">Agent Smith</h2>
                    <p class="text-slate-500 font-medium">agent.smith@hims.com</p>
                    <div class="flex flex-wrap justify-center sm:justify-start gap-2 mt-3">
                        <span class="inline-flex items-center gap-1.5 px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-bold uppercase tracking-wider">
                            <i data-lucide="briefcase" class="w-3 h-3"></i> Claims Processing
                        </span>
                        <span class="inline-flex items-center gap-1.5 px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider">
                            <i data-lucide="award" class="w-3 h-3"></i> Senior Agent
                        </span>
                    </div>
                </div>
            </div>

            <div class="replica-card p-6 sm:p-8 mb-8">
                <h3 class="text-xl font-bold text-slate-900 mb-6">Personal Information</h3>
                <form onsubmit="handleSave(event)" class="space-y-6">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-slate-700 flex items-center gap-2">
                                <i data-lucide="user" class="w-4 h-4 text-slate-400"></i> First Name
                            </label>
                            <input type="text" value="Agent" class="hims-input">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-slate-700">Last Name</label>
                            <input type="text" value="Smith" class="hims-input">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-slate-700 flex items-center gap-2">
                                <i data-lucide="briefcase" class="w-4 h-4 text-slate-400"></i> Employee ID
                            </label>
                            <input type="text" value="AGT-2024-001" disabled class="hims-input">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-slate-700">Department</label>
                            <input type="text" value="Claims Processing" disabled class="hims-input">
                        </div>
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-bold text-slate-700 flex items-center gap-2">
                            <i data-lucide="mail" class="w-4 h-4 text-slate-400"></i> Email Address
                        </label>
                        <input type="email" value="agent.smith@hims.com" class="hims-input">
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-bold text-slate-700 flex items-center gap-2">
                            <i data-lucide="phone" class="w-4 h-4 text-slate-400"></i> Phone Number
                        </label>
                        <input type="tel" value="+1 (555) 987-6543" class="hims-input">
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-bold text-slate-700 flex items-center gap-2">
                            <i data-lucide="map-pin" class="w-4 h-4 text-slate-400"></i> Address
                        </label>
                        <input type="text" value="456 Agent Street, Chicago, IL 60601" class="hims-input">
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-bold text-slate-700 flex items-center gap-2">
                            <i data-lucide="calendar" class="w-4 h-4 text-slate-400"></i> Date of Birth
                        </label>
                        <input type="date" value="1985-08-20" class="hims-input">
                    </div>

                    <div class="flex justify-end pt-4 border-t border-slate-50">
                        <button type="submit" class="bg-emerald-600 text-white font-bold py-3 px-8 rounded-xl text-sm shadow-lg shadow-emerald-100 hover:bg-emerald-700 transition-all flex items-center gap-2">
                            <i data-lucide="save" class="w-4 h-4"></i> Save Changes
                        </button>
                    </div>
                </form>
            </div>

            <div class="replica-card p-6 sm:p-8 mb-8">
                <h3 class="text-xl font-bold text-slate-900 mb-6">Security</h3>
                <div class="space-y-4">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 rounded-2xl bg-slate-50 border border-slate-100">
                        <div>
                            <p class="font-bold text-slate-900">Password</p>
                            <p class="text-xs text-slate-500">Last changed 30 days ago</p>
                        </div>
                        <button onclick="alert('Password change initiated')" class="px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold text-slate-600 hover:bg-white transition-all">Change Password</button>
                    </div>
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 rounded-2xl bg-slate-50 border border-slate-100">
                        <div>
                            <p class="font-bold text-slate-900">Two-Factor Authentication</p>
                            <p class="text-xs text-slate-500">Add an extra layer of security</p>
                        </div>
                        <button onclick="alert('2FA Setup')" class="px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold text-slate-600 hover:bg-white transition-all">Enable</button>
                    </div>
                </div>
            </div>

            <div class="replica-card p-6 sm:p-8 mb-12">
                <h3 class="text-xl font-bold text-slate-900 mb-6">Activity Statistics</h3>
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                    <div class="text-center p-4 rounded-2xl bg-emerald-50/50 border border-emerald-50">
                        <p class="text-2xl font-bold text-emerald-600">156</p>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Claims</p>
                    </div>
                    <div class="text-center p-4 rounded-2xl bg-blue-50/50 border border-blue-50">
                        <p class="text-2xl font-bold text-blue-600">42</p>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Policies</p>
                    </div>
                    <div class="text-center p-4 rounded-2xl bg-amber-50/50 border border-amber-50">
                        <p class="text-2xl font-bold text-amber-600">98%</p>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Approval</p>
                    </div>
                    <div class="text-center p-4 rounded-2xl bg-teal-50/50 border border-teal-50">
                        <p class="text-2xl font-bold text-teal-600">4.9</p>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Rating</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        lucide.createIcons();

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('-translate-x-full');
            document.getElementById('sidebarOverlay').classList.toggle('hidden');
        }
function logout() {
    window.location.href = '/logout';
  }
        function handleSave(e) {
            e.preventDefault();
            alert("Profile Updated! Your information has been saved successfully.");
        }
    </script>
</body>
</html>


--------------------------------------------------





<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIMS Agent Portal - Complete Support System</title>
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        :root {
            --emerald-600: #059669;
            --sidebar-width: 16rem;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f8fafc; 
            color: #1e293b; 
            overflow-x: hidden;
        }

        /* Sidebar Nav Styles */
        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            color: #64748b;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
        }

        .nav-item:hover {
            background-color: #f1f5f9;
            color: #0f172a;
        }

        .nav-active { 
            background: linear-gradient(to right, rgba(16, 185, 129, 0.1), rgba(20, 184, 166, 0.1)); 
            color: var(--emerald-600); 
            font-weight: 600;
        }

        /* KPI & Action Cards */
        .card-replica {
            background: white;
            border: 1px solid #f1f5f9;
            border-radius: 2rem; /* 32px matching images */
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .kpi-hover:hover {
            transform: translateY(-5px);
            border-color: #3b82f6; 
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        /* Modal Styles */
        .hidden-modal { display: none !important; }
        
        .modal-backdrop {
            background-color: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(8px);
            z-index: 100;
        }

        .btn-blue-gradient {
            background: linear-gradient(to right, #2563eb, #3b82f6);
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.3);
        }

        /* Support Table Styles */
        .status-pill {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
        }
        
        .priority-high { background: #fee2e2; color: #b91c1c; }
        .status-open { background: #fef3c7; color: #92400e; }
    </style>
</head>
<body class="flex">

<!-- <aside id="agentSidebar" class="fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 flex flex-col z-50">
    <div class="p-6 border-b border-gray-200">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
                <i data-lucide="shield" class="w-6 h-6 text-white"></i>
            </div>
            <div>
                <span class="text-lg font-bold text-gray-900">HIMS</span>
                <p class="text-xs text-gray-500">Agent Portal</p>
            </div>
        </div>
    </div>
    <nav class="flex-1 px-4 py-4 space-y-1">
        <a th:href="@{/agent/dashboard}" class="nav-item"><i data-lucide="layout-dashboard" class="w-5 h-5"></i><span>Agent Dashboard</span></a>
        <a th:href="@{/agent/policies}" class="nav-item"><i data-lucide="file-text" class="w-5 h-5"></i><span>Policies</span></a>
        <a th:href="@{/agent/claims}" class="nav-item"><i data-lucide="clipboard-list" class="w-5 h-5"></i><span>Claims</span></a>
        <a th:href="@{/agent/customers}" class="nav-item"><i data-lucide="user" class="w-5 h-5"></i><span>Customers</span></a>
        <a th:href="@{/agent/support}" class="nav-item nav-active"><i data-lucide="headphones" class="w-5 h-5"></i><span>Support</span></a>
        <a th:href="@{/agent/profile}" class="nav-item"><i data-lucide="user-cog" class="w-5 h-5"></i><span>Profile</span></a>
    </nav>
    <div class="p-4 border-t border-gray-200">
        <button onclick="logout()" class="flex items-center gap-3 px-4 py-3 w-full rounded-xl text-red-600 hover:bg-red-50 transition-all">
            <i data-lucide="log-out" class="w-5 h-5"></i><span>Logout</span>
        </button>
    </div>
</aside> -->
<aside id="agentSidebar"
  class="fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 flex flex-col z-50
         transition-transform duration-300 ease-in-out
         -translate-x-full lg:translate-x-0">

  <!-- Header -->
  <div class="p-6 border-b border-gray-200">
    <div class="flex items-center justify-between">
      <a href="#"
         class="flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"
         aria-label="HIMS Agent Portal Home">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center">
          <i data-lucide="shield" class="w-6 h-6 text-white"></i>
        </div>
        <div>
          <span class="text-lg font-bold text-gray-900">HIMS</span>
          <p class="text-xs text-gray-500">Agent Portal</p>
        </div>
      </a>

      <!-- Close (mobile) -->
      <button onclick="toggleSidebar(false)"
        class="lg:hidden p-2 rounded-lg hover:bg-gray-100"
        aria-label="Close navigation">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-4 space-y-1" aria-label="Main menu">

    <!-- Agent Dashboard  (ACTIVE)-->
    <a th:href="@{/agent/dashboard}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Agent Dashboard</span>
    </a>

    <!-- Policies -->
    <a th:href="@{/agent/policies}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200"
      aria-current="page">
      <i data-lucide="file-text" class="w-5 h-5"></i>
      <span>Policies</span>
    </a>

    <!-- Claims -->
    <a th:href="@{/agent/claims}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i>
      <span>Claims</span>
    </a>

    <!-- Customers -->
    <a th:href="@{/agent/customers}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Customers</span>
    </a>

    <!-- Support -->
    <a th:href="@{/agent/support}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             bg-gradient-to-r from-emerald-500/10 to-teal-600/10
             text-emerald-600 font-medium
             transition-all duration-200">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span>Support</span>
    </a>

    <!-- Profile -->
    <a th:href="@{/agent/profile}" class="flex items-center gap-3 px-4 py-3 rounded-xl
             text-gray-500 hover:text-gray-900 hover:bg-gray-100
             transition-all duration-200">
      <i data-lucide="user" class="w-5 h-5"></i>
      <span>Profile</span>
    </a>

  </nav>

  <!-- Logout -->
  <div class="p-4 border-t border-gray-200">
    <button onclick="logout()"
      class="flex items-center gap-3 px-4 py-3 w-full rounded-xl
             text-red-600 hover:bg-red-50
             transition-all duration-200">
      <i data-lucide="log-out" class="w-5 h-5"></i>
      <span>Logout</span>
    </button>
  </div>
</aside>


<main class="ml-64 flex-1 p-8">
    <header class="mb-8">
        <h1 class="text-3xl font-bold text-slate-900 mb-2">Support Escalations</h1>
        <p class="text-slate-500 font-medium tracking-tight">Review and respond to escalated customer tickets</p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10 text-center">
    <div class="card-replica kpi-hover p-8">
        <div class="w-12 h-12 bg-amber-50 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-4"><i data-lucide="clock"></i></div>
        <div class="text-3xl font-bold text-amber-600" th:text="${openCount}">0</div>
        <p class="text-[10px] text-slate-400 font-bold uppercase mt-1">Open Tickets</p>
    </div>
    <div class="card-replica kpi-hover p-8">
        <div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4"><i data-lucide="message-square"></i></div>
        <div class="text-3xl font-bold text-blue-600" th:text="${resolvedCount}">0</div>
        <p class="text-[10px] text-slate-400 font-bold uppercase mt-1">In Progress</p>
    </div>
    <div class="card-replica kpi-hover p-8">
        <div class="w-12 h-12 bg-red-50 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4"><i data-lucide="alert-triangle"></i></div>
        <div class="text-3xl font-bold text-red-600" th:text="${highPriorityCount}">0</div>
        <p class="text-[10px] text-slate-400 font-bold uppercase mt-1">High Priority</p>
    </div>
</div>

    <div class="flex flex-col sm:flex-row gap-4 mb-8">
        <div class="relative flex-1 max-w-md">
            <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"></i>
            <input type="text" id="ticketSearch" oninput="filterTickets()" placeholder="Search by Ticket ID, Customer, or Subject..." 
                   class="w-full pl-12 pr-4 py-3.5 bg-white border border-slate-200 rounded-2xl text-sm outline-none transition-all focus:ring-2 focus:ring-emerald-500/20">
        </div>
        <select id="priorityFilter" onchange="filterTickets()" class="bg-white border border-slate-200 rounded-2xl px-6 py-3 text-sm font-bold text-slate-600 outline-none cursor-pointer">
            <option value="all">All Priorities</option>
            <option value="high">High Priority</option>
            <option value="medium">Medium Priority</option>
            <option value="low">Low Priority</option>
        </select>
    </div>

    <div class="card-replica overflow-hidden mb-10">
        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead class="bg-slate-50/50">
                    <tr>
                        <th class="px-8 py-5 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Ticket ID</th>
                        <th class="px-8 py-5 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Customer</th>
                        <th class="px-8 py-5 text-[10px] font-bold text-slate-400 uppercase tracking-widest hidden md:table-cell">Subject</th>
                        <th class="px-8 py-5 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Priority</th>
                        <th class="px-8 py-5 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Status</th>
                        <th class="px-8 py-5 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-right">Actions</th>
                    </tr>
                </thead>
                <tbody id="tickets-body" class="divide-y divide-slate-50 text-sm font-medium">
    <tr th:each="t : ${tickets}" class="hover:bg-slate-50/50 transition-colors ticket-row" 
        th:data-priority="${t.priority != null ? t.priority.toLowerCase() : ''}" 
        th:data-search="${(t.user != null ? t.user.username.toLowerCase() : '') + ' ' + t.id + ' ' + (t.subject != null ? t.subject.toLowerCase() : '')}">
        
        <td class="px-8 py-5 font-mono text-slate-400 font-bold uppercase text-xs" th:text="${'TKT-' + t.id}"></td>
        <td class="px-8 py-5">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[10px] font-bold"
                     th:text="${t.user != null ? #strings.substring(t.user.username,0,1).toUpperCase() : '?'}"></div>
                <span class="text-slate-900 font-bold" th:text="${t.user != null ? t.user.username : 'Unknown'}"></span>
            </div>
        </td>
        <td class="px-8 py-5 hidden md:table-cell text-slate-500 font-medium" th:text="${t.subject}"></td>
        <td class="px-8 py-5">
            <span class="status-pill" th:classappend="${t.priority == 'High' ? 'priority-high' : 'bg-blue-100 text-blue-700'}" th:text="${t.priority}"></span>
        </td>
        <td class="px-8 py-5">
            <span class="px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest"
                  th:classappend="${t.ticketStatus == 'OPEN' ? 'status-open' : 'bg-emerald-100 text-emerald-700'}" th:text="${t.ticketStatus}"></span>
        </td>
        <td class="px-8 py-5 text-right">
    <button th:attr="onclick='openTicketModal(\'' + ${t.id} + '\', \'' + ${t.user?.username ?: 'Unknown'} + '\', \'' + ${t.user?.email ?: ''} + '\', \'' + ${#temporals.format(t.createdDate, 'yyyy-MM-dd')} + '\', \'' + ${t.subject} + '\', \'' + ${t.issueDescription} + '\', \'' + ${t.priority.toUpperCase()} + '\', \'' + ${t.ticketStatus.toUpperCase()} + '\')'"
        class="p-2 text-slate-300 hover:text-emerald-600 transition-colors">
    <i data-lucide="eye" class="w-5 h-5"></i>
</button>
</td>
    </tr>
</tbody>
            </table>
        </div>
    </div>
</main>

<div id="ticketModal" class="hidden-modal fixed inset-0 modal-backdrop flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-lg rounded-[32px] shadow-2xl relative overflow-hidden transition-all scale-100">
        <button onclick="closeModal()" class="absolute top-6 right-6 text-slate-300 hover:text-slate-600 transition-colors z-20"><i data-lucide="x" class="w-6 h-6"></i></button>
        <div class="p-10">
    <h3 class="text-[11px] font-bold text-slate-400 uppercase tracking-widest mb-6">Ticket Details</h3>

    <div class="flex justify-between items-start mb-8 tracking-tighter">
        <span id="m-id" class="text-xl font-bold font-mono text-slate-900 uppercase"></span>
        <div class="flex gap-2">
            <span id="m-priority" class="status-pill"></span>
            <span id="m-status" class="status-pill uppercase"></span>
        </div>
    </div>

    <div class="grid grid-cols-2 gap-y-8 mb-8 border-b border-slate-50 pb-8">
        <div>
            <p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Customer Name</p>
            <p id="m-name" class="font-bold text-slate-900 text-sm tracking-tight"></p>
        </div>
        <div>
            <p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Email</p>
            <p id="m-email" class="font-bold text-slate-900 text-sm tracking-tight"></p>
        </div>
        <div>
            <p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Subject</p>
            <p id="m-subject" class="font-bold text-slate-900 text-sm tracking-tight"></p>
        </div>
        <div>
            <p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Created</p>
            <p id="m-date" class="font-bold text-slate-900 text-sm tracking-tight"></p>
        </div>
    </div>

    <div class="mb-8">
        <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Customer Message</p>
        <div id="m-message" class="text-sm bg-slate-50 p-4 rounded-2xl text-slate-600 border border-slate-100"></div>
    </div>

    <form th:action="@{/agent/support/response}" method="POST" class="space-y-6">
        <input type="hidden" name="ticketId" id="modal-ticket-id-hidden">
        <div class="space-y-2">
            <p class="text-[11px] font-bold text-slate-900 uppercase">Add Response Note</p>
            <textarea name="message" id="response-input" rows="3" required 
                      class="w-full border border-slate-200 rounded-2xl p-4 text-sm outline-none focus:ring-2 focus:ring-blue-500/20" 
                      placeholder="Enter your response to the customer..."></textarea>
        </div>
        <div class="flex gap-4">
            <button type="submit" class="flex-1 btn-blue-gradient text-white font-bold py-4 rounded-2xl text-[13px] flex items-center justify-center gap-2">
                <i data-lucide="send" class="w-4 h-4"></i> Add Response
            </button>
            <button type="button" onclick="submitResolve()" class="flex-1 bg-white border border-slate-200 text-slate-600 font-bold py-4 rounded-2xl text-[13px] hover:bg-slate-50 transition-colors flex items-center justify-center gap-2">
                <i data-lucide="check-circle" class="w-4 h-4"></i> Mark Resolved
            </button>
        </div>
    </form>
</div>
    </div>
</div>

<script>
    lucide.createIcons();

function openTicketModal(id, name, email, date, subject, message, priority, status) {
    document.getElementById('modal-ticket-id-hidden').value = id;
    
    // Set text content
    document.getElementById('m-id').innerText = 'TKT-' + id;
    document.getElementById('m-name').innerText = name;
    document.getElementById('m-email').innerText = email;
    document.getElementById('m-date').innerText = date;
    document.getElementById('m-subject').innerText = subject;
    document.getElementById('m-message').innerText = message;

    // 1. STYLE THE PRIORITY BADGE
    const pBadge = document.getElementById('m-priority');
    pBadge.innerText = priority;
    let pClass = "status-pill px-3 py-1 rounded-full text-[10px] font-bold ";
    
    // Logic for Priority colors
    if (priority === 'HIGH') pClass += "bg-red-100 text-red-600";
    else if (priority === 'MEDIUM') pClass += "bg-blue-100 text-blue-600";
    else if (priority === 'LOW') pClass += "bg-slate-100 text-slate-500"; // Fixed for LOW
    pBadge.className = pClass;

    // 2. STYLE THE STATUS BADGE
    const sBadge = document.getElementById('m-status');
    sBadge.innerText = status;
    let sClass = "status-pill px-3 py-1 rounded-full text-[10px] font-bold ";
    
    // Logic for Status colors
    if (status === 'OPEN') sClass += "bg-amber-100 text-amber-600";
    else if (status === 'RESOLVED') sClass += "bg-emerald-100 text-emerald-600"; // Fixed for RESOLVED
    else sClass += "bg-slate-100 text-slate-500";
    sBadge.className = sClass;

    document.getElementById('ticketModal').classList.remove('hidden-modal');
    document.body.style.overflow = 'hidden';
}

// Logic to send a resolve request
function submitResolve() {
    const id = document.getElementById('modal-ticket-id-hidden').value;
    if (!id) return; // Guard clause if no ID is found
    
    if(confirm('Mark this ticket as resolved?')) {
        // Create a dynamic form to send the POST request
        const form = document.createElement('form');
        form.method = 'POST';
        // Ensure this matches the @PostMapping exactly: /support/{id}/resolve
        form.action = '/support/' + id + '/resolve';
        document.body.appendChild(form);
        form.submit();
    }
}
    function closeModal() {
        document.getElementById('ticketModal').classList.add('hidden-modal');
        document.body.style.overflow = 'auto';
    }

    function filterTickets() {
        const search = document.getElementById('ticketSearch').value.toLowerCase();
        const priority = document.getElementById('priorityFilter').value.toLowerCase();
        const rows = document.querySelectorAll('.ticket-row');

        rows.forEach(row => {
            const text = row.getAttribute('data-search') || "";
            const rowPriority = row.getAttribute('data-priority') || "";
            const matchSearch = text.includes(search);
            const matchPriority = priority === 'all' || rowPriority === priority;
            row.style.display = (matchSearch && matchPriority) ? '' : 'none';
        });
    }

    function logout() { window.location.href = '/logout'; }
</script>
</body>
</html>




--------------------------------USER TEMPLATES----------------------------


<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>My Claims  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb"
          }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .nav-item:hover {
      background: #f1f5f9;
    }
  </style>
</head>

<body class="bg-slate-50 text-gray-900">

<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col z-40">
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg leading-tight">HIMS</p>
      <p class="text-xs text-gray-500">User Portal</p>
    </div>
  </div>

  <nav class="flex-1 p-4 space-y-1">
    <div onclick="go('/user/dashboard')" class="nav-item text-gray-600">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
    </div>
    <div onclick="go('/user/policies')" class="nav-item text-gray-600">
      <i data-lucide="file-text" class="w-5 h-5"></i> My Policies
    </div>
    <div class="nav-item bg-primary/10 text-primary font-semibold">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i> Claims
    </div>
    <div onclick="go('/user/payments')" class="nav-item text-gray-600">
      <i data-lucide="credit-card" class="w-5 h-5"></i> Payments
    </div>
    <div onclick="go('/user/support')" class="nav-item text-gray-600">
      <i data-lucide="headphones" class="w-5 h-5"></i> Support
    </div>
    <div onclick="go('/user/profile')" class="nav-item text-gray-600">
      <i data-lucide="user" class="w-5 h-5"></i> Profile
    </div>
  </nav>

  <div class="p-4 border-t">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 transition-colors">
      <i data-lucide="log-out" class="w-5 h-5"></i> Logout
    </button>
  </div>
</aside>

<main class="ml-64 p-12">

  <div th:if="${success}" class="mb-6 p-4 rounded-2xl bg-emerald-50 border border-emerald-100 text-emerald-700 flex items-center gap-3 animate-pulse">
    <i data-lucide="check-circle" class="w-5 h-5"></i>
    <span class="font-medium" th:text="${success}"></span>
  </div>

  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-10">
    <div>
      <h1 class="text-4xl font-bold text-slate-900 tracking-tight mb-1">My Claims</h1>
      <p class="text-slate-500 font-medium">Track your reimbursement requests in real-time</p>
    </div>

    <a th:href="@{/user/submit-claim}"
       class="inline-flex items-center px-6 py-3 bg-primary text-white rounded-2xl hover:bg-blue-700 font-bold shadow-lg shadow-blue-500/20 transition-all transform hover:-translate-y-1">
      <i data-lucide="plus" class="w-5 h-5 mr-2"></i>
      Submit New Claim
    </a>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
    <div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm">
      <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-1">Pending</p>
      <p class="text-3xl font-bold text-amber-500" th:text="${statPending}">0</p>
    </div>
    <div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm">
      <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-1">Approved</p>
      <p class="text-3xl font-bold text-emerald-500" th:text="${statApproved}">0</p>
    </div>
    <div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm">
      <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-1">Rejected</p>
      <p class="text-3xl font-bold text-rose-500" th:text="${statRejected}">0</p>
    </div>
  </div>

  <div class="relative mb-8 max-w-md">
    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"></i>
    <input id="search" oninput="filterClaims()" placeholder="Search claims by ID..."
           class="w-full pl-12 pr-4 py-4 border border-slate-200 rounded-2xl bg-white focus:ring-4 focus:ring-blue-500/10 outline-none transition-all">
  </div>

  <div class="bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden">
    <table class="w-full border-collapse">
      <thead class="bg-slate-50/50 border-b border-slate-100">
        <tr class="text-left">
          <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Claim ID</th>
          <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Policy Type</th>
          <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Requested Amount</th>
          <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Date Submitted</th>
          <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Status</th>
          <th class="px-8 py-5 text-right text-[11px] font-bold text-slate-400 uppercase tracking-widest">Action</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-50">
        <tr th:each="c : ${claims}" class="hover:bg-slate-50/50 transition-colors claim-row">
          <td class="px-8 py-5">
            <div class="flex items-center gap-4">
              <div class="w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600">
                <i data-lucide="clipboard-check" class="w-5 h-5"></i>
              </div>
              <span class="font-mono font-bold text-blue-600 text-sm" th:text="${'CLM-' + c.id}">CLM-000</span>
            </div>
          </td>
          <td class="px-8 py-5 font-semibold text-slate-700" th:text="${c.policy.coverageType}">Policy</td>
          <td class="px-8 py-5 font-bold text-slate-900" th:text="${'$' + c.claimAmount}">$0.00</td>
          <td class="px-8 py-5 text-slate-500 text-sm" th:text="${#temporals.format(c.claimDate, 'MMM dd, yyyy')}">Date</td>
          <td class="px-8 py-5">
            <span th:classappend="${c.claimStatus == 'PENDING' ? 'bg-amber-100 text-amber-700' : (c.claimStatus == 'APPROVED' ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700')}"
                  class="px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest" th:text="${c.claimStatus}">
              STATUS
            </span>
          </td>
          <td class="px-8 py-5 text-right">
            <button class="p-2 hover:bg-slate-100 rounded-xl text-slate-400 transition-colors">
              <i data-lucide="eye" class="w-5 h-5"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div th:if="${claims == null or claims.size() == 0}" class="py-24 text-center">
      <div class="w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-6">
        <i data-lucide="clipboard-x" class="w-10 h-10 text-slate-300"></i>
      </div>
      <p class="text-slate-500 font-medium text-lg">No claims found in your account history.</p>
      <p class="text-slate-400 text-sm">Submit your first claim using the button above.</p>
    </div>
  </div>
</main>

<script>
  lucide.createIcons();

  function go(url) { window.location.href = url; }
  function logout() { location.href = '/logout'; }

  // Client-side search logic
  function filterClaims() {
    const query = document.getElementById('search').value.toLowerCase();
    const rows = document.querySelectorAll('.claim-row');
    rows.forEach(row => {
      const text = row.innerText.toLowerCase();
      row.style.display = text.includes(query) ? '' : 'none';
    });
  }
</script>

</body>
</html>

-------------------------------------------------------


<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Create Support Ticket  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { primary: "#2563eb" } } }
    }
  </script>
  <style>
    .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-radius: 12px; cursor: pointer; transition: background 0.2s; }
    .nav-item:hover { background: #f1f5f9; }
  </style>
</head>
<body class="bg-slate-50 text-gray-900">

<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col">
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div><p class="font-bold text-lg">HIMS</p><p class="text-sm text-gray-500">User Portal</p></div>
  </div>
  <nav class="flex-1 p-4 space-y-1">
    <div onclick="go('/user/dashboard')" class="nav-item"><i data-lucide="layout-dashboard"></i> Dashboard</div>
    <div onclick="go('/user/policies')" class="nav-item"><i data-lucide="file-text"></i> My Policies</div>
    <div onclick="go('/user/claims')" class="nav-item"><i data-lucide="clipboard-list"></i> Claims</div>
    <div onclick="go('/user/payments')" class="nav-item"><i data-lucide="credit-card"></i> Payments</div>
    <div onclick="go('/user/support')" class="nav-item bg-primary/10 text-primary"><i data-lucide="headphones"></i> Support</div>
    <div onclick="go('/user/profile')" class="nav-item"><i data-lucide="user"></i> Profile</div>
  </nav>
</aside>

<main class="ml-64 p-8">
  <a th:href="@{/user/support}" class="inline-flex items-center gap-2 text-gray-500 hover:text-gray-900 transition mb-6">
    <i data-lucide="arrow-left" class="w-4 h-4"></i> Back to Support
  </a>

  <div class="max-w-3xl">
    <h1 class="text-3xl font-bold mb-1">Create Support Ticket</h1>
    <p class="text-gray-500 mb-8">Describe your issue and we'll help you resolve it</p>

    <!-- <form th:action="@{/user/support/create}" method="POST" class="bg-white border rounded-2xl p-8 shadow-sm">
      <div class="mb-8">
        <label class="block text-sm font-medium mb-2">Description</label>
        <textarea name="issue_description" rows="6" required
          placeholder="Please provide as much detail as possible about your issue..."
          class="w-full px-4 py-3 rounded-xl border resize-none focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"></textarea>
      </div>

      <div class="flex gap-3 p-4 rounded-xl bg-blue-50 border border-blue-200 mb-8">
        <i data-lucide="alert-circle" class="w-5 h-5 text-primary mt-0.5"></i>
        <div>
          <p class="text-sm font-medium">Response Time</p>
          <p class="text-sm text-gray-600">Our support team typically responds within 24 hours.</p>
        </div>
      </div>

      <div class="flex gap-4">
<a th:href="@{/user/support}" class="flex-1 h-12 rounded-xl border flex items-center justify-center font-medium hover:bg-slate-100 transition">Cancel</a>        <button type="submit" class="flex-1 h-12 rounded-xl bg-primary text-white font-semibold shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all">
          Submit Ticket
        </button>
      </div>
    </form> -->

   <form th:action="@{/user/support/create}" method="POST" class="bg-white border rounded-2xl p-8 shadow-sm space-y-6">
  <div>
    <label class="block text-sm font-medium mb-2">Subject</label>
    <input type="text" name="subject" placeholder="Brief description of your issue"
           class="w-full h-12 px-4 rounded-xl border focus:ring-2 focus:ring-primary/20 outline-none">
  </div>

  <div class="grid grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium mb-2">Category</label>
      <select name="category" required class="w-full h-12 px-4 rounded-xl border outline-none">
        <option value="Claims">Claims</option>
        <option value="Policies">Policies</option>
        <option value="Payments">Payments</option>
        <option value="Account">Account</option>
        <option value="Technical Issue">Technical Issue</option>
        <option value="Other">Other</option>
      </select>
    </div>
    <div>
      <label class="block text-sm font-medium mb-2">Priority</label>
      <select name="priority" required class="w-full h-12 px-4 rounded-xl border outline-none">
        <option value="Low">Low</option>
        <option value="Medium">Medium</option>
        <option value="High">High</option>
      </select>
    </div>
  </div>

  <div>
    <label class="block text-sm font-medium mb-2">Description</label>
    <textarea name="issue_description" rows="6" required 
              placeholder="Please provide detail..."
              class="w-full px-4 py-3 rounded-xl border outline-none"></textarea>
  </div>

  <div class="flex gap-4">
    <a th:href="@{/user/support}" class="flex-1 h-12 rounded-xl border flex items-center justify-center">Cancel</a>
    <button type="submit" class="flex-1 h-12 rounded-xl bg-primary text-white font-semibold shadow-lg">Submit Ticket</button>
  </div>
</form>
  </div>
</main>

<script>
  function go(path) { window.location.href = path; }
  lucide.createIcons();
</script>
</body>
</html>

------------------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Dashboard  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb"
          }
        }
      }
    }
  </script>

  <style>
    /* Hover animation same feel as React */
    .card-hover {
      transition: all 0.25s ease;
    }
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }
  </style>
</head>

<body class="bg-slate-50 text-gray-900">

<!-- SIDEBAR -->
<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col">

  <!-- LOGO -->
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg">HIMS</p>
      <p class="text-sm text-gray-500">User Portal</p>
    </div>
  </div>

  <!-- NAV -->
  <nav class="flex-1 p-4 space-y-1">
    <div onclick="go('/user/dashboard')" class="nav-item bg-primary/10 text-primary">
      <i data-lucide="layout-dashboard"></i> Dashboard
    </div>
    <div onclick="go('/user/policies')" class="nav-item">
      <i data-lucide="file-text"></i> My Policies
    </div>
    <div onclick="go('/user/claims')" class="nav-item">
      <i data-lucide="clipboard-list"></i> Claims
    </div>
    <div onclick="go('/user/payments')" class="nav-item">
      <i data-lucide="credit-card"></i> Payments
    </div>
    <div onclick="go('/user/support')" class="nav-item">
      <i data-lucide="headphones"></i> Support
    </div>
    <div onclick="go('/user/profile')" class="nav-item">
      <i data-lucide="user"></i> Profile
    </div>
  </nav>

  <!-- LOGOUT -->
  <div class="p-4 border-t">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50">
      <i data-lucide="log-out"></i> Logout
    </button>
  </div>
</aside>

<!-- MAIN -->
<main class="ml-64 p-8">

  <!-- HEADER -->
  <h1 class="text-3xl font-bold mb-1">Welcome back, <span th:text="${userName}">John</span>!</h1>
  <p class="text-gray-500 mb-8">Here's an overview of your insurance portfolio</p>

  <!-- KPI CARDS -->
  <section class="grid grid-cols-4 gap-6 mb-10">

    <div onclick="go('/user/policies')" class="card-hover cursor-pointer bg-white p-6 rounded-2xl border flex justify-between">
      <div>
        <p class="text-sm text-gray-500">Active Policies</p>
        <p class="text-2xl font-bold" th:text="${policies != null ? policies.size() : 0}">0</p>
        <p class="text-sm text-green-600">+1 this month</p>
      </div>
      <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
        <i data-lucide="file-text" class="text-primary"></i>
      </div>
    </div>

    <div onclick="go('/user/claims')" class="card-hover cursor-pointer bg-white p-6 rounded-2xl border flex justify-between">
      <div>
        <p class="text-sm text-gray-500">Claims Submitted</p>
        <p class="text-2xl font-bold" th:text="${claimsCount}">0</p>
        <p class="text-sm text-gray-500" th:text="${pendingClaimsCount} + ' pending'">0 pending</p>
      </div>
      <div class="w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center">
        <i data-lucide="clipboard-list" class="text-primary"></i>
      </div>
    </div>

    <div onclick="go('/user/payments')" class="card-hover cursor-pointer bg-white p-6 rounded-2xl border flex justify-between">
      <div>
        <p class="text-sm text-gray-500">Pending Payments</p>
        <p class="text-2xl font-bold" th:text="${paymentsDue}">0</p>
        <p class="text-sm text-red-500">Payments due</p>
      </div>
      <div class="w-12 h-12 bg-violet-100 rounded-xl flex items-center justify-center">
        <i data-lucide="credit-card" class="text-primary"></i>
      </div>
    </div>

    <div onclick="go('/user/support')" class="card-hover cursor-pointer bg-white p-6 rounded-2xl border flex justify-between">
      <div>
        <p class="text-sm text-gray-500">Support Tickets</p>
        <p class="text-2xl font-bold" th:text="${ticketsOpen}">0</p>
        <p class="text-sm text-gray-500" th:text="${ticketsOpen} + ' open'">0 open</p>
      </div>
      <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center">
        <i data-lucide="headphones" class="text-primary"></i>
      </div>
    </div>

  </section>

  <!-- QUICK ACTIONS -->
  <h2 class="text-xl font-semibold mb-4">Quick Actions</h2>
  <section class="grid grid-cols-4 gap-6 mb-10">

    <div onclick="go('/user/policies')" class="card-hover cursor-pointer bg-white p-6 rounded-2xl border flex items-center gap-4">
      <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center">
        <i data-lucide="file-text" class="text-white"></i>
      </div>
      <p class="font-semibold">View Policies</p>
    </div>

    <div onclick="go('/user/submit-claim')" class="card-hover cursor-pointer bg-white p-6 rounded-2xl border flex items-center gap-4">
      <div class="w-12 h-12 bg-emerald-500 rounded-xl flex items-center justify-center">
        <i data-lucide="clipboard-list" class="text-white"></i>
      </div>
      <p class="font-semibold">Submit Claim</p>
    </div>

    <div onclick="go('/user/payments')" class="card-hover cursor-pointer bg-white p-6 rounded-2xl border flex items-center gap-4">
      <div class="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center">
        <i data-lucide="credit-card" class="text-white"></i>
      </div>
      <p class="font-semibold">Make Payment</p>
    </div>

    <div onclick="go('/user/support')" class="card-hover cursor-pointer bg-white p-6 rounded-2xl border flex items-center gap-4">
      <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center">
        <i data-lucide="headphones" class="text-white"></i>
      </div>
      <p class="font-semibold">Get Support</p>
    </div>

  </section>

  <!-- RECENT ACTIVITY -->
  <section class="bg-white border rounded-2xl p-6">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-semibold">Recent Activity</h2>
      <button onclick="go('/user/claims')" class="flex items-center gap-2 text-sm font-medium hover:text-primary">
        View All <i data-lucide="arrow-right"></i>
      </button>
    </div>

    <div class="space-y-4">
      <div class="flex justify-between items-center p-4 rounded-xl bg-slate-50 hover:bg-slate-100 transition">
        <div class="flex items-center gap-4">
          <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center">
            <i data-lucide="check-circle" class="text-green-600"></i>
          </div>
          <div>
            <p class="font-medium">Claim #CLM-2024-001</p>
            <p class="text-sm text-gray-500">Medical checkup reimbursement</p>
          </div>
        </div>
        <div class="text-right">
          <span class="text-xs bg-green-100 text-green-700 px-3 py-1 rounded-full">Approved</span>
          <p class="text-xs text-gray-400 mt-1">2 hours ago</p>
        </div>
      </div>
    </div>
  </section>

</main>

<script>
  function go(path) {
    window.location.href = path;
  }

  function logout() {
    window.location.href = '/logout';
  }

  lucide.createIcons();
</script>

<style>
  .nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .nav-item:hover {
    background: #f1f5f9;
  }
</style>

</body>
</html>



--------------------------------------------


<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Marketplace  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { primary: "#2563eb" }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-radius: 12px; cursor: pointer; transition: background 0.2s; }
    .nav-item:hover { background: #f1f5f9; }
    .gradient-header { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
    .plan-card { transition: all 0.3s ease; }
    .plan-card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1); }
  </style>
</head>

<body class="bg-slate-50 text-gray-900 flex">

<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col z-40">
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg leading-tight">HIMS</p>
      <p class="text-xs text-gray-500">User Portal</p>
    </div>
  </div>

  <nav class="flex-1 p-4 space-y-1">
    <div onclick="go('/user/dashboard')" class="nav-item text-gray-600"><i data-lucide="layout-dashboard"></i> Dashboard</div>
    <div onclick="go('/user/policies')" class="nav-item bg-primary/10 text-primary font-semibold"><i data-lucide="file-text"></i> My Policies</div>
    <div onclick="go('/user/claims')" class="nav-item text-gray-600"><i data-lucide="clipboard-list"></i> Claims</div>
    <div onclick="go('/user/payments')" class="nav-item text-gray-600"><i data-lucide="credit-card"></i> Payments</div>
    <div onclick="go('/user/support')" class="nav-item text-gray-600"><i data-lucide="headphones"></i> Support</div>
    <div onclick="go('/user/profile')" class="nav-item text-gray-600"><i data-lucide="user"></i> Profile</div>
  </nav>

  <div class="p-4 border-t">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 transition-colors">
      <i data-lucide="log-out"></i> Logout
    </button>
  </div>
</aside>

<main class="ml-64 flex-1 p-12">
  
  <button onclick="go('/user/policies')" class="flex items-center gap-2 text-slate-500 hover:text-primary mb-8 transition-colors group font-medium">
    <i data-lucide="arrow-left" class="w-4 h-4 group-hover:-translate-x-1 transition-transform"></i> 
    Back to My Policies
  </button>

  <div class="mb-10">
    <h1 class="text-4xl font-bold text-slate-900 tracking-tight mb-1">Policy Marketplace</h1>
    <p class="text-slate-500 font-medium">Browse and enroll in insurance plans created by the Admin</p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    <div th:each="plan : ${plans}" class="bg-white rounded-[40px] border border-slate-200 shadow-sm overflow-hidden plan-card flex flex-col">
      <div class="gradient-header p-10 text-white relative">
        <div class="flex items-center justify-between mb-6">
          <div class="w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center shadow-inner">
            <i data-lucide="shield" class="w-8 h-8"></i>
          </div>
          <span class="px-4 py-1.5 rounded-full bg-emerald-500/20 text-[10px] font-bold uppercase tracking-widest backdrop-blur-md">Available</span>
        </div>
        <h3 class="text-2xl font-bold leading-tight" th:text="${plan.coverageType}">Plan Name</h3>
        <p class="text-white/70 text-sm mt-1">Official Marketplace Plan</p>
      </div>

      <div class="p-10 space-y-6 flex-1">
        <div class="flex justify-between items-center">
          <span class="flex items-center gap-2 text-sm text-slate-400 font-medium"><i data-lucide="dollar-sign" class="w-4 h-4"></i> Coverage</span>
          <span class="font-bold text-slate-900 text-lg" th:text="${'$' + #numbers.formatDecimal(plan.coverageAmount, 0, 'COMMA', 0, 'POINT')}">$0</span>
        </div>

        <div class="flex justify-between items-center">
          <span class="flex items-center gap-2 text-sm text-slate-400 font-medium"><i data-lucide="dollar-sign" class="w-4 h-4"></i> Premium</span>
          <span class="font-bold text-slate-900" th:text="${'$' + plan.premiumAmount + '/month'}">$0</span>
        </div>

        <form th:action="@{/user/policies/enroll}" method="post">
    <input type="hidden" name="planId" th:value="${plan.id}" />
    
    <button type="submit" 
            class="w-full mt-8 bg-primary text-white py-5 rounded-[24px] font-bold hover:bg-blue-700 shadow-xl shadow-blue-500/20 transition-all transform hover:-translate-y-1 active:scale-95">
      Enroll in this Plan
    </button>
</form>
      </div>
    </div>

    <div th:if="${plans == null or plans.isEmpty()}" class="col-span-full py-24 text-center">
      <p class="text-slate-500 font-medium">The Admin has not published any marketplace plans yet.</p>
    </div>
  </div>
</main>

<script>
  lucide.createIcons();
  function go(url) { window.location.href = url; }
  function logout() { location.href = '/logout'; }
</script>

</body>
</html>




-------------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Payment History  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb"
          }
        }
      }
    }
  </script>

  <style>
    .nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .nav-item:hover {
    background: #f1f5f9;
  }
  </style>
</head>

<body class="bg-slate-50 text-gray-900">

<!-- ================= SIDEBAR (LOCKED UI) ================= -->
<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col">

  <!-- LOGO -->
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg">HIMS</p>
      <p class="text-sm text-gray-500">User Portal</p>
    </div>
  </div>

  <!-- NAV -->
  <nav class="flex-1 p-4 space-y-1">
    <div class="nav-item" onclick="go('/user/dashboard')">
      <i data-lucide="layout-dashboard"></i>Dashboard
    </div>
    <div class="nav-item" onclick="go('/user/policies')">
      <i data-lucide="file-text"></i>My Policies
    </div>
    <div class="nav-item" onclick="go('/user/claims')">
      <i data-lucide="clipboard-list"></i>Claims
    </div>
    <div class="nav-item bg-primary/10 text-primary" onclick="go('/user/payments')">
      <i data-lucide="credit-card"></i>Payments
    </div>
    <div class="nav-item" onclick="go('/user/support')">
      <i data-lucide="headphones"></i>Support
    </div>
    <div class="nav-item" onclick="go('/user/profile')">
      <i data-lucide="user"></i>Profile
    </div>
  </nav>

  <!-- LOGOUT -->
  <div class="p-4 border-t">
    <button onclick="go('/login')"
      class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<!-- ================= MAIN ================= -->
<main class="ml-64 p-8">

  <!-- BACK -->
  <a th:href="@{/user/payments}"
     class="inline-flex items-center gap-2 text-gray-500 hover:text-gray-900 mb-6 font-medium">
    <i data-lucide="arrow-left" class="w-4 h-4"></i>
    Back to Payments
  </a>

  <!-- HEADER -->
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold mb-1">Payment History</h1>
      <p class="text-gray-500">View all your past transactions</p>
    </div>

    <button class="inline-flex items-center px-4 py-2 border rounded-xl font-semibold hover:bg-slate-50">
      <i data-lucide="download" class="w-4 h-4 mr-2"></i>
      Export
    </button>
  </div>

  <!-- SEARCH -->
  <div class="relative max-w-md mb-6">
    <i data-lucide="search"
       class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"></i>
    <input
      placeholder="Search payments..."
      class="w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-primary outline-none" />
  </div>

  <!-- ================= TABLE ================= -->
  <div class="bg-white rounded-2xl border shadow-sm overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-slate-100 text-sm text-gray-500">
          <tr>
            <th class="px-6 py-4 text-left">Transaction ID</th>
            <th class="px-6 py-4 text-left">Policy</th>
            <th class="px-6 py-4 text-left">Amount</th>
            <th class="px-6 py-4 text-left">Date</th>
            <th class="px-6 py-4 text-left">Payment Method</th>
            <th class="px-6 py-4 text-left">Status</th>
            <th class="px-6 py-4 text-right">Receipt</th>
          </tr>
        </thead>

        <tbody>

          <!-- ROW -->
          <tr class="border-t hover:bg-slate-50 transition">
            <td class="px-6 py-4">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center">
                  <i data-lucide="credit-card" class="w-5 h-5 text-primary"></i>
                </div>
                <span class="font-mono font-medium">PAY-2024-001</span>
              </div>
            </td>

            <td class="px-6 py-4">
              <p class="font-semibold">Health Plus Premium</p>
              <p class="text-xs text-gray-500">POL-2024-001</p>
            </td>

            <td class="px-6 py-4 font-semibold">$150.00</td>

            <td class="px-6 py-4 text-gray-500">Nov 1, 2024</td>

            <td class="px-6 py-4 text-sm text-gray-600">Visa  4242</td>

            <td class="px-6 py-4">
              <span class="px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700">
                Approved
              </span>
            </td>

            <td class="px-6 py-4 text-right">
              <button class="p-2 rounded-lg hover:bg-slate-100">
                <i data-lucide="download" class="w-4 h-4"></i>
              </button>
            </td>
          </tr>

          <!-- Duplicate rows can be added exactly same -->

        </tbody>
      </table>
    </div>
  </div>

</main>

<script>
  function go(p){ window.location.href = p }
  function logout(){ window.location.href = '/logout' }
  lucide.createIcons();
</script>

</body>
</html>




------------------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Payments  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb"
          }
        }
      }
    }
  </script>

  <style>
  .nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .nav-item:hover {
    background: #f1f5f9;
  }
  </style>
</head>

<body class="bg-slate-50 text-gray-900">

<!-- ================= SIDEBAR (LOCKED  SAME EVERYWHERE) ================= -->
<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col">

  <!-- LOGO -->
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg">HIMS</p>
      <p class="text-sm text-gray-500">User Portal</p>
    </div>
  </div>

  <!-- NAV -->
  <nav class="flex-1 p-4 space-y-1">
    <div class="nav-item" onclick="go('/user/dashboard')">
      <i data-lucide="layout-dashboard"></i>Dashboard
    </div>
    <div class="nav-item" onclick="go('/user/policies')">
      <i data-lucide="file-text"></i>My Policies
    </div>
    <div class="nav-item" onclick="go('/user/claims')">
      <i data-lucide="clipboard-list"></i>Claims
    </div>
    <div class="nav-item bg-primary/10 text-primary" onclick="go('/user/payments')">
      <i data-lucide="credit-card"></i>Payments
    </div>
    <div class="nav-item" onclick="go('/user/support')">
      <i data-lucide="headphones"></i>Support
    </div>
    <div class="nav-item" onclick="go('/user/profile')">
      <i data-lucide="user"></i>Profile
    </div>
  </nav>

  <!-- LOGOUT -->
  <div class="p-4 border-t">
    <button onclick="go('/login')"
      class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<!-- ================= MAIN ================= -->
<main class="ml-64 p-8">

  <!-- HEADER -->
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold mb-1">Make Payment</h1>
      <p class="text-gray-500">Pay your insurance premiums securely</p>
    </div>

    <a th:href="@{/user/payment-history}"
       class="inline-flex items-center px-4 py-2 border rounded-xl font-semibold hover:bg-slate-50">
      <i data-lucide="history" class="w-4 h-4 mr-2"></i>
      Payment History
    </a>
  </div>

  <div th:if="${success}" class="mb-4 p-3 bg-green-50 text-green-800 rounded">[[${success}]]</div>
  <div th:if="${error}" class="mb-4 p-3 bg-red-50 text-red-800 rounded">[[${error}]]</div>

  <div class="grid lg:grid-cols-3 gap-8">

    <!-- ================= PAYMENT FORM ================= -->
    <div class="lg:col-span-2">
      <form th:action="@{/user/payments/pay}" method="post" class="bg-white rounded-2xl border shadow-sm p-8 space-y-6">
        <!-- POLICY -->
        <div>
          <label class="text-sm font-semibold mb-2 block">Select Policy</label>
          <select name="policyId" class="w-full h-11 px-4 border rounded-xl focus:ring-2 focus:ring-primary outline-none" required>
            <option th:if="${policies == null or #lists.isEmpty(policies)}">No policies available</option>
            <option th:each="p : ${policies}" th:value="${p.id}" th:text="${p.policyNumber + ' - ' + p.policyType}">Policy</option>
          </select>
        </div>

        <!-- AMOUNT -->
        <div>
          <label class="flex items-center gap-2 text-sm font-semibold mb-2">
            <i data-lucide="dollar-sign" class="w-4 h-4 text-gray-400"></i>
            Amount
          </label>
          <input step="0.01" type="number" name="amount" required
            class="w-full h-11 px-4 border rounded-xl focus:ring-2 focus:ring-primary outline-none" />
        </div>

        <!-- CARD INFO -->
        <div class="border-t pt-6">
          <h3 class="text-lg font-semibold flex items-center gap-2 mb-4">
            <i data-lucide="credit-card" class="w-5 h-5 text-primary"></i>
            Card Information
          </h3>

          <div class="space-y-4">

            <div>
              <label class="text-sm font-semibold mb-2 block">Cardholder Name</label>
              <input type="text"
                class="w-full h-11 px-4 border rounded-xl focus:ring-2 focus:ring-primary outline-none" />
            </div>

            <div>
              <label class="text-sm font-semibold mb-2 block">Card Number</label>
              <input type="text"
                placeholder="1234 5678 9012 3456"
                class="w-full h-11 px-4 border rounded-xl focus:ring-2 focus:ring-primary outline-none" />
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="flex items-center gap-2 text-sm font-semibold mb-2">
                  <i data-lucide="calendar" class="w-4 h-4 text-gray-400"></i>
                  Expiry Date
                </label>
                <input type="text"
                  placeholder="MM/YY"
                  class="w-full h-11 px-4 border rounded-xl focus:ring-2 focus:ring-primary outline-none" />
              </div>

              <div>
                <label class="flex items-center gap-2 text-sm font-semibold mb-2">
                  <i data-lucide="lock" class="w-4 h-4 text-gray-400"></i>
                  CVV
                </label>
                <input type="text"
                  placeholder="123"
                  class="w-full h-11 px-4 border rounded-xl focus:ring-2 focus:ring-primary outline-none" />
              </div>
            </div>

          </div>
        </div>

        <button
          class="w-full py-3 bg-primary text-white rounded-xl font-semibold hover:bg-blue-700 flex items-center justify-center gap-2">
          <i data-lucide="lock" class="w-4 h-4"></i>
          Pay Securely
        </button>

      </form>
    </div>

    <!-- ================= SUMMARY ================= -->
    <div>
      <div class="bg-white rounded-2xl border shadow-sm p-6 sticky top-8">
        <h3 class="text-lg font-semibold mb-4">Payment Summary</h3>

        <div class="space-y-3 mb-6 text-sm">
          <div class="flex justify-between">
            <span class="text-gray-500">Premium Amount</span>
            <span class="font-medium">$150.00</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-500">Processing Fee</span>
            <span class="font-medium">$0.00</span>
          </div>
          <div class="border-t pt-3 flex justify-between">
            <span class="font-semibold">Total</span>
            <span class="text-xl font-bold text-primary">$150.00</span>
          </div>
        </div>

        <div class="space-y-3 text-sm text-gray-500">
          <div class="flex items-center gap-2">
            <i data-lucide="check-circle" class="w-4 h-4 text-green-600"></i>
            Secure 256-bit SSL encryption
          </div>
          <div class="flex items-center gap-2">
            <i data-lucide="check-circle" class="w-4 h-4 text-green-600"></i>
            Instant payment confirmation
          </div>
          <div class="flex items-center gap-2">
            <i data-lucide="check-circle" class="w-4 h-4 text-green-600"></i>
            Email receipt
          </div>
        </div>
      </div>
    </div>

  </div>
</main>

<script>
  function go(p){ window.location.href = p }
  function logout(){ window.location.href = '/logout' }
  lucide.createIcons();
</script>

</body>
</html>




---------------------------------------------


<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>My Policies  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb"
          }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    
    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .nav-item:hover {
      background: #f1f5f9;
    }

    .policy-card {
      transition: all 0.3s ease;
    }

    .policy-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);
    }

    /* Exact design gradient from your screenshot */
    .gradient-header {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }
  </style>
</head>

<body class="bg-slate-50 text-gray-900 flex">

<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col z-40">
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg leading-tight">HIMS</p>
      <p class="text-xs text-gray-500">User Portal</p>
    </div>
  </div>

  <nav class="flex-1 p-4 space-y-1">
    <div onclick="go('/user/dashboard')" class="nav-item text-gray-600">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
    </div>
    <div class="nav-item bg-primary/10 text-primary font-semibold">
      <i data-lucide="file-text" class="w-5 h-5"></i> My Policies
    </div>
    <div onclick="go('/user/claims')" class="nav-item text-gray-600">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i> Claims
    </div>
    <div onclick="go('/user/payments')" class="nav-item text-gray-600">
      <i data-lucide="credit-card" class="w-5 h-5"></i> Payments
    </div>
    <div onclick="go('/user/support')" class="nav-item text-gray-600">
      <i data-lucide="headphones" class="w-5 h-5"></i> Support
    </div>
    <div onclick="go('/user/profile')" class="nav-item text-gray-600">
      <i data-lucide="user" class="w-5 h-5"></i> Profile
    </div>
  </nav>

  <div class="p-4 border-t">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 transition-colors">
      <i data-lucide="log-out" class="w-5 h-5"></i> Logout
    </button>
  </div>
</aside>

<main class="ml-64 flex-1 p-12">
  
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-10">
    <div>
      <h1 class="text-4xl font-bold text-slate-900 tracking-tight mb-1">My Policies</h1>
      <p class="text-slate-500 font-medium">View and manage all your insurance policies</p>
    </div>

    <button onclick="go('/user/marketplace')" 
            class="inline-flex items-center px-6 py-3 bg-primary text-white rounded-2xl hover:bg-blue-700 font-bold shadow-lg shadow-blue-500/20 transition-all">
      <i data-lucide="layout-grid" class="w-5 h-5 mr-2"></i>
      Browse New Policies
    </button>
  </div>

  <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    
    <div th:if="${policies == null or policies.isEmpty()}" class="col-span-full py-24 text-center">
        <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm">
          <i data-lucide="file-x" class="w-10 h-10 text-slate-300"></i>
        </div>
        <p class="text-slate-500 font-medium text-lg">No active policies found.</p>
        <p class="text-slate-400 text-sm mt-1">Visit the marketplace to protect your health today.</p>
    </div>

    <div th:each="p : ${policies}" class="bg-white rounded-[40px] border border-slate-200 shadow-sm overflow-hidden policy-card flex flex-col">
      
      <div class="gradient-header p-10 text-white relative">
        <div class="flex items-center justify-between mb-6">
          <div class="w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center shadow-inner">
            <i data-lucide="shield" class="w-8 h-8"></i>
          </div>
          <span class="px-4 py-1.5 rounded-full bg-white/20 text-[10px] font-bold uppercase tracking-widest backdrop-blur-md" 
                th:text="${p.policyStatus}">Active</span>
        </div>
        <h3 class="text-2xl font-bold leading-tight" th:text="${p.coverageType}">Policy Name</h3>
        <p class="text-white/70 text-sm mt-1" th:text="${p.coverageType}">Category</p>
      </div>

      <div class="p-10 space-y-6 flex-1">
        
        <div class="flex justify-between items-center">
          <span class="text-slate-400 text-sm font-medium">Policy Number</span>
          <span class="font-mono font-bold text-slate-700 uppercase text-sm" th:text="${p.policyNumber}">POL-CODE</span>
        </div>

        <div class="flex justify-between items-center">
          <span class="flex items-center gap-2 text-sm text-slate-400 font-medium">
            <i data-lucide="dollar-sign" class="w-4 h-4"></i> Coverage
          </span>
          <span class="font-bold text-slate-900 text-lg" 
                th:text="${'$' + #numbers.formatDecimal(p.coverageAmount, 0, 'COMMA', 0, 'POINT')}">$0.00</span>
        </div>

        <div class="flex justify-between items-center">
          <span class="flex items-center gap-2 text-sm text-slate-400 font-medium">
            <i data-lucide="dollar-sign" class="w-4 h-4"></i> Premium
          </span>
          <span class="font-bold text-slate-900" th:text="${'$' + p.premiumAmount + '/month'}">$0.00</span>
        </div>

        <div class="flex justify-between items-center">
          <span class="flex items-center gap-2 text-sm text-slate-400 font-medium">
            <i data-lucide="calendar" class="w-4 h-4"></i> Valid Until
          </span>
          <span class="font-semibold text-slate-600" 
                th:text="${#temporals.format(p.endDate, 'MMM dd, yyyy')}">Date</span>
        </div>

        <a th:href="@{/user/policy-details(id=${p.id})}" 
           class="w-full mt-8 inline-flex justify-center items-center gap-3 px-8 py-5 border border-slate-200 rounded-[24px] hover:bg-slate-50 font-bold text-slate-700 transition-all active:scale-[0.98]">
          View Details
          <i data-lucide="arrow-right" class="w-5 h-5 text-slate-400"></i>
        </a>
      </div>
    </div>
  </section>
</main>

<script>
  lucide.createIcons();
  function go(url) { window.location.href = url; }
  function logout() { location.href = '/logout'; }
</script>

</body>
</html>




---------------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Policy Details  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb",
            success: "#16a34a"
          }
        }
      }
    }
  </script>

  <style>
    .gradient-primary {
      background: linear-gradient(135deg, #2563eb, #3b82f6);
    }
    .card-hover {
      transition: all 0.25s ease;
    }
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }
    .nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .nav-item:hover {
    background: #f1f5f9;
  }
  </style>
</head>

<body class="bg-slate-50 text-gray-900">

<!-- SIDEBAR -->
<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col">

  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg">HIMS</p>
      <p class="text-sm text-gray-500">User Portal</p>
    </div>
  </div>

  <nav class="flex-1 p-4 space-y-1">
    <div onclick="go('/user/dashboard')" class="nav-item">
      <i data-lucide="layout-dashboard"></i> Dashboard
    </div>
    <div onclick="go('/user/policies')" class="nav-item bg-primary/10 text-primary">
      <i data-lucide="file-text"></i> My Policies
    </div>
    <div onclick="go('/user/claims')" class="nav-item">
      <i data-lucide="clipboard-list"></i> Claims
    </div>
    <div onclick="go('/user/payments')" class="nav-item">
      <i data-lucide="credit-card"></i> Payments
    </div>
    <div onclick="go('/user/support')" class="nav-item">
      <i data-lucide="headphones"></i> Support
    </div>
    <div onclick="go('/user/profile')" class="nav-item">
      <i data-lucide="user"></i> Profile
    </div>
  </nav>

  <div class="p-4 border-t">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50">
      <i data-lucide="log-out"></i> Logout
    </button>
  </div>
</aside>

<!-- MAIN -->
<main class="ml-64 p-8">

  <!-- BACK -->
  <button onclick="go('/user/policies')" class="inline-flex items-center gap-2 text-gray-500 hover:text-gray-900 mb-6">
    <i data-lucide="arrow-left" class="w-4 h-4"></i>
    Back to Policies
  </button>

  <!-- HEADER CARD -->
  <div class="bg-white rounded-2xl border shadow-sm overflow-hidden mb-8">

    <div class="gradient-primary p-8 text-white">
      <div class="flex items-start justify-between">
        <div class="flex items-center gap-4">
          <div class="w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center">
            <i data-lucide="shield" class="w-8 h-8"></i>
          </div>
          <div>
            <h1 class="text-3xl font-bold mb-1">Health Plus Premium</h1>
            <p class="text-white/80">Comprehensive Health Insurance</p>
            <p class="text-sm text-white/60 font-mono mt-2">POL-2024-001</p>
          </div>
        </div>

        <span class="px-4 py-1 rounded-full bg-white/20 text-sm">
          Active
        </span>
      </div>
    </div>

    <div class="p-8 grid md:grid-cols-4 gap-6">

      <div class="text-center p-4 rounded-xl bg-slate-100">
        <i data-lucide="dollar-sign" class="w-6 h-6 text-primary mx-auto mb-2"></i>
        <p class="text-sm text-gray-500 mb-1">Coverage Amount</p>
        <p class="text-2xl font-bold">$500,000</p>
      </div>

      <div class="text-center p-4 rounded-xl bg-slate-100">
        <i data-lucide="dollar-sign" class="w-6 h-6 text-primary mx-auto mb-2"></i>
        <p class="text-sm text-gray-500 mb-1">Monthly Premium</p>
        <p class="text-2xl font-bold">$150/month</p>
      </div>

      <div class="text-center p-4 rounded-xl bg-slate-100">
        <i data-lucide="calendar" class="w-6 h-6 text-primary mx-auto mb-2"></i>
        <p class="text-sm text-gray-500 mb-1">Start Date</p>
        <p class="text-lg font-semibold">January 1, 2024</p>
      </div>

      <div class="text-center p-4 rounded-xl bg-slate-100">
        <i data-lucide="calendar" class="w-6 h-6 text-primary mx-auto mb-2"></i>
        <p class="text-sm text-gray-500 mb-1">End Date</p>
        <p class="text-lg font-semibold">December 31, 2024</p>
      </div>

    </div>
  </div>

  <!-- CONTENT -->
  <div class="grid lg:grid-cols-3 gap-8">

    <!-- BENEFITS -->
    <div class="lg:col-span-2 bg-white rounded-2xl border shadow-sm p-6">
      <h2 class="text-xl font-semibold mb-6">Coverage Benefits</h2>

      <div class="grid md:grid-cols-2 gap-4">
        <div class="flex items-center gap-3 p-3 rounded-xl bg-slate-100">
          <i data-lucide="check-circle" class="w-5 h-5 text-success"></i>
          Hospital room and board coverage
        </div>
        <div class="flex items-center gap-3 p-3 rounded-xl bg-slate-100">
          <i data-lucide="check-circle" class="w-5 h-5 text-success"></i>
          Surgical procedures
        </div>
        <div class="flex items-center gap-3 p-3 rounded-xl bg-slate-100">
          <i data-lucide="check-circle" class="w-5 h-5 text-success"></i>
          Prescription medications
        </div>
        <div class="flex items-center gap-3 p-3 rounded-xl bg-slate-100">
          <i data-lucide="check-circle" class="w-5 h-5 text-success"></i>
          Preventive care and wellness
        </div>
      </div>
    </div>

    <!-- DOCUMENTS -->
    <div class="bg-white rounded-2xl border shadow-sm p-6">
      <h2 class="text-xl font-semibold mb-6">Documents</h2>

      <div class="space-y-3">

        <div class="flex items-center justify-between p-4 rounded-xl bg-slate-100 hover:bg-slate-200 transition cursor-pointer">
          <div class="flex items-center gap-3">
            <i data-lucide="file-text" class="w-5 h-5 text-primary"></i>
            <div>
              <p class="font-medium text-sm">Policy Document</p>
              <p class="text-xs text-gray-500">2.4 MB</p>
            </div>
          </div>
          <i data-lucide="download" class="w-4 h-4 text-gray-500"></i>
        </div>

        <div class="flex items-center justify-between p-4 rounded-xl bg-slate-100 hover:bg-slate-200 transition cursor-pointer">
          <div class="flex items-center gap-3">
            <i data-lucide="file-text" class="w-5 h-5 text-primary"></i>
            <div>
              <p class="font-medium text-sm">Terms & Conditions</p>
              <p class="text-xs text-gray-500">1.2 MB</p>
            </div>
          </div>
          <i data-lucide="download" class="w-4 h-4 text-gray-500"></i>
        </div>

      </div>

      <div class="mt-6 pt-6 border-t">
        <button class="w-full px-4 py-2 border rounded-xl hover:bg-slate-50">
          Download All Documents
        </button>
      </div>
    </div>

  </div>

</main>

<script>
  function go(p){ window.location.href = p }
  function logout(){ window.location.href = '/logout' }
  lucide.createIcons()
</script>

</body>
</html>




-------------------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Profile  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb"
          }
        }
      }
    }
  </script>

  <style>
    .nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .nav-item:hover {
    background: #f1f5f9;
  }
    .gradient-primary {
      background: linear-gradient(135deg, #2563eb, #3b82f6);
    }
  </style>
</head>

<body class="bg-slate-50 text-gray-900">

<!-- ================= SIDEBAR ================= -->
<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col">

  <!-- LOGO -->
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg">HIMS</p>
      <p class="text-sm text-gray-500">User Portal</p>
    </div>
  </div>

  <!-- NAV -->
  <nav class="flex-1 p-4 space-y-1">
    <div class="nav-item" onclick="go('/user/dashboard')">
      <i data-lucide="layout-dashboard"></i>Dashboard
    </div>
    <div class="nav-item" onclick="go('/user/policies')">
      <i data-lucide="file-text"></i>My Policies
    </div>
    <div class="nav-item" onclick="go('/user/claims')">
      <i data-lucide="clipboard-list"></i>Claims
    </div>
    <div class="nav-item" onclick="go('/user/payments')">
      <i data-lucide="credit-card"></i>Payments
    </div>
    <div class="nav-item" onclick="go('/user/support')">
      <i data-lucide="headphones"></i>Support
    </div>
    <div class="nav-item bg-primary/10 text-primary">
      <i data-lucide="user"></i>Profile
    </div>
  </nav>

  <!-- LOGOUT -->
  <div class="p-4 border-t">
    <button onclick="go('/logout')"
      class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<!-- ================= MAIN ================= -->
<main class="ml-64 p-8">

  <div class="max-w-3xl">

    <!-- HEADER -->
    <h1 class="text-3xl font-bold mb-1">My Profile</h1>
    <p class="text-gray-500 mb-8">Manage your personal information</p>

    <!-- PROFILE CARD -->
    <div class="bg-white rounded-2xl border p-8 mb-8">
      <div class="flex items-center gap-6">
        <div class="relative">
          <div class="w-24 h-24 rounded-2xl gradient-primary flex items-center justify-center text-white text-3xl font-bold">
            JD
          </div>
          <button class="absolute -bottom-2 -right-2 w-8 h-8 rounded-full bg-white border shadow flex items-center justify-center hover:bg-slate-50">
            <i data-lucide="camera" class="w-4 h-4 text-gray-500"></i>
          </button>
        </div>
        <div>
          <h2 class="text-2xl font-bold">John Doe</h2>
          <p class="text-gray-500">john.doe@example.com</p>
          <p class="text-sm text-gray-400 mt-1">Member since January 2024</p>
        </div>
      </div>
    </div>

    <!-- FORM -->
    <form class="bg-white rounded-2xl border p-8">
      <h3 class="text-xl font-semibold mb-6">Personal Information</h3>

      <div class="space-y-6">

        <!-- NAME -->
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="text-sm font-medium flex items-center gap-2 mb-1">
              <i data-lucide="user" class="w-4 h-4 text-gray-400"></i>
              First Name
            </label>
            <input value="John"
              class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-primary outline-none">
          </div>
          <div>
            <label class="text-sm font-medium mb-1 block">Last Name</label>
            <input value="Doe"
              class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-primary outline-none">
          </div>
        </div>

        <!-- EMAIL -->
        <div>
          <label class="text-sm font-medium flex items-center gap-2 mb-1">
            <i data-lucide="mail" class="w-4 h-4 text-gray-400"></i>
            Email Address
          </label>
          <input value="john.doe@example.com"
            class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-primary outline-none">
        </div>

        <!-- PHONE -->
        <div>
          <label class="text-sm font-medium flex items-center gap-2 mb-1">
            <i data-lucide="phone" class="w-4 h-4 text-gray-400"></i>
            Phone Number
          </label>
          <input value="+1 (555) 123-4567"
            class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-primary outline-none">
        </div>

        <!-- ADDRESS -->
        <div>
          <label class="text-sm font-medium flex items-center gap-2 mb-1">
            <i data-lucide="map-pin" class="w-4 h-4 text-gray-400"></i>
            Address
          </label>
          <input value="123 Main Street, New York, NY 10001"
            class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-primary outline-none">
        </div>

        <!-- DOB -->
        <div>
          <label class="text-sm font-medium flex items-center gap-2 mb-1">
            <i data-lucide="calendar" class="w-4 h-4 text-gray-400"></i>
            Date of Birth
          </label>
          <input type="date" value="1990-05-15"
            class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-primary outline-none">
        </div>

        <!-- SAVE -->
        <div class="flex justify-end pt-4 border-t">
          <button
            class="flex items-center gap-2 bg-primary text-white px-6 py-2 rounded-xl font-semibold hover:bg-blue-700">
            <i data-lucide="save" class="w-4 h-4"></i>
            Save Changes
          </button>
        </div>

      </div>
    </form>

    <!-- SECURITY -->
    <div class="bg-white rounded-2xl border p-8 mt-8">
      <h3 class="text-xl font-semibold mb-6">Security</h3>

      <div class="space-y-4">
        <div class="flex items-center justify-between p-4 rounded-xl bg-slate-100">
          <div>
            <p class="font-medium">Password</p>
            <p class="text-sm text-gray-500">Last changed 30 days ago</p>
          </div>
          <button class="border px-4 py-2 rounded-xl hover:bg-white font-semibold">
            Change Password
          </button>
        </div>

        <div class="flex items-center justify-between p-4 rounded-xl bg-slate-100">
          <div>
            <p class="font-medium">Two-Factor Authentication</p>
            <p class="text-sm text-gray-500">Add an extra layer of security</p>
          </div>
          <button class="border px-4 py-2 rounded-xl hover:bg-white font-semibold">
            Enable
          </button>
        </div>
      </div>
    </div>

  </div>
</main>

<script>
  function go(page) {
    window.location.href = page;
  }
  lucide.createIcons();
</script>

</body>
</html>





------------------------------------------------------



<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Submit Claim  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb"
          }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .nav-item:hover {
      background: #f1f5f9;
    }
  </style>
</head>

<body class="bg-slate-50 text-gray-900 flex">

<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col z-40">
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg leading-tight">HIMS</p>
      <p class="text-xs text-gray-500">User Portal</p>
    </div>
  </div>

  <nav class="flex-1 p-4 space-y-1">
    <div onclick="go('/user/dashboard')" class="nav-item text-gray-600">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
    </div>
    <div onclick="go('/user/policies')" class="nav-item text-gray-600">
      <i data-lucide="file-text" class="w-5 h-5"></i> My Policies
    </div>
    <div onclick="go('/user/claims')" class="nav-item bg-primary/10 text-primary font-semibold">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i> Claims
    </div>
    <div onclick="go('/user/payments')" class="nav-item text-gray-600">
      <i data-lucide="credit-card" class="w-5 h-5"></i> Payments
    </div>
    <div onclick="go('/user/support')" class="nav-item text-gray-600">
      <i data-lucide="headphones" class="w-5 h-5"></i> Support
    </div>
    <div onclick="go('/user/profile')" class="nav-item text-gray-600">
      <i data-lucide="user" class="w-5 h-5"></i> Profile
    </div>
  </nav>

  <div class="p-4 border-t">
    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 transition-colors">
      <i data-lucide="log-out" class="w-5 h-5"></i> Logout
    </button>
  </div>
</aside>

<main class="ml-64 flex-1 p-12">
  
  <button onclick="go('/user/claims')" class="flex items-center gap-2 text-slate-500 hover:text-primary mb-8 transition-colors group font-medium">
    <i data-lucide="arrow-left" class="w-4 h-4 group-hover:-translate-x-1 transition-transform"></i> 
    Back to My Claims
  </button>

  <div class="max-w-xl mx-auto bg-white p-10 rounded-[40px] border border-slate-200 shadow-xl relative">
    <div class="flex flex-col items-center mb-10 text-center">
      <div class="w-16 h-16 rounded-2xl bg-blue-50 flex items-center justify-center text-primary mb-4 shadow-sm">
        <i data-lucide="file-plus" class="w-8 h-8"></i>
      </div>
      <h2 class="text-3xl font-bold text-slate-900 tracking-tight">Raise a New Claim</h2>
      <p class="text-slate-500 text-sm mt-1 max-w-xs mx-auto">Please provide the details below to request a reimbursement for your medical expenses.</p>
    </div>

    <form th:action="@{/user/claims/submit}" method="post" class="space-y-8">
      
      <div class="space-y-2">
        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Select Policy to Claim Against</label>
        <div class="relative">
          <select name="policyId" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all appearance-none cursor-pointer text-slate-700" required>
            <option value="" disabled selected>Select an active policy...</option>
            <option th:each="p : ${policies}" th:value="${p.id}" th:text="${p.coverageType + ' (ID: ' + p.policyNumber + ')'}"></option>
          </select>
          <div class="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400">
            <i data-lucide="chevron-down" class="w-5 h-5"></i>
          </div>
        </div>
      </div>

      <div class="space-y-2">
        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Requested Claim Amount ($)</label>
        <div class="relative">
          <div class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">
            <i data-lucide="dollar-sign" class="w-5 h-5"></i>
          </div>
          <input type="number" name="amount" step="0.01" placeholder="0.00" 
                 class="w-full pl-12 pr-4 py-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all font-bold text-lg text-slate-900" required />
        </div>
        <div class="flex items-center gap-2 text-[10px] text-slate-400 ml-1 italic mt-1">
          <i data-lucide="info" class="w-3 h-3"></i>
          <span>Final payout amount is subject to review and approval by an insurance administrator.</span>
        </div>
      </div>

      <div class="pt-4">
        <button type="submit" class="w-full bg-primary text-white py-5 rounded-[24px] font-bold hover:bg-blue-700 transition-all shadow-xl shadow-blue-500/30 transform hover:-translate-y-1 active:scale-[0.98] flex items-center justify-center gap-3">
          <i data-lucide="send" class="w-5 h-5"></i>
          Submit Claim Request
        </button>
        <p class="text-center text-[10px] text-slate-400 mt-4 uppercase tracking-widest">Secured by HIMS Claims Engine</p>
      </div>
    </form>
  </div>
</main>

<script>
  lucide.createIcons();

  function go(url) { window.location.href = url; }
  function logout() { location.href = '/logout'; }
</script>

</body>
</html>



-------------------------------------------------



<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Support Center  HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { primary: "#2563eb" } } }
    }
  </script>
  <style>
    .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-radius: 12px; cursor: pointer; transition: background 0.2s; }
    .nav-item:hover { background: #f1f5f9; }
    .card-hover { transition: all 0.25s ease; }
    .card-hover:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.06); }
  </style>
</head>
<body class="bg-slate-50 text-gray-900">

<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col">
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg">HIMS</p>
      <p class="text-sm text-gray-500">User Portal</p>
    </div>
  </div>
  <nav class="flex-1 p-4 space-y-1">
    <div class="nav-item" onclick="go('/user/dashboard')"><i data-lucide="layout-dashboard"></i>Dashboard</div>
    <div class="nav-item" onclick="go('/user/policies')"><i data-lucide="file-text"></i>My Policies</div>
    <div class="nav-item" onclick="go('/user/claims')"><i data-lucide="clipboard-list"></i>Claims</div>
    <div class="nav-item" onclick="go('/user/payments')"><i data-lucide="credit-card"></i>Payments</div>
    <div class="nav-item bg-primary/10 text-primary"><i data-lucide="headphones"></i>Support</div>
    <div class="nav-item" onclick="go('/user/profile')"><i data-lucide="user"></i>Profile</div>
  </nav>
  <div class="p-4 border-t">
    <button onclick="go('/logout')" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>

<main class="ml-64 p-8">
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold mb-1">Support Center</h1>
      <p class="text-gray-500">Get help and track your support tickets</p>
    </div>
    <button onclick="go('/user/create-ticket')" class="flex items-center gap-2 px-5 py-2 bg-primary text-white rounded-xl font-semibold hover:bg-blue-700 transition">
      <i data-lucide="plus"></i>Create Ticket
    </button>
  </div>

  <div class="grid grid-cols-3 gap-6 mb-8">
    <div class="bg-white rounded-2xl border p-6 flex items-center gap-4">
      <div class="w-12 h-12 rounded-xl bg-sky-100 flex items-center justify-center">
        <i data-lucide="message-square" class="text-sky-600"></i>
      </div>
      <div>
        <p class="text-2xl font-bold" th:text="${#lists.size(tickets.?[ticketStatus == 'OPEN' || ticketStatus == 'RESPONDED'])}">0</p>
        <p class="text-sm text-gray-500">Active Tickets</p>
      </div>
    </div>
    <div class="bg-white rounded-2xl border p-6 flex items-center gap-4">
      <div class="w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center">
        <i data-lucide="clock" class="text-amber-600"></i>
      </div>
      <div>
        <p class="text-2xl font-bold">24h</p>
        <p class="text-sm text-gray-500">Avg Response</p>
      </div>
    </div>
    <div class="bg-white rounded-2xl border p-6 flex items-center gap-4">
      <div class="w-12 h-12 rounded-xl bg-emerald-100 flex items-center justify-center">
        <i data-lucide="check-circle" class="text-emerald-600"></i>
      </div>
      <div>
        <p class="text-2xl font-bold" th:text="${#lists.size(tickets.?[ticketStatus == 'RESOLVED'])}">0</p>
        <p class="text-sm text-gray-500">Resolved</p>
      </div>
    </div>
  </div>

  <!-- <div class="space-y-4">
    <div th:each="ticket : ${tickets}" class="bg-white rounded-2xl border p-6 card-hover">
      <div class="flex justify-between items-start">
        <div>
          <div class="flex items-center gap-2 mb-2">
            <span class="font-mono text-sm text-gray-500" th:text="'TKT-' + ${ticket.id}">TKT-ID</span>

<a th:href="@{'/support/view/' + ${ticket.id}}" class="px-4 py-2 rounded-lg border font-semibold hover:bg-slate-50">
    View Details
</a>
            <span th:text="${ticket.ticketStatus}" 
                  th:classappend="${ticket.ticketStatus == 'OPEN' ? 'bg-blue-100 text-blue-700' : (ticket.ticketStatus == 'RESOLVED' ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700')}"
                  class="px-3 py-1 text-xs rounded-full font-semibold">Status </span>
          </div>
          <h3 class="text-lg font-semibold mb-2" th:text="${ticket.issueDescription}">Subject</h3>
          <div class="text-xs text-gray-500 mt-3">
            Created: <span th:text="${#temporals.format(ticket.createdDate, 'MMM dd, yyyy')}">Date</span>
          </div>
        </div>
        <a th:href="@{'/support/view/' + ${ticket.ticketId}}" class="px-4 py-2 rounded-lg border font-semibold hover:bg-slate-50">
          View Details
        </a>
      </div>
    </div>
    
    <div th:if="${#lists.isEmpty(tickets)}" class="text-center py-12 bg-white rounded-2xl border border-dashed">
        <p class="text-gray-500">No support tickets found.</p>
    </div>
  </div> -->
<div class="space-y-4">
  <div th:each="ticket : ${tickets}" class="bg-white rounded-2xl border p-6 card-hover">
    <div class="flex justify-between items-start">
      <div>
        <div class="flex items-center gap-2 mb-2">
          <span class="font-mono text-sm text-gray-500" th:text="'TKT-2025-' + ${ticket.id}">TKT-ID</span>
          
          <span th:text="${ticket.ticketStatus}" 
                th:classappend="${ticket.ticketStatus == 'OPEN' ? 'bg-blue-100 text-blue-700' : 'bg-emerald-100 text-emerald-700'}"
                class="px-3 py-1 text-xs rounded-full font-semibold">Status</span>

          <span th:text="${ticket.priority}" 
                th:classappend="${ticket.priority == 'High' ? 'bg-red-100 text-red-700' : 'bg-amber-100 text-amber-700'}"
                class="px-3 py-1 text-xs rounded-full font-semibold">Priority</span>
        </div>
        
        <h3 class="text-xl font-bold mb-1" th:text="${ticket.subject}">Subject Heading</h3>
        
        <p class="text-gray-500 text-sm mb-4" th:text="${ticket.issueDescription}">Description subtext...</p>
        
        <div class="text-xs text-gray-500">
          Created: <span th:text="${#temporals.format(ticket.createdDate, 'MMM dd, yyyy')}">Date</span>
        </div>
      </div>

      <a th:href="@{'/support/view/' + ${ticket.id}}" class="px-6 py-2 rounded-xl border font-semibold hover:bg-slate-50 transition">
        View Details
      </a>
    </div>
  </div>
</div>
  
  <div th:if="${#lists.isEmpty(tickets)}" class="text-center py-12 bg-white rounded-2xl border border-dashed">
      <p class="text-gray-500">No support tickets found.</p>
  </div>
</div>
</main>

<script>
  function go(page) { window.location.href = page; }
  lucide.createIcons();
</script>
</body>
</html>




----------------------------------------------------



<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Ticket Details  HIMS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        tailwind.config = {
            theme: { extend: { colors: { primary: "#2563eb" } } }
        }
    </script>
    <style>
        /* Professional Sidebar Typography: Non-bold */
        .nav-item { 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            padding: 10px 16px; 
            border-radius: 12px; 
            cursor: pointer; 
            transition: all 0.2s; 
            font-weight: 400; 
            color: #64748b;
        }
        .nav-item:hover { background: #f1f5f9; color: #1e293b; }
        .nav-active { background: #eff6ff; color: #2563eb; }
        .nav-item i { width: 18px; height: 18px; stroke-width: 1.5; }
    </style>
</head>
<body class="bg-slate-50 text-gray-900">

<aside class="fixed top-0 left-0 w-64 h-full bg-white border-r flex flex-col">
  <div class="p-6 border-b flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center">
      <i data-lucide="shield" class="text-white"></i>
    </div>
    <div>
      <p class="font-bold text-lg">HIMS</p>
      <p class="text-sm text-gray-500">User Portal</p>
    </div>
  </div>
  <nav class="flex-1 p-4 space-y-1">
    <div class="nav-item" onclick="go('/user/dashboard')"><i data-lucide="layout-dashboard"></i>Dashboard</div>
    <div class="nav-item" onclick="go('/user/policies')"><i data-lucide="file-text"></i>My Policies</div>
    <div class="nav-item" onclick="go('/user/claims')"><i data-lucide="clipboard-list"></i>Claims</div>
    <div class="nav-item" onclick="go('/user/payments')"><i data-lucide="credit-card"></i>Payments</div>
    <div class="nav-item bg-primary/10 text-primary"><i data-lucide="headphones"></i>Support</div>
    <div class="nav-item" onclick="go('/user/profile')"><i data-lucide="user"></i>Profile</div>
  </nav>
  <div class="p-4 border-t">
    <button onclick="go('/logout')" class="w-full flex items-center gap-3 p-3 rounded-xl text-red-600 hover:bg-red-50 font-semibold">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</aside>


<main class="ml-64 min-h-screen flex flex-col">
    
    <nav class="bg-white border-b border-gray-100 sticky top-0 z-10 w-full h-16 flex items-center">
        <div class="w-full px-8 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <a th:href="@{/user/support}" class="p-2 hover:bg-gray-100 rounded-full transition">
                    <i data-lucide="arrow-left" class="w-5 h-5 text-gray-500"></i>
                </a>
                <h1 class="text-gray-800 font-medium text-lg" th:text="'Ticket TKT-' + ${ticket.id}">Ticket Details</h1>
            </div>
            <span th:text="${ticket.ticketStatus}" 
                  th:classappend="${ticket.ticketStatus == 'OPEN' ? 'bg-blue-50 text-blue-600 border-blue-100' : 'bg-green-50 text-green-600 border-green-100'}"
                  class="px-4 py-1 rounded-full text-xs font-semibold border uppercase tracking-wider">
            </span>
        </div>
    </nav>

    <div class="p-8 max-w-7xl w-full mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">
        
        <div class="lg:col-span-2 space-y-6">
            <div class="bg-white border border-gray-100 rounded-2xl p-6 shadow-sm">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center font-bold text-primary" 
                         th:text="${#strings.substring(ticket.user.username,0,1).toUpperCase()}">U</div>
                    <div>
                        <p class="font-semibold text-gray-900" th:text="${ticket.user.username}">Username</p>
                        <p class="text-xs text-gray-400" th:text="${#temporals.format(ticket.createdDate, 'MMM dd, HH:mm')}">Date</p>
                    </div>
                </div>
                <p class="text-gray-600 leading-relaxed text-[15px]" th:text="${ticket.issueDescription}"></p>
            </div>

            <div th:each="resp : ${responses}" class="flex flex-col space-y-2 mb-6" 
     th:classappend="${resp.responder.role == 'USER' ? 'items-start' : 'items-end'}">
    <div class="max-w-[85%] rounded-2xl p-4 shadow-sm border border-gray-100 bg-white">
        <div class="flex items-center gap-2 mb-2 text-[11px] text-gray-400">
            <span class="font-bold" th:text="${resp.responder.username}">User</span>
            <span></span>
            <span th:text="${#temporals.format(resp.createdAt, 'MMM dd, HH:mm')}">Time</span>
        </div>
        <p class="text-[15px] text-gray-700" th:text="${resp.message}"></p>
    </div>
</div>

<div class="bg-white border border-gray-100 rounded-2xl p-6 shadow-sm">
    <form th:action="@{'/support/' + ${ticket.id} + '/response'}" method="POST">
        <textarea name="message" rows="3" required placeholder="Type your message here..."
                  class="w-full px-0 py-2 border-none focus:ring-0 resize-none text-[15px]"></textarea>
        <div class="flex justify-end pt-4 border-t border-gray-50">
            <button type="submit" class="bg-primary text-white px-8 py-2.5 rounded-xl font-medium flex items-center gap-2">
                <i data-lucide="send" class="w-4 h-4"></i> Send Reply
            </button>
        </div>
    </form>
</div>
        </div>

        <div class="space-y-6">
            <div class="bg-white border border-gray-100 rounded-2xl p-6 shadow-sm">
                <h2 class="text-sm font-semibold text-gray-900 mb-6 flex items-center gap-2">
                    <i data-lucide="info" class="w-4 h-4 text-primary"></i> Ticket Information
                </h2>
                
                <div class="space-y-6">
                    <div>
                        <p class="text-[12px] text-gray-400 uppercase tracking-wide mb-1">Subject</p>
                        <p class="font-medium text-gray-700" th:text="${ticket.subject}">Subject Line</p>
                    </div>
                    <div class="flex justify-between">
                        <div>
                            <p class="text-[12px] text-gray-400 uppercase tracking-wide mb-1">Category</p>
                            <span class="px-2.5 py-1 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium" 
                                  th:text="${ticket.category}">Category</span>
                        </div>
                        <div>
                            <p class="text-[12px] text-gray-400 uppercase tracking-wide mb-1 text-right">Priority</p>
                            <span th:text="${ticket.priority}" 
                                  th:classappend="${ticket.priority == 'High' ? 'bg-red-50 text-red-600 border-red-100' : 'bg-amber-50 text-amber-600 border-amber-100'}"
                                  class="px-2.5 py-1 text-xs rounded-lg font-bold border uppercase tracking-wider">Priority</span>
                        </div>
                    </div>
                    <div>
                        <p class="text-[12px] text-gray-400 uppercase tracking-wide mb-1">Date Created</p>
                        <p class="font-medium text-gray-700" 
                           th:text="${#temporals.format(ticket.createdDate, 'EEEE, MMM dd, yyyy')}">Date</p>
                    </div>
                </div>

                <div th:if="${ticket.ticketStatus != 'RESOLVED'}" class="mt-8 pt-6 border-t border-gray-100">
                    <form th:action="@{'/support/' + ${ticket.id} + '/resolve'}" method="POST">
                        <button type="submit" 
                                class="w-full py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600 transition flex items-center justify-center gap-2 shadow-sm">
                            <i data-lucide="check-circle" class="w-5 h-5"></i>
                            Mark as Resolved
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>

<script>
    function go(path) { window.location.href = path; }
    lucide.createIcons();
</script>
</body>
</html>



--------------------------------------------------

LANDIPAGE, REGISTER, LOGIN,NOTFOUND PAGES



-------------------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>HIMS  Health Insurance Made Simple</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#2563eb'
          }
        }
      }
    }
  </script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    html { scroll-behavior: smooth; }
  </style>
</head>

<body id="top" class="bg-white text-gray-900">

<!-- ================= NAVBAR ================= -->
<header class="fixed top-0 w-full z-50 border-b bg-white/80 backdrop-blur">
  <div class="max-w-7xl mx-auto h-16 flex items-center justify-between px-6">

    <!-- Logo -->
    <div class="flex items-center gap-2 font-bold text-lg text-primary">
      <div class="w-9 h-9 rounded-full bg-primary flex items-center justify-center shadow">
        <i data-lucide="shield" class="w-5 h-5 text-white"></i>
      </div>
      HIMS
    </div>

    <!-- Nav Links -->
    <nav class="hidden md:flex gap-6 text-sm font-medium text-gray-600">
      <a href="#top" class="hover:text-primary transition-colors">Home</a>
      <a href="#features" class="hover:text-primary transition-colors">Features</a>
      <a href="#contact" class="hover:text-primary transition-colors">Contact</a>
    </nav>

    <!-- Actions -->
    <div class="flex items-center gap-4">
      <a th:href="@{/login}"
         class="text-sm font-medium hover:text-primary transition-colors">
        Sign In
      </a>
      <a th:href="@{/register}"
         class="px-5 py-2.5 rounded-xl bg-primary text-white font-semibold
                shadow-lg hover:shadow-xl hover:-translate-y-0.5
                transition-all duration-300">
        Get Started
      </a>
    </div>
  </div>
</header>

<!-- ================= HERO ================= -->
<section class="pt-32 pb-20 px-4 relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-br from-sky-50 via-white to-blue-50"></div>
  <div class="absolute top-20 right-0 w-96 h-96 bg-sky-400/20 rounded-full blur-3xl"></div>
  <div class="absolute bottom-0 left-0 w-96 h-96 bg-blue-400/20 rounded-full blur-3xl"></div>

  <div class="relative z-10 max-w-7xl mx-auto text-center">

    <div class="inline-flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow border mb-8">
      <i data-lucide="shield-check" class="w-4 h-4 text-primary"></i>
      <span class="text-sm text-gray-600">Trusted by 50,000+ customers</span>
    </div>

    <h1 class="text-5xl md:text-7xl font-bold mb-6">
      Health Insurance
      <span class="block bg-gradient-to-r from-sky-500 to-blue-600 bg-clip-text text-transparent">
        Made Simple
      </span>
    </h1>

    <p class="text-xl text-gray-600 max-w-2xl mx-auto mb-10">
      Manage your policies, submit claims, and track payments all in one
      beautiful, intuitive platform designed for the modern age.
    </p>

    <div class="flex flex-col sm:flex-row gap-4 justify-center">
      <a th:href="@{/register}"
         class="inline-flex items-center justify-center px-8 py-4 rounded-xl
                bg-primary text-white text-lg font-semibold
                shadow-lg hover:shadow-xl hover:-translate-y-0.5
                transition-all duration-300">
        Get Started Free
        <i data-lucide="arrow-right" class="ml-2 w-5 h-5"></i>
      </a>

      <a th:href="@{/login}"
         class="inline-flex items-center justify-center px-8 py-4 rounded-xl
                border text-lg hover:bg-gray-100 hover:-translate-y-0.5
                transition-all duration-300">
        Sign In
      </a>
    </div>

    <div class="flex items-center justify-center gap-8 mt-12">
      <div class="flex -space-x-3">
        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 border-2 border-white"></div>
        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 border-2 border-white"></div>
        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 border-2 border-white"></div>
        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 border-2 border-white"></div>
      </div>

      <div class="text-left">
        <div class="flex text-amber-400">
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
        </div>
        <p class="text-sm text-gray-500">4.9/5 from 2,000+ reviews</p>
      </div>
    </div>
  </div>
</section>

<!-- ================= FEATURES ================= -->
<section id="features" class="py-24 px-4 bg-white">
  <div class="max-w-7xl mx-auto">

    <div class="text-center mb-16">
      <h2 class="text-4xl font-bold mb-4">Everything You Need</h2>
      <p class="text-xl text-gray-600 max-w-2xl mx-auto">
        A complete suite of tools to manage your health insurance with confidence
      </p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">

      <!-- Feature Card -->
      <div class="p-6 rounded-2xl border bg-white shadow-sm
                  hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
          <i data-lucide="file-text" class="w-7 h-7 text-primary"></i>
        </div>
        <h3 class="text-xl font-semibold mb-3">Policy Management</h3>
        <p class="text-gray-600">
          Browse, compare, and manage all your insurance policies in one place with complete transparency.
        </p>
      </div>

      <div class="p-6 rounded-2xl border bg-white shadow-sm
                  hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
          <i data-lucide="clipboard-list" class="w-7 h-7 text-primary"></i>
        </div>
        <h3 class="text-xl font-semibold mb-3">Easy Claims</h3>
        <p class="text-gray-600">
          Submit and track claims effortlessly with real-time updates.
        </p>
      </div>

      <div class="p-6 rounded-2xl border bg-white shadow-sm
                  hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
          <i data-lucide="credit-card" class="w-7 h-7 text-primary"></i>
        </div>
        <h3 class="text-xl font-semibold mb-3">Secure Payments</h3>
        <p class="text-gray-600">
          Pay premiums securely with multiple payment options.
        </p>
      </div>

      <div class="p-6 rounded-2xl border bg-white shadow-sm
                  hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
          <i data-lucide="headphones" class="w-7 h-7 text-primary"></i>
        </div>
        <h3 class="text-xl font-semibold mb-3">24/7 Support</h3>
        <p class="text-gray-600">
          Get help anytime with our dedicated support team.
        </p>
      </div>

    </div>
  </div>
</section>

<!-- ================= BENEFITS ================= -->
<section class="py-24 px-4 bg-gradient-to-br from-sky-500 to-blue-600 text-white">
  <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-16 items-center">

    <div>
      <h2 class="text-4xl font-bold mb-6">Why Choose HIMS?</h2>
      <p class="text-xl text-white/80 mb-8">
        We've reimagined health insurance management to be faster, simpler, and more transparent.
      </p>

      <ul class="space-y-4 text-lg">
        <li class="flex items-center gap-3">
          <i data-lucide="check-circle" class="text-emerald-300"></i>
          Instant policy activation
        </li>
        <li class="flex items-center gap-3">
          <i data-lucide="check-circle" class="text-emerald-300"></i>
          Claims processed in 2448 hours
        </li>
        <li class="flex items-center gap-3">
          <i data-lucide="check-circle" class="text-emerald-300"></i>
          Secure encrypted payments
        </li>
        <li class="flex items-center gap-3">
          <i data-lucide="check-circle" class="text-emerald-300"></i>
          Dedicated 24/7 support
        </li>
        <li class="flex items-center gap-3">
          <i data-lucide="check-circle" class="text-emerald-300"></i>
          Mobile-friendly experience
        </li>
      </ul>
    </div>

    <div class="grid grid-cols-2 gap-6 bg-white/10 backdrop-blur rounded-3xl p-8 border border-white/20">
      <div class="text-center p-6 bg-white/10 rounded-2xl">
        <p class="text-4xl font-bold">50K+</p>
        <p class="text-white/70">Active Users</p>
      </div>
      <div class="text-center p-6 bg-white/10 rounded-2xl">
        <p class="text-4xl font-bold">99%</p>
        <p class="text-white/70">Claims Approved</p>
      </div>
      <div class="text-center p-6 bg-white/10 rounded-2xl">
        <p class="text-4xl font-bold">24h</p>
        <p class="text-white/70">Avg Response</p>
      </div>
      <div class="text-center p-6 bg-white/10 rounded-2xl">
        <p class="text-4xl font-bold">4.9</p>
        <p class="text-white/70">User Rating</p>
      </div>
    </div>

  </div>
</section>

<!-- ================= TESTIMONIALS ================= -->
<section class="py-24 px-4 bg-white">
  <div class="max-w-7xl mx-auto">

    <div class="text-center mb-16">
      <h2 class="text-4xl font-bold mb-4">Loved by Thousands</h2>
      <p class="text-xl text-gray-600">See what our customers have to say</p>
    </div>

    <div class="grid md:grid-cols-3 gap-8">

      <!-- Testimonial -->
      <div class="p-8 rounded-2xl border bg-white shadow-md
                  hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex text-amber-400 mb-4">
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
        </div>
        <p class="text-gray-600 mb-6">
          HIMS made managing my company's health insurance so simple. Claims are processed quickly.
        </p>
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 rounded-full bg-gradient-to-r from-sky-500 to-blue-600"></div>
          <div>
            <p class="font-semibold">Sarah Johnson</p>
            <p class="text-sm text-gray-500">Small Business Owner</p>
          </div>
        </div>
      </div>

      <div class="p-8 rounded-2xl border bg-white shadow-md
                  hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex text-amber-400 mb-4">
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
        </div>
        <p class="text-gray-600 mb-6">
          Finally, an insurance platform that actually works! Submitting claims takes minutes.
        </p>
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 rounded-full bg-gradient-to-r from-sky-500 to-blue-600"></div>
          <div>
            <p class="font-semibold">Michael Chen</p>
            <p class="text-sm text-gray-500">Family Plan Holder</p>
          </div>
        </div>
      </div>

      <div class="p-8 rounded-2xl border bg-white shadow-md
                  hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex text-amber-400 mb-4">
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
          <i data-lucide="star" class="fill-amber-400"></i>
        </div>
        <p class="text-gray-600 mb-6">
          The mobile experience is fantastic. I can manage everything from my phone.
        </p>
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 rounded-full bg-gradient-to-r from-sky-500 to-blue-600"></div>
          <div>
            <p class="font-semibold">Emily Rodriguez</p>
            <p class="text-sm text-gray-500">Individual Policy Holder</p>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- ================= CTA ================= -->
<section class="py-24 px-4 bg-white">
  <div class="max-w-4xl mx-auto text-center">
    <h2 class="text-4xl font-bold mb-6">Ready to Get Started?</h2>
    <p class="text-xl text-gray-600 mb-10">
      Join thousands of satisfied customers who trust HIMS for their health insurance needs.
    </p>
    <div class="flex flex-col sm:flex-row gap-4 justify-center">
      <a th:href="@{/register}"
         class="inline-flex items-center justify-center px-8 py-4 rounded-xl
                bg-primary text-white text-lg font-semibold
                shadow-lg hover:shadow-xl hover:-translate-y-0.5
                transition-all duration-300">
        Create Free Account
        <i data-lucide="arrow-right" class="ml-2 w-5 h-5"></i>
      </a>
      <a href="#contact"
         class="inline-flex items-center justify-center px-8 py-4 rounded-xl
                border text-lg hover:bg-gray-100 hover:-translate-y-0.5
                transition-all duration-300">
        Contact Sales
      </a>
    </div>
  </div>
</section>

<!-- ================= CONTACT ================= -->
<section id="contact" class="py-24 px-4 bg-gray-50">
  <div class="max-w-4xl mx-auto">

    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold mb-4">Contact Our Sales Team</h2>
      <p class="text-xl text-gray-600">
        Have questions? Our team is here to help you find the right plan.
      </p>
    </div>

    <form class="bg-white p-8 rounded-2xl border shadow-md grid md:grid-cols-2 gap-6">
      <input class="border px-4 py-3 rounded-xl" placeholder="Full Name">
      <input class="border px-4 py-3 rounded-xl" placeholder="Email Address">
      <input class="border px-4 py-3 rounded-xl" placeholder="Company">
      <input class="border px-4 py-3 rounded-xl" placeholder="Phone Number">
      <textarea class="border px-4 py-3 rounded-xl md:col-span-2 resize-none"
                rows="4"
                placeholder="Tell us about your needs..."></textarea>
      <button class="md:col-span-2 bg-primary text-white py-3 rounded-xl font-semibold
                     shadow-lg hover:shadow-xl hover:-translate-y-0.5
                     transition-all duration-300">
        Send Message
      </button>
    </form>

  </div>
</section>

<!-- ================= FOOTER ================= -->
<footer class="py-12 px-4 bg-gray-900 text-white/80">
  <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
    <div class="flex items-center gap-2">
      <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center">
        <i data-lucide="shield" class="w-5 h-5 text-white"></i>
      </div>
      <span class="text-xl font-bold text-white">HIMS</span>
    </div>
    <p class="text-sm"> 2024 HIMS. All rights reserved.</p>
  </div>
</footer>

<script>
  lucide.createIcons();
</script>

</body>
</html>



------------------------------------------------------


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
    <title>Login | HIMS - Health Insurance Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body { font-family: 'Inter', sans-serif; }

        .gradient-primary {
            background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
        }

        .gradient-text {
            background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Input Focus Styling */
        .hims-input:focus {
            outline: none;
            ring: 2px;
            ring-color: #10b981;
            border-color: #10b981;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">

    <div class="min-h-screen flex">
        
        <div class="flex-1 flex items-center justify-center p-8 bg-white">
            <div class="w-full max-w-md animate-fade-in">
                
                <a th:href="@{/}" class="flex items-center gap-2 mb-12">
                    <div class="w-10 h-10 rounded-xl gradient-primary flex items-center justify-center shadow-lg shadow-emerald-100">
                        <i data-lucide="shield" class="w-6 h-6 text-white"></i>
                    </div>
                    <span class="text-xl font-bold gradient-text">HIMS</span>
                </a>

                <h1 class="text-3xl font-bold mb-2 text-slate-900">Welcome back</h1>
                <p class="text-slate-500 mb-8">Sign in to access your insurance dashboard</p>

                <div th:if="${error}" class="p-4 mb-6 rounded-xl bg-red-50 text-red-600 text-sm border border-red-100 animate-fade-in">
    <div class="flex items-center gap-2">
        <i data-lucide="alert-circle" class="w-4 h-4"></i>
        <span th:text="${error}"></span>
    </div>
</div>

<div th:if="${param.registered}" class="p-4 mb-6 rounded-xl bg-emerald-50 text-emerald-600 text-sm border border-emerald-100 animate-fade-in">
    <div class="flex items-center gap-2">
        <i data-lucide="check-circle" class="w-4 h-4"></i>
    <span>Registration successful! Please sign in.</span>
    </div>
</div>

<div id="jsErrorAlert" class="hidden p-4 mb-6 rounded-xl bg-red-50 text-red-600 text-sm border border-red-100 animate-fade-in">
    <div class="flex items-center gap-2">
        <i data-lucide="alert-circle" class="w-4 h-4"></i>
        <span>Please fill in all fields</span>
    </div>
</div>

                <form id="loginForm" th:action="@{/login}" method="POST" class="space-y-6">
                    
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-slate-700">Email Address</label>
                        <div class="relative">
                            <i data-lucide="mail" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"></i>
                            <input 
                                type="email" 
                                id="email"
                                name="email"
                                placeholder="you@example.com" 
                                class="w-full pl-12 pr-4 py-2.5 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"
                            >
                        </div>
                    </div>

                    <div class="space-y-2">
                        <div class="flex items-center justify-between">
                            <label class="text-sm font-medium text-slate-700">Password</label>
                            <a href="#" class="text-sm text-emerald-600 hover:underline font-medium">Forgot password?</a>
                        </div>
                        <div class="relative">
                            <i data-lucide="lock" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"></i>
                            <input 
                                type="password" 
                                id="password"
                                name="password"
                                placeholder="" 
                                class="w-full pl-12 pr-12 py-2.5 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"
                            >
                            <button 
                                type="button" 
                                onclick="togglePassword()"
                                class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600"
                            >
                                <span id="eyeIcon"><i data-lucide="eye" class="w-5 h-5"></i></span>
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="w-full gradient-primary text-white py-3 rounded-xl font-semibold shadow-lg shadow-emerald-100 hover:opacity-90 transition-all flex items-center justify-center gap-2">
                        Sign In
                        <i data-lucide="arrow-right" class="w-5 h-5"></i>
                    </button>
                </form>

                <div class="mt-8 text-center">
                    <p class="text-slate-500">
                        Don't have an account? 
                        <a th:href="@{/register}" class="text-emerald-600 font-semibold hover:underline">
                            Create account
                        </a>
                    </p>
                </div>

                <!-- <div class="mt-8 p-4 rounded-2xl bg-slate-50 border border-slate-100 space-y-3">
                    <p class="text-sm font-bold text-slate-700 uppercase tracking-wider text-[10px]">Demo Accounts:</p>
                    <div class="text-xs text-slate-500 space-y-2">
                        <div class="flex justify-between items-center bg-white p-2 rounded-lg border border-slate-100">
                            <code class="text-emerald-600 font-semibold">admin@hims.com</code>
                            <span class="text-[10px] bg-slate-100 px-1.5 py-0.5 rounded text-slate-500">Admin</span>
                        </div>
                        <div class="flex justify-between items-center bg-white p-2 rounded-lg border border-slate-100">
                            <code class="text-emerald-600 font-semibold">agent@hims.com</code>
                            <span class="text-[10px] bg-slate-100 px-1.5 py-0.5 rounded text-slate-500">Agent</span>
                        </div>
                        <div class="flex justify-between items-center bg-white p-2 rounded-lg border border-slate-100">
                            <code class="text-emerald-600 font-semibold">user@hims.com</code>
                            <span class="text-[10px] bg-slate-100 px-1.5 py-0.5 rounded text-slate-500">Customer</span>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>

        <div class="hidden lg:flex flex-1 gradient-primary items-center justify-center p-12 relative overflow-hidden">
            <div class="absolute inset-0 opacity-10">
                <div class="absolute top-20 left-20 w-64 h-64 rounded-full border-4 border-white/30"></div>
                <div class="absolute bottom-20 right-20 w-48 h-48 rounded-full border-4 border-white/30"></div>
                <div class="absolute top-1/2 left-1/3 w-32 h-32 rounded-full bg-white/10"></div>
            </div>
            
            <div class="relative z-10 text-white text-center max-w-lg">
                <div class="w-24 h-24 rounded-3xl bg-white/20 flex items-center justify-center mx-auto mb-8 backdrop-blur-md border border-white/30 shadow-2xl">
                    <i data-lucide="shield" class="w-12 h-12"></i>
                </div>
                <h2 class="text-4xl font-bold mb-4">Your Health, Our Priority</h2>
                <p class="text-xl text-white/80 leading-relaxed font-light">
                    Access your policies, manage claims, and stay protected with our comprehensive insurance management platform.
                </p>
            </div>
        </div>

    </div>

    <script>
        // Initialize Icons
        lucide.createIcons();

        // Toggle Password Visibility
        let showPassword = false;
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeContainer = document.getElementById('eyeIcon');
            showPassword = !showPassword;
            
            if (showPassword) {
                passwordInput.type = "text";
                eyeContainer.innerHTML = '<i data-lucide="eye-off" class="w-5 h-5"></i>';
            } else {
                passwordInput.type = "password";
                eyeContainer.innerHTML = '<i data-lucide="eye" class="w-5 h-5"></i>';
            }
            lucide.createIcons(); // Refresh icons
        }

        // Form Submission Logic
        // document.getElementById('loginForm').addEventListener('submit', function(e) {
        //     e.preventDefault();
        //     const email = document.getElementById('email').value;
        //     const password = document.getElementById('password').value;
        //     const errorAlert = document.getElementById('errorAlert');

        //     if (!email || !password) {
        //         errorAlert.classList.remove('hidden');
        //         return;
        //     }

        //     errorAlert.classList.add('hidden');

        //     // Redirect Logic based on React Component
        //     if (email === "admin@hims.com") {
        //         alert("Redirecting to Admin Dashboard...");
        //         window.location.href = "admin/dashboard.html";
        //     } else if (email === "agent@hims.com") {
        //         alert("Redirecting to Agent Dashboard...");
        //         window.location.href = "agent/dashboard.html";
        //     } else {
        //         alert("Redirecting to Customer Dashboard...");
        //         window.location.href = "user/dashboard.html";
        //     }
        // });
        document.getElementById('loginForm').addEventListener('submit', function(e) {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const jsErrorAlert = document.getElementById('jsErrorAlert');

    // Only prevent submission if fields are empty
    if (!email || !password) {
        e.preventDefault(); 
        jsErrorAlert.classList.remove('hidden');
        return;
    }

    // REMOVE all the alert() and window.location.href logic.
    // Let the form submit naturally to the @PostMapping("/login") in your Controller.
});
    </script>
</body>
</html>



----------------------------------------------------


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>404  Page Not Found | HIMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#2563eb"
          }
        }
      }
    }
  </script>
</head>

<body class="bg-slate-100">

  <!-- ================= 404 PAGE ================= -->
  <div class="flex min-h-screen items-center justify-center">
    <div class="text-center">

      <h1 class="mb-4 text-4xl font-bold text-gray-900">404</h1>

      <p class="mb-4 text-xl text-gray-500">
        Oops! Page not found
      </p>

      <a href="/" class="text-primary font-semibold underline hover:text-blue-700 transition">
        Return to Home
      </a>

    </div>
  </div>

</body>
</html>



-------------------------------------------------------



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
    <title>Register | HIMS - Health Insurance Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-gradient: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
        }

        body {
            font-family: 'Inter', sans-serif;
        }

        .gradient-primary {
            background: var(--primary-gradient);
        }

        .gradient-text {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Select Styling */
        .role-option:hover {
            background-color: #f3f4f6;
        }
        
        .role-dropdown {
            display: none;
            position: absolute;
            width: 100%;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            margin-top: 0.25rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            z-index: 50;
        }

        .show { display: block; }
    </style>
</head>
<body class="bg-gray-50">

    <div class="min-h-screen flex">
        <div class="hidden lg:flex flex-1 gradient-primary items-center justify-center p-12 relative overflow-hidden">
            <div class="absolute inset-0 opacity-10">
                <div class="absolute top-20 right-20 w-64 h-64 rounded-full border-4 border-white/30"></div>
                <div class="absolute bottom-20 left-20 w-48 h-48 rounded-full border-4 border-white/30"></div>
                <div class="absolute top-1/3 right-1/4 w-32 h-32 rounded-full bg-white/10"></div>
            </div>
            
            <div class="relative z-10 text-white text-center max-w-lg">
                <div class="w-24 h-24 rounded-2xl bg-white/20 flex items-center justify-center mx-auto mb-8">
                    <i data-lucide="shield" class="w-12 h-12"></i>
                </div>
                <h2 class="text-3xl font-bold mb-4">Join HIMS Today</h2>
                <p class="text-xl text-white/80 mb-8">
                    Create your account and start managing your health insurance with ease. Simple, secure, and always at your fingertips.
                </p>
                <div class="flex items-center justify-center gap-8 text-white/80">
                    <div class="text-center">
                        <p class="text-2xl font-bold text-white">50K+</p>
                        <p class="text-sm">Happy Users</p>
                    </div>
                    <div class="w-px h-12 bg-white/30"></div>
                    <div class="text-center">
                        <p class="text-2xl font-bold text-white">99%</p>
                        <p class="text-sm">Claims Approved</p>
                    </div>
                    <div class="w-px h-12 bg-white/30"></div>
                    <div class="text-center">
                        <p class="text-2xl font-bold text-white">24/7</p>
                        <p class="text-sm">Support</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex-1 flex items-center justify-center p-8 bg-white">
            <div class="w-full max-w-md animate-fade-in">
                <a th:href="@{/}" class="flex items-center gap-2 mb-12">
                    <div class="w-10 h-10 rounded-xl gradient-primary flex items-center justify-center">
                        <i data-lucide="shield" class="w-6 h-6 text-white"></i>
                    </div>
                    <span class="text-xl font-bold gradient-text">HIMS</span>
                </a>
<div th:if="${error}" class="p-4 mb-6 rounded-xl bg-red-50 text-red-600 text-sm border border-red-100 flex items-center gap-2 animate-fade-in">
    <i data-lucide="alert-circle" class="w-4 h-4"></i>
    <span th:text="${error}"></span>
</div>
                <h1 class="text-3xl font-bold mb-2">Create your account</h1>
                <p class="text-muted-foreground mb-8 text-gray-500">Start managing your health insurance today</p>

                <form id="registrationForm" th:action="@{/register}" method="POST" class="space-y-5">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">First Name *</label>
                            <div class="relative">
                                <i data-lucide="user" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                                <input type="text" name="firstName" id="firstName" placeholder="John" 
                                    class="w-full pl-12 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                            </div>
                            <p id="error-firstName" class="text-xs text-red-500 hidden"></p>
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">Last Name *</label>
                            <input type="text" name="lastName" id="lastName" placeholder="Doe" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                            <p id="error-lastName" class="text-xs text-red-500 hidden"></p>
                        </div>
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-700">Email Address *</label>
                        <div class="relative">
                            <i data-lucide="mail" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                            <input type="email" name="email" id="email" placeholder="you@example.com" 
                                class="w-full pl-12 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <p id="error-email" class="text-xs text-red-500 hidden"></p>
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-700">Phone Number (Optional)</label>
                        <div class="relative">
                            <i data-lucide="phone" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                            <input type="tel" name="phone" id="phone" placeholder="+1 (555) 123-4567" 
                                class="w-full pl-12 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                        </div>
                    </div>

                    <div class="space-y-2 relative">
                        <label class="text-sm font-medium text-gray-700">Select Role *</label>
                        <div class="relative">
                            <i data-lucide="users" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 z-10"></i>
                            <button type="button" id="roleButton" onclick="toggleDropdown()"
                                class="w-full pl-12 pr-4 py-2 text-left border border-gray-300 rounded-md bg-white flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-emerald-500">
                                <span id="selectedRoleText" class="text-gray-500">Choose your role</span>
                                <i data-lucide="chevron-down" class="w-4 h-4 text-gray-400"></i>
                            </button>
                            <input type="hidden" name="role" id="roleValue">
                            <input type="hidden" name="username" id="usernameValue">
                            
                            <div id="roleDropdown" class="role-dropdown">
                                <div class="role-option p-3 cursor-pointer" onclick="selectRole('USER', 'Customer', 'View policies, submit claims, make payments')">
                                    <p class="font-medium text-sm">Customer</p>
                                    <p class="text-xs text-gray-500">View policies, submit claims, make payments</p>
                                </div>
                                <div class="role-option p-3 cursor-pointer border-t border-gray-100" onclick="selectRole('AGENT', 'Agent', 'Manage policies, review and process claims')">
                                    <p class="font-medium text-sm">Agent</p>
                                    <p class="text-xs text-gray-500">Manage policies, review and process claims</p>
                                </div>
                            </div>
                        </div>
                        <p id="error-role" class="text-xs text-red-500 hidden"></p>
                        <p class="text-xs text-gray-400">Admin accounts are created internally</p>
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-700">Password *</label>
                        <div class="relative">
                            <i data-lucide="lock" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                            <input type="password" name="password" id="password" placeholder="" 
                                class="w-full pl-12 pr-12 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                            <button type="button" onclick="togglePassVisibility('password', this)" class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">
                                <i data-lucide="eye" class="w-5 h-5"></i>
                            </button>
                        </div>
                        <p id="error-password" class="text-xs text-red-500 hidden"></p>
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-700">Confirm Password *</label>
                        <div class="relative">
                            <i data-lucide="lock" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                            <input type="password" name="confirmPassword" id="confirmPassword" placeholder="" 
                                class="w-full pl-12 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <p id="error-confirmPassword" class="text-xs text-red-500 hidden"></p>
                    </div>
                    
                    <button type="submit" class="w-full gradient-primary text-white py-3 rounded-md font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2">
                        Create Account
                        <i data-lucide="arrow-right" class="w-5 h-5"></i>
                    </button>
                </form>

                <p class="mt-6 text-xs text-gray-500 text-center">
                    By creating an account, you agree to our 
                    <a href="#" class="text-emerald-600 hover:underline">Terms of Service</a>
                    and 
                    <a href="#" class="text-emerald-600 hover:underline">Privacy Policy</a>
                </p>

                <div class="mt-8 text-center">
                    <p class="text-gray-500">
                        Already have an account? 
                        <a th:href="@{/login}" class="text-emerald-600 font-semibold hover:underline">Sign in</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Icons
        lucide.createIcons();

        // Form Logic
        const form = document.getElementById('registrationForm');
        const roleDropdown = document.getElementById('roleDropdown');
        const roleButton = document.getElementById('roleButton');
        const roleValue = document.getElementById('roleValue');
        const selectedRoleText = document.getElementById('selectedRoleText');

        function toggleDropdown() {
            roleDropdown.classList.toggle('show');
        }

        function selectRole(val, label, sub) {
            roleValue.value = val;
            selectedRoleText.innerText = label;
            selectedRoleText.classList.remove('text-gray-500');
            selectedRoleText.classList.add('text-black');
            roleDropdown.classList.remove('show');
            document.getElementById('error-role').classList.add('hidden');
        }

        function togglePassVisibility(id, btn) {
            const input = document.getElementById(id);
            const icon = btn.querySelector('i');
            if (input.type === 'password') {
                input.type = 'text';
                btn.innerHTML = '<i data-lucide="eye-off" class="w-5 h-5"></i>';
            } else {
                input.type = 'password';
                btn.innerHTML = '<i data-lucide="eye" class="w-5 h-5"></i>';
            }
            lucide.createIcons();
        }

        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.closest('#roleButton')) {
                roleDropdown.classList.remove('show');
            }
        }

        // Validation
        // form.onsubmit = function(e) {
        //     e.preventDefault();
        //     let isValid = true;
        //     const fields = ['firstName', 'lastName', 'email', 'password', 'confirmPassword'];
            
        //     // Basic reset
        //     fields.forEach(f => document.getElementById(`error-${f}`).classList.add('hidden'));
        //     document.getElementById('error-role').classList.add('hidden');

        //     const data = {
        //         firstName: document.getElementById('firstName').value,
        //         lastName: document.getElementById('lastName').value,
        //         email: document.getElementById('email').value,
        //         role: roleValue.value,
        //         password: document.getElementById('password').value,
        //         confirmPassword: document.getElementById('confirmPassword').value
        //     };

        //     if(!data.firstName.trim()) { 
        //         showError('firstName', 'First name is required'); isValid = false; 
        //     }
        //     if(!data.lastName.trim()) { 
        //         showError('lastName', 'Last name is required'); isValid = false; 
        //     }
        //     if(!data.email.trim() || !data.email.includes('@')) { 
        //         showError('email', 'Please enter a valid email address'); isValid = false; 
        //     }
        //     if(!data.role) { 
        //         showError('role', 'Please select a role'); isValid = false; 
        //     }
        //     if(data.password.length < 8) { 
        //         showError('password', 'Password must be at least 8 characters'); isValid = false; 
        //     }
        //     if(data.password !== data.confirmPassword) { 
        //         showError('confirmPassword', 'Passwords do not match'); isValid = false; 
        //     }

        //     if(isValid) {
        //         alert(`Account created successfully as ${data.role}! Redirecting...`);
        //         // window.location.href = data.role === 'agent' ? '/agent' : '/dashboard';
        //     }
        // };
form.onsubmit = function(e) {
    let isValid = true;
    const fields = ['firstName', 'lastName', 'email', 'password', 'confirmPassword'];
    
    // 1. Reset all error messages
    fields.forEach(f => {
        const err = document.getElementById(`error-${f}`);
        if(err) err.classList.add('hidden');
    });
    document.getElementById('error-role').classList.add('hidden');

    // 2. Collect current values
    const data = {
        firstName: document.getElementById('firstName').value.trim(),
        lastName: document.getElementById('lastName').value.trim(),
        email: document.getElementById('email').value.trim(),
        role: roleValue.value,
        password: document.getElementById('password').value,
        confirmPassword: document.getElementById('confirmPassword').value
    };

    // 3. Run Validation Checks
    if(!data.firstName) { showError('firstName', 'First name is required'); isValid = false; }
    if(!data.lastName) { showError('lastName', 'Last name is required'); isValid = false; }
    if(!data.email || !data.email.includes('@')) { showError('email', 'Enter a valid email'); isValid = false; }
    if(!data.role) { showError('role', 'Please select a role'); isValid = false; }
    if(data.password.length < 8) { showError('password', 'Min 8 characters'); isValid = false; }
    if(data.password !== data.confirmPassword) { showError('confirmPassword', 'Passwords do not match'); isValid = false; }

    // 4. Prepare server payload
    // set username hidden field to firstName + lastName
    document.getElementById('usernameValue').value = (data.firstName + ' ' + data.lastName).trim();

    // 5. Final Decision
    if (!isValid) {
        e.preventDefault(); // Stop form only if there are local errors
        return false;
    }
    
    // If isValid is true, the form will now submit to your Java @PostMapping
    return true; 
};
        function showError(field, msg) {
            const errEl = document.getElementById(`error-${field}`);
            errEl.innerText = msg;
            errEl.classList.remove('hidden');
        }
    </script>
</body>
</html>


-----------------------------------------------


Application properties



----------------------------------------------------




spring.application.name=HealthInsuranceManagement
logging.level.org.springframework=DEBUG
spring.datasource.url=jdbc:mysql://localhost:3306/healthinsurancemanagement
spring.datasource.username=root
spring.datasource.password=root
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Include full stacktrace in error responses to speed debugging (disable in production)
# server.error.include-stacktrace=always
# server.error.include-message=always

# Temporary override for local testing to avoid port conflicts
# server.port=8081









----------------------------Pom.xml----------------------------------


<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.healthinsurance</groupId>
    <artifactId>SRC</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>

    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.2.0</version>
        <relativePath/>
    </parent>

    <properties>
        <java.version>17</java.version>
    </properties>

    <dependencies>

        <!-- Web -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <!-- Security -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>

        <!-- JPA -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>

        <!-- MySQL -->
        <dependency>
            <groupId>com.mysql</groupId>
            <artifactId>mysql-connector-j</artifactId>
            <scope>runtime</scope>
        </dependency>

        <!-- Validation -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency>

        <!-- Jackson -->
        <dependency>
            <groupId>com.fasterxml.jackson.datatype</groupId>
            <artifactId>jackson-datatype-jsr310</artifactId>
        </dependency>

        <!-- Thymeleaf templates -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>

        <!-- Thymeleaf extras for Spring Security -->
        <dependency>
            <groupId>org.thymeleaf.extras</groupId>
            <artifactId>thymeleaf-extras-springsecurity6</artifactId>
        </dependency>

        <!-- Tests -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <build>
        <sourceDirectory>main/java</sourceDirectory>
        <testSourceDirectory>test/java</testSourceDirectory>
        <resources>
            <resource>
                <directory>main/resources</directory>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <directory>test/resources</directory>
            </testResource>
        </testResources>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>

</project>



END









